/*
: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 @website: http://www.datejs.com/
*/
(function(a,d){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",beforeSubmit:function(){return!0},CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){c=a.Event(c);b.trigger(c,d);return c.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(b){var e,
f,g,h=b.data("cross-domain")||null,k=b.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,j;if(c.fire(b,"ajax:before")){if(b.is("form")){if(e=b.attr("method"),f=b.attr("action"),g=b.serializeArray(),j=b.data("ujs:submit-button"))g.push(j),b.data("ujs:submit-button",null)}else b.is(c.inputChangeSelector)?(e=b.data("method"),f=b.data("url"),g=b.serialize(),b.data("params")&&(g=g+"&"+b.data("params"))):(e=b.data("method"),f=b.attr("href"),g=b.data("params")||null);e={type:e||"GET",data:g,dataType:k,
crossDomain:h,beforeSend:function(a,e){e.dataType===d&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script);return c.fire(b,"ajax:beforeSend",[a,e])},success:function(a,c,e){b.trigger("ajax:success",[a,c,e])},complete:function(a,c){b.trigger("ajax:complete",[a,c])},error:function(a,c,e){b.trigger("ajax:error",[a,c,e])}};if(f)e.url=f;c.ajax(e)}},handleMethod:function(b){var e=b.attr("href"),f=b.data("method");b=b.attr("target");var g=a("meta[name=csrf-token]").attr("content"),h=a("meta[name=csrf-param]").attr("content"),
k=a('<form method="post" action="'+e+'"></form>');e='<input name="_method" value="'+f+'" type="hidden" />';h!==d&&g!==d&&(e+='<input name="'+h+'" value="'+g+'" type="hidden" />');b&&k.attr("target",b);k.hide().append(e).appendTo("body");c.beforeSubmit(function(){k.submit()})&&k.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]());b[c](b.data("disable-with"));b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=
a(this),c=b.is("button")?"html":"val";if(b.data("ujs:enable-with"))b[c](b.data("ujs:enable-with"));b.prop("disabled",!1)})},allowAction:function(a){var e=a.data("confirm"),d=!1,g;if(!e)return!0;c.fire(a,"confirm")&&(d=c.confirm(e),g=c.fire(a,"confirm:complete",[d]));return d&&g},blankInputs:function(b,c,d){var g=a(),h;b.find(c||"input,textarea").each(function(){h=a(this);if(d?h.val():!h.val())g=g.add(h)});return g.length?g:!1},nonBlankInputs:function(a,e){return c.blankInputs(a,e,!0)},stopEverything:function(b){a(b.target).trigger("ujs:everythingStopped");
b.stopImmediatePropagation();return!1},callFormSubmitBindings:function(b){b=b.data("events");var c=!0;b!==d&&b.submit!==d&&a.each(b.submit,function(a,b){if(typeof b.handler==="function")return c=b.handler(b.data)});return c},disableElement:function(a){a.data("ujs:enable-with",a.html());a.html(a.data("disable-with"));a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==d&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",
!1));a.unbind("click.railsDisable")}};a.ajaxPrefilter(function(a,e,d){a.crossDomain||c.CSRFProtection(d)});a(c.linkDisableSelector).live("ajax:complete",function(){c.enableElement(a(this))});a(c.linkClickSelector).live("click.rails",function(b){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(b);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==d){if((b.metaKey||b.ctrlKey)&&(!f||f==="GET")&&!g)return!0;c.handleRemote(e);return!1}else if(e.data("method"))return c.handleMethod(e),
!1});a(c.inputChangeSelector).live("change.rails",function(b){var e=a(this);if(!c.allowAction(e))return c.stopEverything(b);c.handleRemote(e);return!1});a(c.formSubmitSelector).live("submit.rails",function(b){var e=a(this),f=e.data("remote")!==d,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(b);if(g&&e.attr("novalidate")===d&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(b);if(f){if(h)return c.fire(e,
"ajax:aborted:file",[h]);if(!a.support.submitBubbles&&c.callFormSubmitBindings(e)===!1)return c.stopEverything(b);c.handleRemote(e);return!1}else setTimeout(function(){c.disableFormElements(e)},13)});a(c.formInputClickSelector).live("click.rails",function(b){var e=a(this);if(!c.allowAction(e))return c.stopEverything(b);b=(b=e.attr("name"))?{name:b,value:e.val()}:null;e.closest("form").data("ujs:submit-button",b)});a(c.formSubmitSelector).live("ajax:beforeSend.rails",function(b){this===b.target&&c.disableFormElements(a(this))});
a(c.formSubmitSelector).live("ajax:complete.rails",function(b){this===b.target&&c.enableFormElements(a(this))})})(jQuery);
(function(){var a=this,d=a._,c={},b=Array.prototype,e=Object.prototype,f=b.push,g=b.slice,h=b.concat,k=e.toString,j=e.hasOwnProperty,q=b.forEach,s=b.map,u=b.reduce,t=b.reduceRight,v=b.filter,B=b.every,o=b.some,n=b.indexOf,p=b.lastIndexOf;e=Array.isArray;var A=Object.keys,z=Function.prototype.bind,l=function(a){if(a instanceof l)return a;if(!(this instanceof l))return new l(a);this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=l;
exports._=l}else a._=l;l.VERSION="1.4.2";var E=l.each=l.forEach=function(a,b,e){if(a!=null)if(q&&a.forEach===q)a.forEach(b,e);else if(a.length===+a.length)for(var d=0,f=a.length;d<f;d++){if(b.call(e,a[d],d,a)===c)break}else for(d in a)if(l.has(a,d)&&b.call(e,a[d],d,a)===c)break};l.map=l.collect=function(a,b,c){var e=[];if(a==null)return e;if(s&&a.map===s)return a.map(b,c);E(a,function(a,d,f){e[e.length]=b.call(c,a,d,f)});return e};l.reduce=l.foldl=l.inject=function(a,b,c,e){var d=arguments.length>
2;a==null&&(a=[]);if(u&&a.reduce===u)return e&&(b=l.bind(b,e)),d?a.reduce(b,c):a.reduce(b);E(a,function(a,f,g){d?c=b.call(e,c,a,f,g):(c=a,d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return c};l.reduceRight=l.foldr=function(a,b,c,e){var d=arguments.length>2;a==null&&(a=[]);if(t&&a.reduceRight===t)return e&&(b=l.bind(b,e)),arguments.length>2?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=l.keys(a);f=g.length}E(a,function(h,j,o){j=g?g[--f]:--f;
d?c=b.call(e,c,a[j],j,o):(c=a[j],d=!0)});if(!d)throw new TypeError("Reduce of empty array with no initial value");return c};l.find=l.detect=function(a,b,c){var e;D(a,function(a,d,f){if(b.call(c,a,d,f))return e=a,!0});return e};l.filter=l.select=function(a,b,c){var e=[];if(a==null)return e;if(v&&a.filter===v)return a.filter(b,c);E(a,function(a,d,f){b.call(c,a,d,f)&&(e[e.length]=a)});return e};l.reject=function(a,b,c){var e=[];if(a==null)return e;E(a,function(a,d,f){b.call(c,a,d,f)||(e[e.length]=a)});
return e};l.every=l.all=function(a,b,e){b||(b=l.identity);var d=!0;if(a==null)return d;if(B&&a.every===B)return a.every(b,e);E(a,function(a,f,g){if(!(d=d&&b.call(e,a,f,g)))return c});return!!d};var D=l.some=l.any=function(a,b,e){b||(b=l.identity);var d=!1;if(a==null)return d;if(o&&a.some===o)return a.some(b,e);E(a,function(a,f,g){if(d||(d=b.call(e,a,f,g)))return c});return!!d};l.contains=l.include=function(a,b){var c=!1;if(a==null)return c;if(n&&a.indexOf===n)return a.indexOf(b)!=-1;return c=D(a,
function(a){return a===b})};l.invoke=function(a,b){var c=g.call(arguments,2);return l.map(a,function(a){return(l.isFunction(b)?b:a[b]).apply(a,c)})};l.pluck=function(a,b){return l.map(a,function(a){return a[b]})};l.where=function(a,b){if(l.isEmpty(b))return[];return l.filter(a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})};l.max=function(a,b,c){if(!b&&l.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&l.isEmpty(a))return-Infinity;var e={computed:-Infinity};
E(a,function(a,d,f){d=b?b.call(c,a,d,f):a;d>=e.computed&&(e={value:a,computed:d})});return e.value};l.min=function(a,b,c){if(!b&&l.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&l.isEmpty(a))return Infinity;var e={computed:Infinity};E(a,function(a,d,f){d=b?b.call(c,a,d,f):a;d<e.computed&&(e={value:a,computed:d})});return e.value};l.shuffle=function(a){var b,c=0,e=[];E(a,function(a){b=l.random(c++);e[c-1]=e[b];e[b]=a});return e};var M=function(a){return l.isFunction(a)?
a:function(b){return b[a]}};l.sortBy=function(a,b,c){var e=M(b);return l.pluck(l.map(a,function(a,b,d){return{value:a,index:b,criteria:e.call(c,a,b,d)}}).sort(function(a,b){var c=a.criteria,e=b.criteria;if(c!==e){if(c>e||c===void 0)return 1;if(c<e||e===void 0)return-1}return a.index<b.index?-1:1}),"value")};var J=function(a,b,c,e){var d={},f=M(b);E(a,function(b,g){var h=f.call(c,b,g,a);e(d,h,b)});return d};l.groupBy=function(a,b,c){return J(a,b,c,function(a,b,c){(l.has(a,b)?a[b]:a[b]=[]).push(c)})};
l.countBy=function(a,b,c){return J(a,b,c,function(a,b){l.has(a,b)||(a[b]=0);a[b]++})};l.sortedIndex=function(a,b,c,e){c=c==null?l.identity:M(c);b=c.call(e,b);for(var d=0,f=a.length;d<f;){var g=d+f>>>1;c.call(e,a[g])<b?d=g+1:f=g}return d};l.toArray=function(a){if(!a)return[];if(a.length===+a.length)return g.call(a);return l.values(a)};l.size=function(a){return a.length===+a.length?a.length:l.keys(a).length};l.first=l.head=l.take=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]};l.initial=function(a,
b,c){return g.call(a,0,a.length-(b==null||c?1:b))};l.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]};l.rest=l.tail=l.drop=function(a,b,c){return g.call(a,b==null||c?1:b)};l.compact=function(a){return l.filter(a,function(a){return!!a})};var K=function(a,b,c){E(a,function(a){l.isArray(a)?b?f.apply(c,a):K(a,b,c):c.push(a)});return c};l.flatten=function(a,b){return K(a,b,[])};l.without=function(a){return l.difference(a,g.call(arguments,1))};l.uniq=l.unique=function(a,
b,c,e){c=c?l.map(a,c,e):a;var d=[],f=[];E(c,function(c,e){if(b?!e||f[f.length-1]!==c:!l.contains(f,c))f.push(c),d.push(a[e])});return d};l.union=function(){return l.uniq(h.apply(b,arguments))};l.intersection=function(a){var b=g.call(arguments,1);return l.filter(l.uniq(a),function(a){return l.every(b,function(b){return l.indexOf(b,a)>=0})})};l.difference=function(a){var c=h.apply(b,g.call(arguments,1));return l.filter(a,function(a){return!l.contains(c,a)})};l.zip=function(){for(var a=g.call(arguments),
b=l.max(l.pluck(a,"length")),c=Array(b),e=0;e<b;e++)c[e]=l.pluck(a,""+e);return c};l.object=function(a,b){for(var c={},e=0,d=a.length;e<d;e++)b?c[a[e]]=b[e]:c[a[e][0]]=a[e][1];return c};l.indexOf=function(a,b,c){if(a==null)return-1;var e=0,d=a.length;if(c)if(typeof c=="number")e=c<0?Math.max(0,d+c):c;else return e=l.sortedIndex(a,b),a[e]===b?e:-1;if(n&&a.indexOf===n)return a.indexOf(b,c);for(;e<d;e++)if(a[e]===b)return e;return-1};l.lastIndexOf=function(a,b,c){if(a==null)return-1;var e=c!=null;if(p&&
a.lastIndexOf===p)return e?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=e?c:a.length;c--;)if(a[c]===b)return c;return-1};l.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);c=arguments[2]||1;for(var e=Math.max(Math.ceil((b-a)/c),0),d=0,f=Array(e);d<e;)f[d++]=a,a+=c;return f};var H=function(){};l.bind=function(a,b){var c,e;if(a.bind===z&&z)return z.apply(a,g.call(arguments,1));if(!l.isFunction(a))throw new TypeError;e=g.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,
e.concat(g.call(arguments)));H.prototype=a.prototype;var d=new H,f=a.apply(d,e.concat(g.call(arguments)));if(Object(f)===f)return f;return d}};l.bindAll=function(a){var b=g.call(arguments,1);b.length==0&&(b=l.functions(a));E(b,function(b){a[b]=l.bind(a[b],a)});return a};l.memoize=function(a,b){var c={};b||(b=l.identity);return function(){var e=b.apply(this,arguments);return l.has(c,e)?c[e]:c[e]=a.apply(this,arguments)}};l.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,
c)},b)};l.defer=function(a){return l.delay.apply(l,[a,1].concat(g.call(arguments,1)))};l.throttle=function(a,b){var c,e,d,f,g,h,j=l.debounce(function(){g=f=!1},b);return function(){c=this;e=arguments;var o;d||(d=setTimeout(function(){d=null;g&&(h=a.apply(c,e));j()},b));f?g=!0:(f=!0,h=a.apply(c,e));j();return h}};l.debounce=function(a,b,c){var e,d;return function(){var f=this,g=arguments,h=c&&!e;clearTimeout(e);e=setTimeout(function(){e=null;c||(d=a.apply(f,g))},b);h&&(d=a.apply(f,g));return d}};l.once=
function(a){var b=!1,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};l.wrap=function(a,b){return function(){var c=[a];f.apply(c,arguments);return b.apply(this,c)}};l.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};l.after=function(a,b){if(a<=0)return b();return function(){if(--a<1)return b.apply(this,arguments)}};l.keys=A||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],c;for(c in a)l.has(a,c)&&(b[b.length]=c);return b};l.values=function(a){var b=[],c;for(c in a)l.has(a,c)&&b.push(a[c]);return b};l.pairs=function(a){var b=[],c;for(c in a)l.has(a,c)&&b.push([c,a[c]]);return b};l.invert=function(a){var b={},c;for(c in a)l.has(a,c)&&(b[a[c]]=c);return b};l.functions=l.methods=function(a){var b=[],c;for(c in a)l.isFunction(a[c])&&b.push(c);return b.sort()};l.extend=function(a){E(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]});return a};l.pick=function(a){var c=
{},e=h.apply(b,g.call(arguments,1));E(e,function(b){b in a&&(c[b]=a[b])});return c};l.omit=function(a){var c={},e=h.apply(b,g.call(arguments,1)),d;for(d in a)l.contains(e,d)||(c[d]=a[d]);return c};l.defaults=function(a){E(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])});return a};l.clone=function(a){if(!l.isObject(a))return a;return l.isArray(a)?a.slice():l.extend({},a)};l.tap=function(a,b){b(a);return a};var V=function(a,b,c,e){if(a===b)return a!==0||1/a==1/b;if(a==null||
b==null)return a===b;if(a instanceof l)a=a._wrapped;if(b instanceof l)b=b._wrapped;var d=k.call(a);if(d!=k.call(b))return!1;switch(d){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;for(var f=c.length;f--;)if(c[f]==
a)return e[f]==b;c.push(a);e.push(b);f=0;var g=!0;if(d=="[object Array]"){if(f=a.length,g=f==b.length)for(;f--;)if(!(g=V(a[f],b[f],c,e)))break}else{d=a.constructor;var h=b.constructor;if(d!==h&&(!l.isFunction(d)||!(d instanceof d&&l.isFunction(h)&&h instanceof h)))return!1;for(var j in a)if(l.has(a,j)&&(f++,!(g=l.has(b,j)&&V(a[j],b[j],c,e))))break;if(g){for(j in b)if(l.has(b,j)&&!f--)break;g=!f}}c.pop();e.pop();return g};l.isEqual=function(a,b){return V(a,b,[],[])};l.isEmpty=function(a){if(a==null)return!0;
if(l.isArray(a)||l.isString(a))return a.length===0;for(var b in a)if(l.has(a,b))return!1;return!0};l.isElement=function(a){return!!(a&&a.nodeType===1)};l.isArray=e||function(a){return k.call(a)=="[object Array]"};l.isObject=function(a){return a===Object(a)};E(["Arguments","Function","String","Number","Date","RegExp"],function(a){l["is"+a]=function(b){return k.call(b)=="[object "+a+"]"}});if(!l.isArguments(arguments))l.isArguments=function(a){return!(!a||!l.has(a,"callee"))};if(typeof/./!=="function")l.isFunction=
function(a){return typeof a==="function"};l.isFinite=function(a){return l.isNumber(a)&&isFinite(a)};l.isNaN=function(a){return l.isNumber(a)&&a!=+a};l.isBoolean=function(a){return a===!0||a===!1||k.call(a)=="[object Boolean]"};l.isNull=function(a){return a===null};l.isUndefined=function(a){return a===void 0};l.has=function(a,b){return j.call(a,b)};l.noConflict=function(){a._=d;return this};l.identity=function(a){return a};l.times=function(a,b,c){for(var e=0;e<a;e++)b.call(c,e)};l.random=function(a,
b){b==null&&(b=a,a=0);return a+(0|Math.random()*(b-a+1))};var Q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};Q.unescape=l.invert(Q.escape);var P={escape:RegExp("["+l.keys(Q.escape).join("")+"]","g"),unescape:RegExp("("+l.keys(Q.unescape).join("|")+")","g")};l.each(["escape","unescape"],function(a){l[a]=function(b){if(b==null)return"";return(""+b).replace(P[a],function(b){return Q[a][b]})}});l.result=function(a,b){if(a==null)return null;var c=a[b];return l.isFunction(c)?
c.call(a):c};l.mixin=function(a){E(l.functions(a),function(b){var c=l[b]=a[b];l.prototype[b]=function(){var a=[this._wrapped];f.apply(a,arguments);a=c.apply(l,a);return this._chain?l(a).chain():a}})};var W=0;l.uniqueId=function(a){var b=W++;return a?a+b:b};l.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ea=/(.)^/,ka={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\t|\u2028|\u2029/g;l.template=
function(a,b,c){c=l.defaults({},c,l.templateSettings);var e=RegExp([(c.escape||ea).source,(c.interpolate||ea).source,(c.evaluate||ea).source].join("|")+"|$","g"),d=0,f="__p+='";a.replace(e,function(b,c,e,g,h){f+=a.slice(d,h).replace(Z,function(a){return"\\"+ka[a]});f+=c?"'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":e?"'+\n((__t=("+e+"))==null?'':__t)+\n'":g?"';\n"+g+"\n__p+='":"";d=h+b.length});f+="';\n";c.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(h){throw h.source=f,h;}if(b)return g(b,l);b=function(a){return g.call(this,a,l)};b.source="function("+(c.variable||"obj")+"){\n"+f+"}";return b};l.chain=function(a){return l(a).chain()};l.mixin(l);E(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var c=b[a];l.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);(a=="shift"||a=="splice")&&b.length===0&&delete b[0];return this._chain?l(b).chain():
b}});E(["concat","join","slice"],function(a){var c=b[a];l.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?l(a).chain():a}});l.extend(l.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);
(function(a){a.extend(a.fn,{livequery:function(d,c,b){var e=this,f;a.isFunction(d)&&(b=c,c=d,d=void 0);a.each(a.livequery.queries,function(a,h){if(e.selector==h.selector&&e.context==h.context&&d==h.type&&(!c||c.$lqguid==h.fn.$lqguid)&&(!b||b.$lqguid==h.fn2.$lqguid))return(f=h)&&!1});f=f||new a.livequery(this.selector,this.context,d,c,b);f.stopped=!1;f.run();return this},expire:function(d,c,b){var e=this;a.isFunction(d)&&(b=c,c=d,d=void 0);a.each(a.livequery.queries,function(f,g){e.selector==g.selector&&
e.context==g.context&&(!d||d==g.type)&&(!c||c.$lqguid==g.fn.$lqguid)&&(!b||b.$lqguid==g.fn2.$lqguid)&&!this.stopped&&a.livequery.stop(g.id)});return this}});a.livequery=function(d,c,b,e,f){this.selector=d;this.context=c;this.type=b;this.fn=e;this.fn2=f;this.elements=[];this.stopped=!1;this.id=a.livequery.queries.push(this)-1;e.$lqguid=e.$lqguid||a.livequery.guid++;if(f)f.$lqguid=f.$lqguid||a.livequery.guid++;return this};a.livequery.prototype={stop:function(){var a=this;this.type?this.elements.unbind(this.type,
this.fn):this.fn2&&this.elements.each(function(c,b){a.fn2.apply(b)});this.elements=[];this.stopped=!0},run:function(){if(!this.stopped){var d=this,c=this.elements,b=a(this.selector,this.context),e=b.not(c);this.elements=b;this.type?(e.bind(this.type,this.fn),c.length>0&&a.each(c,function(c,e){a.inArray(e,b)<0&&a.event.remove(e,d.type,d.fn)})):(e.each(function(){d.fn.apply(this)}),this.fn2&&c.length>0&&a.each(c,function(c,e){a.inArray(e,b)<0&&d.fn2.apply(e)}))}}};a.extend(a.livequery,{guid:0,queries:[],
queue:[],running:!1,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var d=a.livequery.queue.length;d--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=!1},play:function(){a.livequery.running=!0;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(d,c){if(a.fn[c]){var b=a.fn[c];a.fn[c]=function(){var c=b.apply(this,arguments);a.livequery.run();return c}}})},run:function(d){d!=void 0?a.inArray(d,a.livequery.queue)<
0&&a.livequery.queue.push(d):a.each(a.livequery.queries,function(c){a.inArray(c,a.livequery.queue)<0&&a.livequery.queue.push(c)});a.livequery.timeout&&clearTimeout(a.livequery.timeout);a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(d){d!=void 0?a.livequery.queries[d].stop():a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass",
"empty","remove","html");a(function(){a.livequery.play()})})(jQuery);
(function(a){a.jGrowl=function(d,c){a("#jGrowl").size()==0&&a('<div id="jGrowl"></div>').addClass(c&&c.position?c.position:a.jGrowl.defaults.position).appendTo("body");a("#jGrowl").jGrowl(d,c)};a.fn.jGrowl=function(d,c){if(a.isFunction(this.each)){var b=arguments;return this.each(function(){a(this).data("jGrowl.instance")==void 0&&(a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null})),a(this).data("jGrowl.instance").startup(this));a.isFunction(a(this).data("jGrowl.instance")[d])?
a(this).data("jGrowl.instance")[d].apply(a(this).data("jGrowl.instance"),a.makeArray(b).slice(1)):a(this).data("jGrowl.instance").create(d,c)})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3E3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},
afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(d,c){c=a.extend({},this.defaults,c);if(typeof c.speed!=="undefined")c.openDuration=c.speed,c.closeDuration=c.speed;this.notifications.push({message:d,options:c});c.log.apply(this.element,[this.element,d,c])},render:function(d){var c=this,b=d.message,e=d.options;e.themeState=e.themeState==""?"":"ui-state-"+
e.themeState;d=a('<div class="jGrowl-notification '+e.themeState+" ui-corner-all"+(e.group!=void 0&&e.group!=""?" "+e.group:"")+'"><div class="jGrowl-close">'+e.closeTemplate+'</div><div class="jGrowl-header">'+e.header+'</div><div class="jGrowl-message">'+b+"</div></div>").data("jGrowl",e).addClass(e.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.close")}).parent();a(d).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",c.element).data("jGrowl.pause",
!0)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",c.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){e.beforeOpen.apply(d,[d,b,e,c.element])!=!1&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){e.open.apply(d,[d,b,e,c.element])!=!1&&(e.glue=="after"?a("div.jGrowl-notification:last",c.element).after(d):a("div.jGrowl-notification:first",c.element).before(d),a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){a.browser.msie&&(parseInt(a(this).css("opacity"),
10)===1||parseInt(a(this).css("opacity"),10)===0)&&this.style.removeAttribute("filter");if(a(this).data("jGrowl")!=null)a(this).data("jGrowl").created=new Date;a(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(d,[d,b,e,c.element])}).bind("jGrowl.beforeClose",function(){e.beforeClose.apply(d,[d,b,e,c.element])!=!1&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",!0);a(this).animate(e.animateClose,e.closeDuration,
e.easing,function(){a.isFunction(e.close)?e.close.apply(d,[d,b,e,c.element])!==!1&&a(this).remove():a(this).remove()})}).trigger("jGrowl.beforeOpen");e.corners!=""&&a.fn.corner!=void 0&&a(d).corner(e.corners);a("div.jGrowl-notification:parent",c.element).size()>1&&a("div.jGrowl-closer",c.element).size()==0&&this.defaults.closer!=!1&&a(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(c.element).animate(this.defaults.animateOpen,
this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");a.isFunction(c.defaults.closer)&&c.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){a(this).data("jGrowl")!=void 0&&a(this).data("jGrowl").created!=void 0&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life)<(new Date).getTime()&&a(this).data("jGrowl").sticky!=
!0&&(a(this).data("jGrowl.pause")==void 0||a(this).data("jGrowl.pause")!=!0)&&a(this).trigger("jGrowl.beforeClose")});this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift());a(this.element).find("div.jGrowl-notification:parent").size()<2&&a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},
startup:function(d){this.element=a(d).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(d).data("jGrowl.instance").update()},parseInt(this.defaults.check));a.browser.msie&&parseInt(a.browser.version)<7&&!window.XMLHttpRequest&&a(this.element).addClass("ie6")},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});
a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);
(function(a){function d(){a.fn.ajaxSubmit.debug&&window.console&&window.console.log&&window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}a.fn.ajaxSubmit=function(c){function b(){function b(){if(!l++){p.detachEvent?p.detachEvent("onload",b):p.removeEventListener("load",b,!1);var c=!0;try{if(E)throw"timeout";var f,h;h=p.contentWindow?p.contentWindow.document:p.contentDocument?p.contentDocument:p.document;var j=g.dataType=="xml"||h.XMLDocument||a.isXMLDoc(h);d("isXml="+j);if(!j&&
(h.body==null||h.body.innerHTML=="")){if(--M){l=0;setTimeout(b,100);return}d("Could not access iframe DOM after 50 tries.");return}A.responseText=h.body?h.body.innerHTML:null;A.responseXML=h.XMLDocument?h.XMLDocument:h;A.getResponseHeader=function(a){return{"content-type":g.dataType}[a]};if(g.dataType=="json"||g.dataType=="script"){var o=h.getElementsByTagName("textarea")[0];if(o)A.responseText=o.value;else{var k=h.getElementsByTagName("pre")[0];if(k)A.responseText=k.innerHTML}}else if(g.dataType==
"xml"&&!A.responseXML&&A.responseText!=null)A.responseXML=e(A.responseText);f=a.httpData(A,g.dataType)}catch(t){c=!1,a.handleError(g,A,"error",t)}c&&(g.success(f,"success"),q&&a.event.trigger("ajaxSuccess",[A,g]));q&&a.event.trigger("ajaxComplete",[A,g]);q&&!--a.active&&a.event.trigger("ajaxStop");g.complete&&g.complete(A,c?"success":"error");setTimeout(function(){n.remove();A.responseXML=null},100)}}function e(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):
b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&b.documentElement.tagName!="parsererror"?b:null}var f=k[0];if(a(":input[name=submit]",f).length)alert('Error: Form elements must not be named "submit".');else{var g=a.extend({},a.ajaxSettings,c),h=a.extend(!0,{},a.extend(!0,{},a.ajaxSettings),g),j="jqFormIO"+(new Date).getTime(),n=a('<iframe id="'+j+'" name="'+j+'" src="'+g.iframeSrc+'" />'),p=n[0];n.css({position:"absolute",top:"-1000px",left:"-1000px"});var A={aborted:0,
responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;n.attr("src",g.iframeSrc)}},q=g.global;q&&!a.active++&&a.event.trigger("ajaxStart");q&&a.event.trigger("ajaxSend",[A,g]);if(h.beforeSend&&h.beforeSend(A,h)===!1)h.global&&a.active--;else if(!A.aborted){var l=0,E=0;if(h=f.clk){var D=h.name;if(D&&!h.disabled&&(c.extraData=c.extraData||{},c.extraData[D]=h.value,h.type==
"image"))c.extraData[name+".x"]=f.clk_x,c.extraData[name+".y"]=f.clk_y}setTimeout(function(){var e=k.attr("target"),d=k.attr("action");f.setAttribute("target",j);f.getAttribute("method")!="POST"&&f.setAttribute("method","POST");f.getAttribute("action")!=g.url&&f.setAttribute("action",g.url);c.skipEncodingOverride||k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});g.timeout&&setTimeout(function(){E=!0;b()},g.timeout);var h=[];try{if(c.extraData)for(var l in c.extraData)h.push(a('<input type="hidden" name="'+
l+'" value="'+c.extraData[l]+'" />').appendTo(f)[0]);n.appendTo("body");p.attachEvent?p.attachEvent("onload",b):p.addEventListener("load",b,!1);f.submit()}finally{f.setAttribute("action",d),e?f.setAttribute("target",e):k.removeAttr("target"),a(h).remove()}},10);var M=50}}}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;typeof c=="function"&&(c={success:c});var e=a.trim(this.attr("action"));e&&(e=(e.match(/^([^#]+)/)||[])[1]);e=e||window.location.href||"";
c=a.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},c||{});e={};this.trigger("form-pre-serialize",[this,c,e]);if(e.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(c.beforeSerialize&&c.beforeSerialize(this,c)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=this.formToArray(c.semantic);if(c.data)for(var g in c.extraData=c.data,c.data)if(c.data[g]instanceof
Array)for(var h in c.data[g])f.push({name:g,value:c.data[g][h]});else f.push({name:g,value:c.data[g]});if(c.beforeSubmit&&c.beforeSubmit(f,this,c)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[f,this,c,e]);if(e.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;g=a.param(f);c.type.toUpperCase()=="GET"?(c.url+=(c.url.indexOf("?")>=0?"&":"?")+g,c.data=null):c.data=g;var k=this,j=[];c.resetForm&&j.push(function(){k.resetForm()});
c.clearForm&&j.push(function(){k.clearForm()});if(!c.dataType&&c.target){var q=c.success||function(){};j.push(function(b){a(c.target).html(b).each(q,arguments)})}else c.success&&j.push(c.success);c.success=function(a,b){for(var e=0,d=j.length;e<d;e++)j[e].apply(c,[a,b,k])};g=a("input:file",this).fieldValue();h=!1;for(e=0;e<g.length;e++)g[e]&&(h=!0);g.length&&c.iframe!==!1||c.iframe||h?c.closeKeepAlive?a.get(c.closeKeepAlive,b):b():a.ajax(c);this.trigger("form-submit-notify",[this,c]);return this};
a.fn.ajaxForm=function(c){return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){a(this).ajaxSubmit(c);b.preventDefault()}).bind("click.form-plugin",function(b){var c=b.target,d=a(c);if(!d.is(":submit,input:image")){c=d.closest(":submit");if(c.length==0)return;c=c[0]}var g=this;g.clk=c;if(c.type=="image")b.offsetX!=void 0?(g.clk_x=b.offsetX,g.clk_y=b.offsetY):typeof a.fn.offset=="function"?(d=d.offset(),g.clk_x=b.pageX-d.left,g.clk_y=b.pageY-d.top):(g.clk_x=b.pageX-c.offsetLeft,g.clk_y=
b.pageY-c.offsetTop);setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(c){var b=[];if(this.length==0)return b;var e=this[0],d=c?e.getElementsByTagName("*"):e.elements;if(!d)return b;for(var g=0,h=d.length;g<h;g++){var k=d[g],j=k.name;if(j)if(c&&e.clk&&k.type=="image")!k.disabled&&e.clk==k&&(b.push({name:j,value:a(k).val()}),b.push({name:j+".x",value:e.clk_x},{name:j+".y",value:e.clk_y}));
else if((k=a.fieldValue(k,!0))&&k.constructor==Array)for(var q=0,s=k.length;q<s;q++)b.push({name:j,value:k[q]});else k!==null&&typeof k!="undefined"&&b.push({name:j,value:k})}if(!c&&e.clk&&(c=a(e.clk),d=c[0],(j=d.name)&&!d.disabled&&d.type=="image"))b.push({name:j,value:c.val()}),b.push({name:j+".x",value:e.clk_x},{name:j+".y",value:e.clk_y});return b};a.fn.formSerialize=function(c){return a.param(this.formToArray(c))};a.fn.fieldSerialize=function(c){var b=[];this.each(function(){var e=this.name;
if(e){var d=a.fieldValue(this,c);if(d&&d.constructor==Array)for(var g=0,h=d.length;g<h;g++)b.push({name:e,value:d[g]});else d!==null&&typeof d!="undefined"&&b.push({name:this.name,value:d})}});return a.param(b)};a.fn.fieldValue=function(c){for(var b=[],e=0,d=this.length;e<d;e++){var g=a.fieldValue(this[e],c);g===null||typeof g=="undefined"||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(b,g):b.push(g))}return b};a.fieldValue=function(a,b){var e=a.name,d=a.type,g=a.tagName.toLowerCase();
typeof b=="undefined"&&(b=!0);if(b&&(!e||a.disabled||d=="reset"||d=="button"||(d=="checkbox"||d=="radio")&&!a.checked||(d=="submit"||d=="image")&&a.form&&a.form.clk!=a||g=="select"&&a.selectedIndex==-1))return null;if(g=="select"){var h=a.selectedIndex;if(h<0)return null;e=[];g=a.options;var k=(d=d=="select-one")?h+1:g.length;for(h=d?h:0;h<k;h++){var j=g[h];if(j.selected){var q=j.value;q||(q=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(d)return q;e.push(q)}}return e}return a.value};
a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();if(a=="text"||a=="password"||b=="textarea")this.value="";else if(a=="checkbox"||a=="radio")this.checked=!1;else if(b=="select")this.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&
this.reset()})};a.fn.enable=function(a){a==void 0&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(c){c==void 0&&(c=!0);return this.each(function(){var b=this.type;if(b=="checkbox"||b=="radio")this.checked=c;else if(this.tagName.toLowerCase()=="option")b=a(this).parent("select"),c&&b[0]&&b[0].type=="select-one"&&b.find("option").selected(!1),this.selected=c})}})(jQuery);
$(function(){$.fn.sync_form=function(a){var d=$(this);a=a||{};d.data("updating")?d.data("dirty",(d.data("dirty")||[]).concat(a)):(d.data("updating",!0),$.ajax({type:a.type||d.attr("method"),url:a.url||d.attr("action"),data:a.data||d.serialize(),dataType:"json",global:!1,context:d,beforeSend:a.beforeSend,success:function(c){(a.success||F).apply(this,arguments);d.trigger("form_synced",[c]);d.data("dirty")&&d.data("dirty").length&&setTimeout(function(){for(var a={};$.isEmptyObject(a)&&d.data("dirty").length;a=
d.data("dirty").shift())d.sync_form(a)},100);c.url&&d.attr("action",c.url)},error:a.error,complete:function(){(a.complete||F).apply(this,arguments);d.data("updating",!1)}}))}});
(function(){function a(a,c){var b=this;a=jQuery(a);var e=jQuery(document.createElement("div")).addClass(c.baseClass).addClass(c.fixed?c.fixedClass:"").addClass(c.persistent?c.persistentClass:"").html(c.content).appendTo(a);c.hidden?e.hide():e.show();c.persistent?(a.click(function(c){c.target===a.get(0)&&(e.css("display")!=="none"?b.hide():b.show())}),jQuery(window).mousedown(function(a){e.css("display")!=="none"&&(c.focus?jQuery(a.target).parents(".tooltip").andSelf().filter(function(){return this===
e.get(0)}).length:0)===0&&b.hide()})):(a.hover(function(a){b.show(a)},function(){b.hide()}),c.fixed||a.mousemove(function(a){e.css("display")!=="none"&&b.updatePos(a)}));jQuery.extend(b,{getVersion:function(){return[1,2,0]},getParent:function(){return a},getTooltip:function(){return e},getPos:function(){return e.offset()},setPos:function(c,g){var h=a.offset();typeof c=="string"&&(c=parseInt(c)+h.left);typeof g=="string"&&(g=parseInt(g)+h.top);e.css({left:c,top:g});return b},show:function(a){c.onBeforeShow.call(b);
b.updatePos(c.fixed?null:a);switch(c.showEffect){case "fade":e.fadeIn(c.showTime);break;case "slide":e.slideDown(c.showTime,b.updatePos);break;case "custom":c.showCustom.call(e,c.showTime);break;default:case "none":e.show()}e.addClass(c.activeClass);c.onShow.call(b);return b},hide:function(){c.onBeforeHide.call(b);switch(c.hideEffect){case "fade":e.fadeOut(c.hideTime);break;case "slide":e.slideUp(c.hideTime);break;case "custom":c.hideCustom.call(e,c.hideTime);break;default:case "none":e.hide()}e.removeClass(c.activeClass);
c.onHide.call(b);return b},update:function(a){e.html(a);c.content=a;return b},load:function(a,d){c.beforeContentLoad.call(b);e.load(a,d,function(){c.onContentLoad.call(b)});return b},boundryCheck:function(a,b){var c=a+e.outerWidth(),d=b+e.outerHeight(),j=jQuery(window).width()+jQuery(window).scrollLeft(),q=jQuery(window).height()+jQuery(window).scrollTop();return[c>=j,d>=q]},updatePos:function(f){var g=e.outerWidth(),h=e.outerHeight();if(!f&&c.fixed)if(c.position.constructor==Array)j=parseInt(c.position[0]),
f=parseInt(c.position[1]);else if(jQuery(c.position).attr("nodeType")===1)f=jQuery(c.position).offset(),j=f.left,f=f.top;else{f=a.offset();j=a.outerWidth();var k=a.outerHeight();switch(c.position){case "top":var j=f.left-g/2+j/2;f=f.top-h;break;case "bottom":j=f.left-g/2+j/2;f=f.top+k;break;case "left":j=f.left-g;f=f.top-h/2+k/2;break;case "right":j=f.left+j;f=f.top-h/2+k/2;break;default:case "default":j=j/2+f.left+20,f=f.top}}else j=f.pageX,f=f.pageY;typeof c.position!="object"?(j+=c.offset[0],f+=
c.offset[1],c.boundryCheck&&(k=b.boundryCheck(j,f),k[0]&&(j=j-g/2-2*c.offset[0]),k[1]&&(f=f-h/2-2*c.offset[1]))):(typeof c.position[0]=="string"&&(j=String(j)),typeof c.position[1]=="string"&&(f=String(f)));b.setPos(j,f);return b}})}jQuery.fn.simpletip=function(d){var c=jQuery(this).eq(typeof d=="number"?d:0).data("simpletip");if(c)return c;var b={content:"A simple tooltip",persistent:!1,focus:!1,hidden:!0,position:"default",offset:[0,0],boundryCheck:!0,fixed:!0,showEffect:"fade",showTime:150,showCustom:null,
hideEffect:"fade",hideTime:150,hideCustom:null,baseClass:"tooltip",activeClass:"active",fixedClass:"fixed",persistentClass:"persistent",focusClass:"focus",onBeforeShow:function(){},onShow:function(){},onBeforeHide:function(){},onHide:function(){},beforeContentLoad:function(){},onContentLoad:function(){}};jQuery.extend(b,d);this.each(function(){var c=new a(jQuery(this),b);jQuery(this).data("simpletip",c)});return this}})();
(function(a){function d(a){a=a.replace(/left|top/g,"0px");a=a.replace(/right|bottom/g,"100%");a=a.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");a=a.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(a[1],10),a[2],parseFloat(a[3],10),a[4]]}if(!document.defaultView||!document.defaultView.getComputedStyle){var c=jQuery.curCSS;jQuery.curCSS=function(a,b,d){b==="background-position"&&(b="backgroundPosition");if(b!=="backgroundPosition"||!a.currentStyle||a.currentStyle[b])return c.apply(this,
arguments);var h=a.style;if(!d&&h&&h[b])return h[b];return c(a,"backgroundPositionX",d)+" "+c(a,"backgroundPositionY",d)}}var b=a.fn.animate;a.fn.animate=function(a){if("background-position"in a)a.backgroundPosition=a["background-position"],delete a["background-position"];if("backgroundPosition"in a)a.backgroundPosition="("+a.backgroundPosition;return b.apply(this,arguments)};a.fx.step.backgroundPosition=function(b){if(!b.bgPosReady){var c=a.curCSS(b.elem,"backgroundPosition");c||(c="0px 0px");c=
d(c);b.start=[c[0],c[2]];c=d(b.options.curAnim.backgroundPosition);b.end=[c[0],c[2]];b.unit=[c[1],c[3]];b.bgPosReady=!0}c=[];c[0]=(b.end[0]-b.start[0])*b.pos+b.start[0]+b.unit[0];c[1]=(b.end[1]-b.start[1])*b.pos+b.start[1]+b.unit[1];b.elem.style.backgroundPosition=c[0]+" "+c[1]}})(jQuery);
jQuery.effects||function(a,d){var c=a.uiBackCompat!==!1;a.effects={effect:{}};(function(b,c){function d(a,b,c){var e=t[b.type]||{};if(a==null)return c||!b.def?null:b.def;a=e.floor?~~a:parseFloat(a);if(isNaN(a))return b.def;if(e.mod)return(a+e.mod)%e.mod;return 0>a?0:e.max<a?e.max:a}function g(a){var c=s(),e=c._rgba=[];a=a.toLowerCase();n(q,function(b,d){var f,g=d.re.exec(a);f=g&&d.parse(g);g=d.space||"rgba";if(f)return f=c[g](f),c[u[g].cache]=f[u[g].cache],e=c._rgba=f._rgba,!1});if(e.length)return e.join()===
"0,0,0,0"&&b.extend(e,o.transparent),c;return o[a]}function h(a,b,c){c=(c+1)%1;if(c*6<1)return a+(b-a)*c*6;if(c*2<1)return b;if(c*3<2)return a+(b-a)*(2/3-c)*6;return a}var k="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),j=/^([\-+])=\s*(\d+\.?\d*)/,q=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],
a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],s=b.Color=function(a,c,e,d){return new b.Color.fn.parse(a,c,e,d)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},t={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},v=s.support={},B=b("<p>")[0],o,n=b.each;B.style.cssText="background-color:rgba(1,1,1,.5)";
v.rgba=B.style.backgroundColor.indexOf("rgba")>-1;n(u,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});s.fn=b.extend(s.prototype,{parse:function(h,j,k,l){if(h===c)return this._rgba=[null,null,null,null],this;if(h.jquery||h.nodeType)h=b(h).css(j),j=c;var t=this,q=b.type(h),v=this._rgba=[];j!==c&&(h=[h,j,k,l],q="array");if(q==="string")return this.parse(g(h)||o._default);if(q==="array")return n(u.rgba.props,function(a,b){v[b.idx]=d(h[b.idx],b)}),this;if(q==="object")return h instanceof
s?n(u,function(a,b){h[b.cache]&&(t[b.cache]=h[b.cache].slice())}):n(u,function(b,c){var e=c.cache;n(c.props,function(a,b){if(!t[e]&&c.to){if(a==="alpha"||h[a]==null)return;t[e]=c.to(t._rgba)}t[e][b.idx]=d(h[a],b,!0)});if(t[e]&&a.inArray(null,t[e].slice(0,3))<0&&(t[e][3]=1,c.from))t._rgba=c.from(t[e])}),this},is:function(a){var b=s(a),c=!0,e=this;n(u,function(a,d){var f,g=b[d.cache];g&&(f=e[d.cache]||d.to&&d.to(e._rgba)||[],n(d.props,function(a,b){if(g[b.idx]!=null)return c=g[b.idx]===f[b.idx]}));
return c});return c},_space:function(){var a=[],b=this;n(u,function(c,e){b[e.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=s(a),e=c._space(),g=u[e],h=this.alpha()===0?s("transparent"):this,j=h[g.cache]||g.to(h._rgba),o=j.slice();c=c[g.cache];n(g.props,function(a,e){var g=e.idx,h=j[g],k=c[g],l=t[e.type]||{};k!==null&&(h===null?o[g]=k:(l.mod&&(k-h>l.mod/2?h+=l.mod:h-k>l.mod/2&&(h-=l.mod)),o[g]=d((k-h)*b+h,e)))});return this[e](o)},blend:function(a){if(this._rgba[3]===1)return this;
var c=this._rgba.slice(),e=c.pop(),d=s(a)._rgba;return s(b.map(c,function(a,b){return(1-e)*d[b]+e*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});c[3]===1&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,b){a==null&&(a=b>2?1:0);b&&b<3&&(a=Math.round(a*100)+"%");return a});c[3]===1&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),e=c.pop();
a&&c.push(~~(e*255));return"#"+b.map(c,function(a){a=(a||0).toString(16);return a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});s.fn.parse.prototype=s.fn;u.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,e=a[2]/255;a=a[3];var d=Math.max(b,c,e),g=Math.min(b,c,e),f=d-g,h=d+g,j=h*0.5;return[Math.round(g===d?0:b===d?60*(c-e)/f+360:c===d?60*(e-b)/f+120:60*(b-c)/f+240)%360,
j===0||j===1?j:j<=0.5?f/h:f/(2-h),j,a==null?1:a]};u.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,c=a[1],e=a[2];a=a[3];c=e<=0.5?e*(1+c):e+c-e*c;e=2*e-c;return[Math.round(h(e,c,b+1/3)*255),Math.round(h(e,c,b)*255),Math.round(h(e,c,b-1/3)*255),a]};n(u,function(a,g){var h=g.props,o=g.cache,k=g.to,t=g.from;s.fn[a]=function(a){k&&!this[o]&&(this[o]=k(this._rgba));if(a===c)return this[o].slice();var g,j=b.type(a),p=j==="array"||j==="object"?a:arguments,
q=this[o].slice();n(h,function(a,b){var c=p[j==="object"?a:b.idx];c==null&&(c=q[b.idx]);q[b.idx]=d(c,b)});return t?(g=s(t(q)),g[o]=q,g):s(q)};n(h,function(c,e){s.fn[c]||(s.fn[c]=function(d){var g=b.type(d),f=c==="alpha"?this._hsla?"hsla":"rgba":a,h=this[f](),o=h[e.idx];if(g==="undefined")return o;g==="function"&&(d=d.call(this,o),g=b.type(d));if(d==null&&e.empty)return this;g==="string"&&(g=j.exec(d))&&(d=o+parseFloat(g[2])*(g[1]==="+"?1:-1));h[e.idx]=d;return this[f](h)})})});n(k,function(a,c){b.cssHooks[c]=
{set:function(a,e){var d,f="";if(b.type(e)!=="string"||(d=g(e))){e=s(d||e);if(!v.rgba&&e._rgba[3]!==1){for(d=c==="backgroundColor"?a.parentNode:a;(f===""||f==="transparent")&&d&&d.style;)try{f=b.css(d,"backgroundColor"),d=d.parentNode}catch(h){}e=e.blend(f&&f!=="transparent"?f:"_default")}e=e.toRgbaString()}try{a.style[c]=e}catch(j){}}};b.fx.step[c]=function(a){if(!a.colorInit)a.start=s(a.elem,c),a.end=s(a.end),a.colorInit=!0;b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}});b.cssHooks.borderColor=
{expand:function(a){var b={};n(["Top","Right","Bottom","Left"],function(c,e){b["border"+e+"Color"]=a});return b}};o=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function b(){var b=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},e,d;if(b&&b.length&&b[0]&&b[b[0]])for(d=b.length;d--;)e=b[d],typeof b[e]==="string"&&(c[a.camelCase(e)]=b[e]);else for(e in b)typeof b[e]==="string"&&(c[e]=b[e]);return c}var c=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=
function(a){if(a.end!=="none"&&!a.setAttr||a.pos===1&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});a.effects.animateClass=function(d,h,k,j){var q=a.speed(h,k,j);return this.queue(function(){var h=a(this),j=h.attr("class")||"",k,v=q.children?h.find("*").andSelf():h;v=v.map(function(){return{el:a(this),start:b.call(this)}});k=function(){a.each(c,function(a,b){if(d[b])h[b+"Class"](d[b])})};k();v=v.map(function(){this.end=b.call(this.el[0]);var c=this.start,e=this.end,d={},g,h;for(g in e)if(h=
e[g],c[g]!==h&&!f[g]&&(a.fx.step[g]||!isNaN(parseFloat(h))))d[g]=h;this.diff=d;return this});h.attr("class",j);v=v.map(function(){var b=this,c=a.Deferred();this.el.animate(this.diff,jQuery.extend({},q,{queue:!1,complete:function(){c.resolve(b)}}));return c.promise()});a.when.apply(a,v.get()).done(function(){k();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});q.complete.call(h[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,e,d){return c?a.effects.animateClass.call(this,
{add:b},c,e,d):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,e,d){return c?a.effects.animateClass.call(this,{remove:b},c,e,d):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(b,c,e,f,q){return typeof c==="boolean"||c===d?e?a.effects.animateClass.call(this,c?{add:b}:{remove:b},e,f,q):this._toggleClass(b,c):a.effects.animateClass.call(this,{toggle:b},c,e,f)},switchClass:function(b,c,e,d,f){return a.effects.animateClass.call(this,{add:c,remove:b},e,
d,f)}})})();(function(){function b(b,c,e,k){if(a.isPlainObject(b))c=b,b=b.effect;b={effect:b};c===d&&(c={});a.isFunction(c)&&(k=c,e=null,c={});if(typeof c==="number"||a.fx.speeds[c])k=e,e=c,c={};a.isFunction(e)&&(k=e,e=null);c&&a.extend(b,c);e=e||c.duration;b.duration=a.fx.off?0:typeof e==="number"?e:e in a.fx.speeds?a.fx.speeds[e]:a.fx.speeds._default;b.complete=k||c.complete;return b}function e(b){if(!b||typeof b==="number"||a.fx.speeds[b])return!0;if(typeof b==="string"&&!a.effects.effect[b]){if(c&&
a.effects[b])return!1;return!0}return!1}a.extend(a.effects,{version:"@VERSION",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var c,e;for(e=0;e<b.length;e++)b[e]!==null&&(c=a.data("ui-effects-"+b[e]),c===d&&(c=""),a.css(b[e],c))},setMode:function(a,b){b==="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,e;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;
break;default:c=a[0]/b.height}switch(a[1]){case "left":e=0;break;case "center":e=0.5;break;case "right":e=1;break;default:e=a[1]/b.width}return{x:e,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},e=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),d={width:b.width(),height:b.height()},j=document.activeElement;
b.wrap(e);(b[0]===j||a.contains(b[0],j))&&a(j).focus();e=b.parent();b.css("position")==="static"?(e.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,e){c[e]=b.css(e);isNaN(parseInt(c[e],10))&&(c[e]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(d);return e.css(c).show()},removeWrapper:function(b){var c=document.activeElement;b.parent().is(".ui-effects-wrapper")&&
(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());return b},setTransition:function(b,c,e,d){d=d||{};a.each(c,function(a,c){var g=b.cssUnit(c);g[0]>0&&(d[c]=g[0]*e+g[1])});return d}});a.fn.extend({effect:function(){function e(b){function c(){a.isFunction(h)&&h.call(f[0]);a.isFunction(b)&&b()}var f=a(this),h=d.complete,k=d.mode;(f.is(":hidden")?k==="hide":k==="show")?c():j.call(f[0],d,c)}var d=b.apply(this,arguments),h=d.mode,k=d.queue,j=a.effects.effect[d.effect],q=!j&&c&&a.effects[d.effect];
if(a.fx.off||!j&&!q)return h?this[h](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)});return j?k===!1?this.each(e):this.queue(k||"fx",e):q.call(this,{options:d,duration:d.duration,callback:d.complete,mode:d.mode})},_show:a.fn.show,show:function(a){if(e(a))return this._show.apply(this,arguments);else{var c=b.apply(this,arguments);c.mode="show";return this.effect.call(this,c)}},_hide:a.fn.hide,hide:function(a){if(e(a))return this._hide.apply(this,arguments);else{var c=
b.apply(this,arguments);c.mode="hide";return this.effect.call(this,c)}},__toggle:a.fn.toggle,toggle:function(c){if(e(c)||typeof c==="boolean"||a.isFunction(c))return this.__toggle.apply(this,arguments);else{var d=b.apply(this,arguments);d.mode="toggle";return this.effect.call(this,d)}},cssUnit:function(b){var c=this.css(b),e=[];a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(e=[parseFloat(c),b])});return e}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,
c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-
c(1-a)};a.easing["easeInOut"+b]=function(a){return a<0.5?c(a*2)/2:1-c(a*-2+2)/2}})})()}(jQuery);
(function(a,d){function c(c,e){var d,f;d=c.nodeName.toLowerCase();if("area"===d){d=c.parentNode;f=d.name;if(!c.href||!f||d.nodeName.toLowerCase()!=="map")return!1;d=a("img[usemap=#"+f+"]")[0];return!!d&&b(d)}return(/input|select|textarea|button|object/.test(d)?!c.disabled:"a"===d?c.href||e:e)&&b(c)}function b(b){return!a(b).parents().andSelf().filter(function(){return a.css(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,
{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var e=this;setTimeout(function(){a(e).focus();c&&c.call(e)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;
b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(b){if(b!==d)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if(c==="absolute"||c==="relative"||c==="fixed")if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&c!==0)return c;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++e})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width",
"Height"],function(b,c){function e(b,c,d,g){a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0;d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var f=c==="Width"?["Left","Right"]:["Top","Bottom"],q=c.toLowerCase(),s={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){if(b===d)return s["inner"+c].call(this);return this.each(function(){a(this).css(q,
e(this,b)+"px")})};a.fn["outer"+c]=function(b,d){if(typeof b!=="number")return s["outer"+c].call(this,b);return this.each(function(){a(this).css(q,e(this,b,!0,d)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,e){return!!a.data(b,e[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var e=a.attr(b,"tabindex"),d=isNaN(e);return(d||e>=0)&&c(b,!d)}}),a(function(){var b=
document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=c.offsetHeight===100;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,
{plugin:{add:function(b,c,e){var d;b=a.ui[b].prototype;for(d in e)b.plugins[d]=b.plugins[d]||[],b.plugins[d].push([c,e[d]])},call:function(a,b,c){var e=a.plugins[b];if(e&&a.element[0].parentNode&&a.element[0].parentNode.nodeType!==11)for(b=0;b<e.length;b++)a.options[e[b][0]]&&e[b][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var e=c&&c==="left"?"scrollLeft":"scrollTop",d=!1;if(b[e]>0)return!0;b[e]=1;d=b[e]>0;b[e]=0;return d},isOverAxis:function(a,
b,c){return a>b&&a<b+c},isOver:function(b,c,e,d,f,s){return a.ui.isOverAxis(b,e,f)&&a.ui.isOverAxis(c,d,s)}}))})(jQuery);
(function(a,d){var c=0,b=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;(d=b[c])!=null;c++)try{a(d).triggerHandler("remove")}catch(k){}e(b)};a.widget=function(b,c,e){var d,j,q,s,u=b.split(".")[0];b=b.split(".")[1];d=u+"-"+b;if(!e)e=c,c=a.Widget;a.expr[":"][d.toLowerCase()]=function(b){return!!a.data(b,d)};a[u]=a[u]||{};j=a[u][b];q=a[u][b]=function(a,b){if(!this._createWidget)return new q(a,b);arguments.length&&this._createWidget(a,b)};a.extend(q,j,{version:e.version,_proto:a.extend({},
e),_childConstructors:[]});s=new c;s.options=a.widget.extend({},s.options);a.each(e,function(b,d){a.isFunction(d)&&(e[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,f;this._super=a;this._superApply=e;f=d.apply(this,arguments);this._super=b;this._superApply=c;return f}}())});q.prototype=a.widget.extend(s,{widgetEventPrefix:b},e,{constructor:q,namespace:u,widgetName:b,
widgetBaseClass:d,widgetFullName:d});j?(a.each(j._childConstructors,function(b,c){var e=c.prototype;a.widget(e.namespace+"."+e.widgetName,q,c._proto)}),delete j._childConstructors):c._childConstructors.push(q);a.widget.bridge(b,q)};a.widget.extend=function(c){for(var e=b.call(arguments,1),h=0,k=e.length,j,q;h<k;h++)for(j in e[h])q=e[h][j],e[h].hasOwnProperty(j)&&q!==d&&(c[j]=a.isPlainObject(q)?a.widget.extend({},c[j],q):q);return c};a.widget.bridge=function(c,e){var h=e.prototype.widgetFullName;a.fn[c]=
function(k){var j=typeof k==="string",q=b.call(arguments,1),s=this;k=!j&&q.length?a.widget.extend.apply(null,[k].concat(q)):k;j?this.each(function(){var b,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+k+"'");if(!a.isFunction(e[k])||k.charAt(0)==="_")return a.error("no such method '"+k+"' for "+c+" widget instance");b=e[k].apply(e,q);if(b!==e&&b!==d)return s=b&&b.jquery?s.pushStack(b.get()):b,!1}):this.each(function(){var b=
a.data(this,h);b?b.option(k||{})._init():new e(k,this)});return s}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=
a();if(e!==this)a.data(e,this.widgetName,this),a.data(e,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));
this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var e=b,k,j,q;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof b==="string")if(e={},k=b.split("."),b=k.shift(),k.length){j=e[b]=a.widget.extend({},
this.options[b]);for(q=0;q<k.length-1;q++)j[k[q]]=j[k[q]]||{},j=j[k[q]];b=k.pop();if(c===d)return j[b]===d?null:j[b];j[b]=c}else{if(c===d)return this.options[b]===d?null:this.options[b];e[b]=c}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){this.options[a]=b;a==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),
this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c){c?(b=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element);var e=this;a.each(c,function(c,d){function g(){if(!(e.options.disabled===!0||a(this).hasClass("ui-state-disabled")))return(typeof d==="string"?e[d]:d).apply(e,arguments)}if(typeof d!=="string")g.guid=d.guid=d.guid||g.guid||a.guid++;var s=c.match(/^(\w+)\s*(.*)$/),
u=s[1]+e.eventNamespace;(s=s[2])?e.widget().delegate(s,u,g):b.bind(u,g)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return(typeof a==="string"?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},
_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,e){var d,j=this.options[b];e=e||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(d in b)d in c||(c[d]=b[d]);this.element.trigger(c,e);return!(a.isFunction(j)&&j.apply(this.element[0],
[c].concat(e))===!1||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(e,d,j){typeof d==="string"&&(d={effect:d});var q,s=!d?b:d===!0||typeof d==="number"?c:d.effect||c;d=d||{};typeof d==="number"&&(d={duration:d});q=!a.isEmptyObject(d);d.complete=j;d.delay&&e.delay(d.delay);if(q&&a.effects&&(a.effects.effect[s]||a.uiBackCompat!==!1&&a.effects[s]))e[b](d);else if(s!==b&&e[s])e[s](d.duration,d.easing,j);else e.queue(function(c){a(this)[b]();
j&&j.call(e[0]);c()})}});if(a.uiBackCompat!==!1)a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]}})(jQuery);
(function(a){var d=!1;a(document).mouseup(function(){d=!1});a.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(b){if(!0===a.data(b.target,c.widgetName+".preventClickEvent"))return a.removeData(b.target,c.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var b=this,e=c.which===1,f=typeof this.options.cancel==="string"&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(c))return!0;this.mouseDelayMet=
!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted))return c.preventDefault(),!0;!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return b._mouseMove(a)};this._mouseUpDelegate=function(a){return b._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=!0}},_mouseMove:function(c){if(a.browser.msie&&!(document.documentMode>=9)&&!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1)?this._mouseDrag(c):this._mouseUp(c);return!this._mouseStarted},
_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c);return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},
_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){a.widget("ui.sortable",a.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(d,c){d==="disabled"?(this.options[d]=
c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(d,c){var b=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(d);var e=null;a(d.target).parents().each(function(){if(a.data(this,b.widgetName+"-item")==b)return e=a(this),!1});a.data(d.target,b.widgetName+"-item")==b&&(e=a(d.target));if(!e)return!1;if(this.options.handle&&!c){var f=!1;a(this.options.handle,
e).find("*").andSelf().each(function(){this==d.target&&(f=!0)});if(!f)return!1}this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(d,c,b){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(d);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,
{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();
this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor){if(a("body").css("cursor"))this._storedCursor=a("body").css("cursor");a("body").css("cursor",c.cursor)}if(c.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",c.opacity)}if(c.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",c.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML")this.overflowOffset=
this.scrollParent.offset();this._trigger("start",d,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!b)for(b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("activate",d,this._uiHash(this));if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(d);return!0},_mouseDrag:function(d){this.position=this._generatePosition(d);
this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){var c=this.options,b=!1;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-d.pageY<c.scrollSensitivity)this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop+c.scrollSpeed;else if(d.pageY-this.overflowOffset.top<c.scrollSensitivity)this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop-
c.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-d.pageX<c.scrollSensitivity)this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft+c.scrollSpeed;else if(d.pageX-this.overflowOffset.left<c.scrollSensitivity)this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft-c.scrollSpeed}else d.pageY-a(document).scrollTop()<c.scrollSensitivity?b=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(d.pageY-a(document).scrollTop())<c.scrollSensitivity&&
(b=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),d.pageX-a(document).scrollLeft()<c.scrollSensitivity?b=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(d.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(b=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed));b!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=
this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;c>=0;c--){b=this.items[c];var e=b.item[0],f=this._intersectsWithPointer(b);if(f&&b.instance===this.currentContainer&&e!=this.currentItem[0]&&this.placeholder[f==1?"next":"prev"]()[0]!=e&&!a.contains(this.placeholder[0],e)&&(this.options.type=="semi-dynamic"?!a.contains(this.element[0],e):1)){this.direction=f==1?"down":"up";if(this.options.tolerance=="pointer"||
this._intersectsWithSides(b))this._rearrange(d,b);else break;this._trigger("change",d,this._uiHash());break}}this._contactContainers(d);a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);this._trigger("sort",d,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(d,c){if(d){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,d);if(this.options.revert){var b=this,e=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:e.left-this.offset.parent.left-
this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(d)})}else this._clear(d,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var d=this.containers.length-1;d>=0;d--)if(this.containers[d]._trigger("deactivate",null,this._uiHash(this)),this.containers[d].containerCache.over)this.containers[d]._trigger("out",null,this._uiHash(this)),this.containers[d].containerCache.over=0}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,
_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(d){var c=this._getItemsAsjQuery(d&&d.connected),b=[];d=d||{};a(c).each(function(){var c=(a(d.item||this).attr(d.attribute||"id")||"").match(d.expression||/(.+)[-=_](.+)/);c&&b.push((d.key||c[1]+"[]")+"="+(d.key&&d.expression?c[1]:c[2]))});!b.length&&d.key&&b.push(d.key+"=");return b.join("&")},toArray:function(d){var c=this._getItemsAsjQuery(d&&
d.connected),b=[];d=d||{};c.each(function(){b.push(a(d.item||this).attr(d.attribute||"id")||"")});return b},_intersectsWith:function(a){var c=this.positionAbs.left,b=c+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,g=a.left,h=g+a.width,k=a.top,j=k+a.height,q=this.offset.click.top,s=this.offset.click.left;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":
"height"]>a[this.floating?"width":"height"]?e+q>k&&e+q<j&&c+s>g&&c+s<h:g<c+this.helperProportions.width/2&&b-this.helperProportions.width/2<h&&k<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<j},_intersectsWithPointer:function(d){var c=this.options.axis==="x"||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height);d=this.options.axis==="y"||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width);c=c&&d;d=this._getDragVerticalDirection();
var b=this._getDragHorizontalDirection();if(!c)return!1;return this.floating?b&&b=="right"||d=="down"?2:1:d&&(d=="down"?2:1)},_intersectsWithSides:function(d){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height);d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width);var b=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?e=="right"&&d||e=="left"&&!d:b&&(b=="down"&&c||b=="up"&&!c)},
_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(d){var c=[],b=[],e=this._connectWith();
if(e&&d)for(d=e.length-1;d>=0;d--)for(var f=a(e[d]),g=f.length-1;g>=0;g--){var h=a.data(f[g],this.widgetName);h&&h!=this&&!h.options.disabled&&b.push([a.isFunction(h.options.items)?h.options.items.call(h.element):a(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}b.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(d=b.length-1;d>=0;d--)b[d][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),c=0;c<this.items.length;c++)for(var b=0;b<a.length;b++)a[b]==this.items[c].item[0]&&this.items.splice(c,1)},_refreshItems:function(d){this.items=[];this.containers=[this];var c=this.items,b=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):a(this.options.items,
this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var k=a.data(g[h],this.widgetName);k&&k!=this&&!k.options.disabled&&(b.push([a.isFunction(k.options.items)?k.options.items.call(k.element[0],d,{item:this.currentItem}):a(k.options.items,k.element),k]),this.containers.push(k))}for(f=b.length-1;f>=0;f--){d=b[f][1];e=b[f][0];h=0;for(g=e.length;h<g;h++)k=a(e[h]),k.data(this.widgetName+"-item",d),c.push({item:k,instance:d,
width:0,height:0,left:0,top:0})}},refreshPositions:function(d){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();for(var c=this.items.length-1;c>=0;c--){var b=this.items[c];if(!(b.instance!=this.currentContainer&&this.currentContainer&&b.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?a(this.options.toleranceElement,b.item):b.item;if(!d)b.width=e.outerWidth(),b.height=e.outerHeight();e=e.offset();b.left=e.left;b.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(c=this.containers.length-1;c>=0;c--)e=this.containers[c].element.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(d){d=d||this;var c=d.options;if(!c.placeholder||c.placeholder.constructor==String){var b=c.placeholder;c.placeholder={element:function(){var c=
a(document.createElement(d.currentItem[0].nodeName)).addClass(b||d.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!b)c.style.visibility="hidden";return c},update:function(a,f){if(!b||c.forcePlaceholderSize)f.height()||f.height(d.currentItem.innerHeight()-parseInt(d.currentItem.css("paddingTop")||0,10)-parseInt(d.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(d.currentItem.innerWidth()-parseInt(d.currentItem.css("paddingLeft")||0,10)-parseInt(d.currentItem.css("paddingRight")||
0,10))}}}d.placeholder=a(c.placeholder.element.call(d.element,d.currentItem));d.currentItem.after(d.placeholder);c.placeholder.update(d,d.placeholder)},_contactContainers:function(d){for(var c=null,b=null,e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!c||!a.contains(this.containers[e].element[0],c.element[0]))c=this.containers[e],b=e}else if(this.containers[e].containerCache.over)this.containers[e]._trigger("out",
d,this._uiHash(this)),this.containers[e].containerCache.over=0;if(c)if(this.containers.length===1)this.containers[b]._trigger("over",d,this._uiHash(this)),this.containers[b].containerCache.over=1;else if(this.currentContainer!=this.containers[b]){c=1E4;e=null;for(var f=this.positionAbs[this.containers[b].floating?"left":"top"],g=this.items.length-1;g>=0;g--)if(a.contains(this.containers[b].element[0],this.items[g].item[0])){var h=this.containers[b].floating?this.items[g].item.offset().left:this.items[g].item.offset().top;
if(Math.abs(h-f)<c)c=Math.abs(h-f),e=this.items[g],this.direction=h-f>0?"down":"up"}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[b],e?this._rearrange(d,e,null,!0):this._rearrange(d,null,this.containers[b].element,!0),this._trigger("change",d,this._uiHash()),this.containers[b]._trigger("change",d,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[b]._trigger("over",d,this._uiHash(this)),this.containers[b].containerCache.over=
1}},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),
left:this.currentItem.css("left")};(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width());(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height());return d},_adjustOffsetFromHelper:function(d){typeof d=="string"&&(d=d.split(" "));a.isArray(d)&&(d={left:+d[0],top:+d[1]||0});if("left"in d)this.offset.click.left=d.left+this.margins.left;if("right"in d)this.offset.click.left=this.helperProportions.width-d.right+this.margins.left;if("top"in d)this.offset.click.top=
d.top+this.margins.top;if("bottom"in d)this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==
"html"&&a.browser.msie)d={top:0,left:0};return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins=
{left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var d=this.options;if(d.containment=="parent")d.containment=this.helper[0].parentNode;if(d.containment=="document"||d.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-
this.offset.parent.top,a(d.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(d.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(d.containment)){var c=a(d.containment)[0];d=a(d.containment).offset();var b=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),
10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top]}},_convertPositionTo:function(d,c){if(!c)c=this.position;var b=d=="absolute"?1:-1,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*b,left:c.left+this.offset.relative.left*b+this.offset.parent.left*
b-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*b}},_generatePosition:function(d){var c=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();var f=d.pageX,g=
d.pageY;this.originalPosition&&(this.containment&&(d.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),d.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),d.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),d.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid&&(g=this.originalPageY+Math.round((g-this.originalPageY)/
c.grid[1])*c.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-c.grid[1]:g+c.grid[1]:g,f=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-c.grid[0]:f+c.grid[0]:f));return{top:g-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:b.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:b.scrollLeft())}},_rearrange:function(a,c,b,e){b?b[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?c.item[0]:c.item[0].nextSibling);var f=this.counter=this.counter?++this.counter:
1;this._delay(function(){f==this.counter&&this.refreshPositions(!e)})},_clear:function(d,c){this.reverting=!1;var b=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if(this._storedCSS[e]=="auto"||this._storedCSS[e]=="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!c&&b.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&b.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!c&&(b.push(function(a){this._trigger("remove",a,this._uiHash())}),b.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
b.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;e>=0;e--)if(c||b.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over)b.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0;this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",d,this._uiHash());for(e=0;e<b.length;e++)b[e].call(this,d);this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1}c||this._trigger("beforeStop",d,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=
this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(e=0;e<b.length;e++)b[e].call(this,d);this._trigger("stop",d,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}})})(jQuery);
var swfobject=function(){function a(){if(!Z){try{var a=D.getElementsByTagName("body")[0].appendChild(D.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}Z=!0;a=K.length;for(var c=0;c<a;c++)K[c]()}}function d(a){Z?a():K[K.length]=a}function c(a){if(typeof E.addEventListener!=p)E.addEventListener("load",a,!1);else if(typeof D.addEventListener!=p)D.addEventListener("load",a,!1);else if(typeof E.attachEvent!=p)t(E,"onload",a);else if(typeof E.onload=="function"){var b=E.onload;E.onload=
function(){b();a()}}else E.onload=a}function b(){var a=D.getElementsByTagName("body")[0],b=D.createElement(A);b.setAttribute("type",z);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=p){var f=c.GetVariable("$version");if(f)f=f.split(" ")[1].split(","),G.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}else if(d<10){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}function e(){var a=H.length;if(a>0)for(var b=0;b<a;b++){var c=H[b].id,
e=H[b].callbackFn,d={success:!1,id:c};if(G.pv[0]>0){var j=u(c);if(j)if(v(H[b].swfVersion)&&!(G.wk&&G.wk<312)){if(o(c,!0),e)d.success=!0,d.ref=f(c),e(d)}else if(H[b].expressInstall&&g()){d={};d.data=H[b].expressInstall;d.width=j.getAttribute("width")||"0";d.height=j.getAttribute("height")||"0";if(j.getAttribute("class"))d.styleclass=j.getAttribute("class");if(j.getAttribute("align"))d.align=j.getAttribute("align");var n={};j=j.getElementsByTagName("param");for(var l=j.length,q=0;q<l;q++)j[q].getAttribute("name").toLowerCase()!=
"movie"&&(n[j[q].getAttribute("name")]=j[q].getAttribute("value"));h(d,n,c,e)}else k(j),e&&e(d)}else if(o(c,!0),e){if((c=f(c))&&typeof c.SetVariable!=p)d.success=!0,d.ref=c;e(d)}}}function f(a){var b=null;if((a=u(a))&&a.nodeName=="OBJECT")typeof a.SetVariable!=p?b=a:(a=a.getElementsByTagName(A)[0])&&(b=a);return b}function g(){return!ha&&v("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function h(a,b,c,e){ha=!0;ea=e||null;ka={success:!1,id:c};var d=u(c);if(d){d.nodeName=="OBJECT"?(P=j(d),W=null):(P=
d,W=c);a.id=l;if(typeof a.width==p||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==p||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";D.title=D.title.slice(0,47)+" - Flash Player Installation";e=G.ie&&G.win?"ActiveX":"PlugIn";e="MMredirectURL="+E.location.toString().replace(/&/g,"%26")+"&MMplayerType="+e+"&MMdoctitle="+D.title;typeof b.flashvars!=p?b.flashvars+="&"+e:b.flashvars=e;if(G.ie&&G.win&&d.readyState!=4)e=D.createElement("div"),c+="SWFObjectNew",
e.setAttribute("id",c),d.parentNode.insertBefore(e,d),d.style.display="none",function(){d.readyState==4?d.parentNode.removeChild(d):setTimeout(arguments.callee,10)}();q(a,b,c)}}function k(a){if(G.ie&&G.win&&a.readyState!=4){var b=D.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(j(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(j(a),a)}function j(a){var b=D.createElement("div");
if(G.win&&G.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(A)[0])if(a=a.childNodes)for(var c=a.length,e=0;e<c;e++)!(a[e].nodeType==1&&a[e].nodeName=="PARAM")&&a[e].nodeType!=8&&b.appendChild(a[e].cloneNode(!0));return b}function q(a,b,c){var e,d=u(c);if(G.wk&&G.wk<312)return e;if(d){if(typeof a.id==p)a.id=c;if(G.ie&&G.win){var f="",g;for(g in a)if(a[g]!=Object.prototype[g])g.toLowerCase()=="data"?b.movie=a[g]:g.toLowerCase()=="styleclass"?f+=' class="'+a[g]+'"':g.toLowerCase()!="classid"&&
(f+=" "+g+'="'+a[g]+'"');g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');d.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";V[V.length]=a.id;e=u(a.id)}else{h=D.createElement(A);h.setAttribute("type",z);for(var j in a)a[j]!=Object.prototype[j]&&(j.toLowerCase()=="styleclass"?h.setAttribute("class",a[j]):j.toLowerCase()!="classid"&&h.setAttribute(j,a[j]));for(f in b)b[f]!=Object.prototype[f]&&f.toLowerCase()!=
"movie"&&(a=h,g=f,j=b[f],c=D.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",j),a.appendChild(c));d.parentNode.replaceChild(h,d);e=h}}return e}function s(a){var b=u(a);if(b&&b.nodeName=="OBJECT")G.ie&&G.win?(b.style.display="none",function(){if(b.readyState==4){var c=u(a);if(c){for(var e in c)typeof c[e]=="function"&&(c[e]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function u(a){var b=null;try{b=D.getElementById(a)}catch(c){}return b}
function t(a,b,c){a.attachEvent(b,c);Q[Q.length]=[a,b,c]}function v(a){var b=G.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function B(a,b,c,e){if(!G.ie||!G.mac){var d=D.getElementsByTagName("head")[0];if(d){c=c&&typeof c=="string"?c:"screen";e&&(la=T=null);if(!T||la!=c)e=D.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("media",c),T=d.appendChild(e),
G.ie&&G.win&&typeof D.styleSheets!=p&&D.styleSheets.length>0&&(T=D.styleSheets[D.styleSheets.length-1]),la=c;G.ie&&G.win?T&&typeof T.addRule==A&&T.addRule(a,b):T&&typeof D.createTextNode!=p&&T.appendChild(D.createTextNode(a+" {"+b+"}"))}}}function o(a,b){if(ja){var c=b?"visible":"hidden";Z&&u(a)?u(a).style.visibility=c:B("#"+a,"visibility:"+c)}}function n(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=p?encodeURIComponent(a):a}var p="undefined",A="object",z="application/x-shockwave-flash",
l="SWFObjectExprInst",E=window,D=document,M=navigator,J=!1,K=[function(){J?b():e()}],H=[],V=[],Q=[],P,W,ea,ka,Z=!1,ha=!1,T,la,ja=!0,G=function(){var a=typeof D.getElementById!=p&&typeof D.getElementsByTagName!=p&&typeof D.createElement!=p,b=M.userAgent.toLowerCase(),c=M.platform.toLowerCase(),e=c?/win/.test(c):/win/.test(b);c=c?/mac/.test(c):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var d=!1,f=[0,0,0],g=null;if(typeof M.plugins!=p&&typeof M.plugins["Shockwave Flash"]==
A){if((g=M.plugins["Shockwave Flash"].description)&&!(typeof M.mimeTypes!=p&&M.mimeTypes[z]&&!M.mimeTypes[z].enabledPlugin))J=!0,d=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof E.ActiveXObject!=p)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(g=h.GetVariable("$version")))d=!0,g=g.split(" ")[1].split(","),
f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(j){}return{w3:a,pv:f,wk:b,ie:d,win:e,mac:c}}();(function(){G.w3&&((typeof D.readyState!=p&&D.readyState=="complete"||typeof D.readyState==p&&(D.getElementsByTagName("body")[0]||D.body))&&a(),Z||(typeof D.addEventListener!=p&&D.addEventListener("DOMContentLoaded",a,!1),G.ie&&G.win&&(D.attachEvent("onreadystatechange",function(){D.readyState=="complete"&&(D.detachEvent("onreadystatechange",arguments.callee),a())}),E==top&&function(){if(!Z){try{D.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}a()}}()),G.wk&&function(){Z||(/loaded|complete/.test(D.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;b<a;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);a=V.length;for(b=0;b<a;b++)s(V[b]);for(var c in G)G[c]=null;G=null;for(var e in swfobject)swfobject[e]=null;swfobject=null})})();return{registerObject:function(a,b,c,e){if(G.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=c;d.callbackFn=
e;H[H.length]=d;o(a,!1)}else e&&e({success:!1,id:a})},getObjectById:function(a){if(G.w3)return f(a)},embedSWF:function(a,b,c,e,f,j,k,n,l,t){var s={success:!1,id:b};G.w3&&!(G.wk&&G.wk<312)&&a&&b&&c&&e&&f?(o(b,!1),d(function(){c+="";e+="";var d={};if(l&&typeof l===A)for(var u in l)d[u]=l[u];d.data=a;d.width=c;d.height=e;u={};if(n&&typeof n===A)for(var J in n)u[J]=n[J];if(k&&typeof k===A)for(var H in k)typeof u.flashvars!=p?u.flashvars+="&"+H+"="+k[H]:u.flashvars=H+"="+k[H];if(v(f))J=q(d,u,b),d.id==
b&&o(b,!0),s.success=!0,s.ref=J;else if(j&&g()){d.data=j;h(d,u,b,t);return}else o(b,!0);t&&t(s)})):t&&t(s)},switchOffAutoHideShow:function(){ja=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(a,b,c){if(G.w3)return q(a,b,c)},showExpressInstall:function(a,b,c,e){G.w3&&g()&&h(a,b,c,e)},removeSWF:function(a){G.w3&&s(a)},createCSS:function(a,b,c,e){G.w3&&B(a,b,c,e)},addDomLoadEvent:d,addLoadEvent:c,getQueryParamValue:function(a){var b=
D.location.search||D.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return n(b);b=b.split("&");for(var c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return n(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ha){var a=u(l);if(a&&P){a.parentNode.replaceChild(P,a);if(W&&(o(W,!0),G.ie&&G.win))P.style.display="block";ea&&ea(ka)}ha=!1}}}}();
Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan",
"Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,
feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,
today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},
{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};
(function(){var a=Date,d=a.prototype,c=a.CultureInfo,b=function(a,b){b||(b=2);return("000"+a).slice(b*-1)};d.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};d.setTimeToNow=function(){var a=new Date;this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};a.today=function(){return(new Date).clearTime()};a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw Error(a+
" - "+b);else if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;else throw new TypeError(a+" - "+b);};a.equals=function(a,b){return a.compareTo(b)===0};a.getDayNumberFromName=function(a){var b=c.dayNames,e=c.abbreviatedDayNames,d=c.shortestDayNames;a=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==a||e[f].toLowerCase()==a||d[f].toLowerCase()==a)return f;return-1};a.getMonthNumberFromName=function(a){var b=c.monthNames,e=c.abbreviatedMonthNames;a=a.toLowerCase();for(var d=
0;d<b.length;d++)if(b[d].toLowerCase()==a||e[d].toLowerCase()==a)return d;return-1};a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0};a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]};a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null};a.getTimezoneOffset=function(a){for(var b=c.timezones,e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null};
d.clone=function(){return new Date(this.getTime())};d.compareTo=function(a){return Date.compare(this,a)};d.equals=function(a){return Date.equals(this,a||new Date)};d.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};d.isAfter=function(a){return this.compareTo(a||new Date)===1};d.isBefore=function(a){return this.compareTo(a||new Date)===-1};d.isToday=function(){return this.isSameDay(new Date)};d.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())};
d.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};d.addSeconds=function(a){return this.addMilliseconds(a*1E3)};d.addMinutes=function(a){return this.addMilliseconds(a*6E4)};d.addHours=function(a){return this.addMilliseconds(a*36E5)};d.addDays=function(a){this.setDate(this.getDate()+a);return this};d.addWeeks=function(a){return this.addDays(a*7)};d.addMonths=function(b){var c=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(c,
a.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};d.addYears=function(a){return this.addMonths(a*12)};d.add=function(a){if(typeof a=="number")return this._orient=a,this;a.milliseconds&&this.addMilliseconds(a.milliseconds);a.seconds&&this.addSeconds(a.seconds);a.minutes&&this.addMinutes(a.minutes);a.hours&&this.addHours(a.hours);a.weeks&&this.addWeeks(a.weeks);a.months&&this.addMonths(a.months);a.years&&this.addYears(a.years);a.days&&this.addDays(a.days);return this};var e,f,g;d.getWeek=
function(){var a,b,c,d,s;e=!e?this.getFullYear():e;f=!f?this.getMonth()+1:f;g=!g?this.getDate():g;f<=2?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=b-(((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0)),d=0,s=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=b-(((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0)),d=c+1,s=g+(153*(f-3)+2)/5+58+c);a=(a+b)%7;d=s+3-(s+a-d)%7|0;e=f=g=null;return d<0?53-((a-c)/5|0):d>364+c?1:(d/7|0)+1};d.getISOWeek=function(){e=this.getUTCFullYear();f=this.getUTCMonth()+1;g=this.getUTCDate();return b(this.getWeek())};
d.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};a._validate=function(a,b,c,e){if(typeof a=="undefined")return!1;else if(typeof a!="number")throw new TypeError(a+" is not a Number.");else if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+e+".");return!0};a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")};a.validateSecond=function(b){return a._validate(b,0,59,"second")};a.validateMinute=function(b){return a._validate(b,0,59,"minute")};
a.validateHour=function(b){return a._validate(b,0,23,"hour")};a.validateDay=function(b,c,e){return a._validate(b,1,a.getDaysInMonth(c,e),"day")};a.validateMonth=function(b){return a._validate(b,0,11,"month")};a.validateYear=function(b){return a._validate(b,0,9999,"year")};d.set=function(b){a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds());a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds());a.validateMinute(b.minute)&&this.addMinutes(b.minute-
this.getMinutes());a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours());a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth());a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear());a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate());b.timezone&&this.setTimezone(b.timezone);b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset);b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week);return this};d.moveToFirstDayOfMonth=
function(){return this.set({day:1})};d.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})};d.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)};d.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+7*(b||1):c)};d.moveToMonth=
function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+12*(b||1):c)};d.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864E5)+1};d.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())};d.setTimezoneOffset=function(a){var b=this.getTimezoneOffset();return this.addMinutes(Number(a)*-6/10-b)};d.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))};d.hasDaylightSavingTime=
function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};d.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};d.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6;return a<0?(a=(a-1E4).toString(),a.charAt(0)+a.substr(2)):(a=(a+1E4).toString(),"+"+a.substr(1))};d.getElapsed=function(a){return(a||new Date)-this};if(!d.toISOString)d.toISOString=
function(){function a(b){return b<10?"0"+b:b}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'};d._toString=d.toString;d.toString=function(a){var e=this;if(a&&a.length==1){var d=c.formatPatterns;e.t=e.toString;switch(a){case "d":return e.t(d.shortDate);case "D":return e.t(d.longDate);case "F":return e.t(d.fullDateTime);case "m":return e.t(d.monthDay);case "r":return e.t(d.rfc1123);
case "s":return e.t(d.sortableDateTime);case "t":return e.t(d.shortTime);case "T":return e.t(d.longTime);case "u":return e.t(d.universalSortableDateTime);case "y":return e.t(d.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");e.h=e.getHours;switch(a){case "hh":return b(e.h()<
13?e.h()===0?12:e.h():e.h()-12);case "h":return e.h()<13?e.h()===0?12:e.h():e.h()-12;case "HH":return b(e.h());case "H":return e.h();case "mm":return b(e.getMinutes());case "m":return e.getMinutes();case "ss":return b(e.getSeconds());case "s":return e.getSeconds();case "yyyy":return b(e.getFullYear(),4);case "yy":return b(e.getFullYear());case "dddd":return c.dayNames[e.getDay()];case "ddd":return c.abbreviatedDayNames[e.getDay()];case "dd":return b(e.getDate());case "d":return e.getDate();case "MMMM":return c.monthNames[e.getMonth()];
case "MMM":return c.abbreviatedMonthNames[e.getMonth()];case "MM":return b(e.getMonth()+1);case "M":return e.getMonth()+1;case "t":return e.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case "tt":return e.h()<12?c.amDesignator:c.pmDesignator;case "S":return f(e.getDate());default:return a}}):this._toString()}})();
(function(){var a=Date,d=a.prototype,c=a.CultureInfo,b=Number.prototype;d._orient=1;d._nth=null;d._is=!1;d._same=!1;d._isSecond=!1;b._dateElement="day";d.next=function(){this._orient=1;return this};a.next=function(){return a.today().next()};d.last=d.prev=d.previous=function(){this._orient=-1;return this};a.last=a.prev=a.previous=function(){return a.today().last()};d.is=function(){this._is=!0;return this};d.same=function(){this._same=!0;this._isSecond=!1;return this};d.today=function(){return this.same().day()};
d.weekday=function(){if(this._is)return this._is=!1,!this.is().sat()&&!this.is().sun();return!1};d.at=function(b){return typeof b==="string"?a.parse(this.toString("d")+" "+b):this.set(b)};b.fromNow=b.after=function(a){var b={};b[this._dateElement]=this;return(!a?new Date:a.clone()).add(b)};b.ago=b.before=function(a){var b={};b[this._dateElement]=this*-1;return(!a?new Date:a.clone()).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),
g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),k="final first second third fourth fifth".split(/\s/);d.toObject=function(){for(var a={},b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a};a.fromObject=function(a){a.week=null;return Date.today().set(a)};for(var j=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*
-1);this._isSecond=!1;var c=this._nth;this._nth=null;var e=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>e)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(e.getMonth())+" "+e.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},q=function(b){return function(){var e=a.today(),d=b-e.getDay();b===0&&c.firstDayOfWeek===1&&e.getDay()!==0&&(d+=7);return e.addDays(d)}},s=0;s<e.length;s++)a[e[s].toUpperCase()]=
a[e[s].toUpperCase().substring(0,3)]=s,a[e[s]]=a[e[s].substring(0,3)]=q(s),d[e[s]]=d[e[s].substring(0,3)]=j(s);e=function(a){return function(){if(this._is)return this._is=!1,this.getMonth()===a;return this.moveToMonth(a,this._orient)}};j=function(b){return function(){return a.today().set({month:b,day:1})}};for(q=0;q<f.length;q++)a[f[q].toUpperCase()]=a[f[q].toUpperCase().substring(0,3)]=q,a[f[q]]=a[f[q].substring(0,3)]=j(q),d[f[q]]=d[f[q].substring(0,3)]=e(q);e=function(a){return function(b){if(this._isSecond)return this._isSecond=
!1,this;if(this._same){this._same=this._is=!1;var c=this.toObject();b=(b||new Date).toObject();for(var e="",d=a.toLowerCase(),f=g.length-1;f>-1;f--){e=g[f].toLowerCase();if(c[e]!=b[e])return!1;if(d==e)break}return!0}a.substring(a.length-1)!="s"&&(a+="s");return this["add"+a](this._orient)}};j=function(a){return function(){this._dateElement=a;return this}};for(q=0;q<g.length;q++)f=g[q].toLowerCase(),d[f]=d[f+"s"]=e(g[q]),b[f]=b[f+"s"]=j(f);d._ss=e("Second");b=function(a){return function(b){if(this._same)return this._ss(b);
if(b||b===0)return this.moveToNthOccurrence(b,a);this._nth=a;if(a===2&&(b===void 0||b===null))return this._isSecond=!0,this.addSeconds(this._orient);return this}};for(f=0;f<k.length;f++)d[k[f]]=f===0?b(-1):b(f)})();
(function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,d=a.Operators={rtoken:function(b){return function(c){var e=c.match(b);if(e)return[e[0],c.substring(e[0].length)];else throw new a.Exception(c);}},token:function(){return function(a){return d.rtoken(RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return d.rtoken(RegExp("^"+a))},until:function(a){return function(b){for(var c=[],e=null;b.length;){try{e=a.call(this,b)}catch(d){c.push(e[0]);
b=e[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],e=null;b.length;){try{e=a.call(this,b)}catch(d){break}c.push(e[0]);b=e[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(e){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(e){return[null,c]}throw new a.Exception(c);}},ignore:function(a){return a?function(b){var c=null;c=a.call(this,b);return[null,c[1]]}:null},product:function(){for(var a=
arguments[0],b=Array.prototype.slice.call(arguments,1),c=[],e=0;e<a.length;e++)c.push(d.each(a[e],b));return c},cache:function(b){var c={},e=null;return function(d){try{e=c[d]=c[d]||b.call(this,d)}catch(j){e=c[d]=j}if(e instanceof a.Exception)throw e;else return e}},any:function(){var b=arguments;return function(c){for(var e=null,d=0;d<b.length;d++)if(b[d]!=null){try{e=b[d].call(this,c)}catch(j){e=null}if(e)return e}throw new a.Exception(c);}},each:function(){var b=arguments;return function(c){for(var e=
[],d=null,j=0;j<b.length;j++)if(b[j]!=null){try{d=b[j].call(this,c)}catch(q){throw new a.Exception(c);}e.push(d[0]);c=d[1]}return[e,c]}},all:function(){var a=a;return a.each(a.optional(arguments))},sequence:function(b,c,e){c=c||d.rtoken(/^\s*/);e=e||null;if(b.length==1)return b[0];return function(d){for(var j=null,q=null,s=[],u=0;u<b.length;u++){try{j=b[u].call(this,d)}catch(t){break}s.push(j[0]);try{q=c.call(this,j[1])}catch(v){q=null;break}d=q[1]}if(!j)throw new a.Exception(d);if(q)throw new a.Exception(q[1]);
if(e)try{j=e.call(this,j[1])}catch(B){throw new a.Exception(j[1]);}return[s,j?j[1]:d]}},between:function(a,b,c){c=c||a;var e=d.each(d.ignore(a),b,d.ignore(c));return function(a){a=e.call(this,a);return[[a[0][0],r[0][2]],a[1]]}},list:function(a,b,c){b=b||d.rtoken(/^\s*/);c=c||null;return a instanceof Array?d.each(d.product(a.slice(0,-1),d.ignore(b)),a.slice(-1),d.ignore(c)):d.each(d.many(d.each(a,d.ignore(b))),px,d.ignore(c))},set:function(b,c,e){c=c||d.rtoken(/^\s*/);e=e||null;return function(k){for(var j=
null,q=j=null,s=null,u=[[],k],t=!1,v=0;v<b.length;v++){j=q=null;t=b.length==1;try{j=b[v].call(this,k)}catch(B){continue}s=[[j[0]],j[1]];if(j[1].length>0&&!t)try{q=c.call(this,j[1])}catch(o){t=!0}else t=!0;!t&&q[1].length===0&&(t=!0);if(!t){j=[];for(t=0;t<b.length;t++)v!=t&&j.push(b[t]);j=d.set(j,c).call(this,q[1]);j[0].length>0&&(s[0]=s[0].concat(j[0]),s[1]=j[1])}s[1].length<u[1].length&&(u=s);if(u[1].length===0)break}if(u[0].length===0)return u;if(e){try{q=e.call(this,u[1])}catch(n){throw new a.Exception(u[1]);
}u[1]=q[1]}return u}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){c=a.call(this,c);return[b,c[1]]}},process:function(a,b){return function(c){c=a.call(this,c);return[b.call(this,c[0]),c[1]]}},min:function(b,c){return function(e){var d=c.call(this,e);if(d[0].length<b)throw new a.Exception(e);return d}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&
(b=arguments[0]);if(b)for(var e=b.shift();0<e.length;)return b.unshift(e[0]),c.push(a.apply(null,b)),b.shift(),c;else return a.apply(null,arguments)}},b="optional not ignore cache".split(/\s/),e=0;e<b.length;e++)d[b[e]]=c(d[b[e]]);c=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}};b="each any all".split(/\s/);for(e=0;e<b.length;e++)d[b[e]]=c(d[b[e]])})();
(function(){var a=Date,d=a.CultureInfo,c=function(a){for(var b=[],e=0;e<a.length;e++)a[e]instanceof Array?b=b.concat(c(a[e])):a[e]&&b.push(a[e]);return b};a.Grammar={};a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,
"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2E3<d.twoDigitYearMax?2E3:1900)}},rday:function(a){return function(){switch(a){case "yesterday":this.days=-1;break;case "tomorrow":this.days=
1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);b=new Date;if((this.hour||this.minute)&&!this.month&&!this.year&&!this.day)this.day=b.getDate();if(!this.year)this.year=b.getFullYear();if(!this.month&&this.month!==0)this.month=b.getMonth();if(!this.day)this.day=1;if(!this.hour)this.hour=0;if(!this.minute)this.minute=0;if(!this.second)this.second=0;if(this.meridian&&this.hour)if(this.meridian==
"p"&&this.hour<12)this.hour+=12;else if(this.meridian=="a"&&this.hour==12)this.hour=0;if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?b.set({timezone:this.timezone}):this.timezoneOffset&&b.set({timezoneOffset:this.timezoneOffset});return b},finish:function(b){b=b instanceof Array?c(b):[b];if(b.length===0)return null;for(var e=0;e<b.length;e++)typeof b[e]==
"function"&&b[e].call(this);b=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;else this.now&&(b=new Date);e=!!(this.days&&this.days!==null||this.orient||this.operator);var d,f,g;g=this.orient=="past"||this.operator=="subtract"?-1:1;!this.now&&"hour minute second".indexOf(this.unit)!=-1&&b.setTimeToNow();if((this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1)this.value=this.month+1,this.month=null,e=!0;if(!e&&this.weekday&&!this.day&&!this.days){d=Date[this.weekday]();
this.day=d.getDate();if(!this.month)this.month=d.getMonth();this.year=d.getFullYear()}if(e&&this.weekday&&this.unit!="month")this.unit="day",d=a.getDayNumberFromName(this.weekday)-b.getDay(),f=7,this.days=d?(d+g*f)%f:g*f;if(this.month&&this.unit=="day"&&this.operator)this.value=this.month+1,this.month=null;if(this.value!=null&&this.month!=null&&this.year!=null)this.day=this.value*1;if(this.month&&!this.day&&this.value&&(b.set({day:this.value*1}),!e))this.day=this.value*1;if(!this.month&&this.value&&
this.unit=="month"&&!this.now)this.month=this.value,e=!0;if(e&&(this.month||this.month===0)&&this.unit!="year")this.unit="month",d=this.month-b.getMonth(),f=12,this.months=d?(d+g*f)%f:g*f,this.month=null;if(!this.unit)this.unit="day";if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*g;else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value)this.value=
1;this[this.unit+"s"]=this.value*g}if(this.meridian&&this.hour)if(this.meridian=="p"&&this.hour<12)this.hour+=12;else if(this.meridian=="a"&&this.hour==12)this.hour=0;if(this.weekday&&!this.day&&!this.days&&(d=Date[this.weekday](),this.day=d.getDate(),d.getMonth()!==b.getMonth()))this.month=d.getMonth();if((this.month||this.month===0)&&!this.day)this.day=1;if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);if(e&&this.timezone&&
this.day&&this.days)this.day=this.days;return e?b.add(this):b.set(this)}};var b=a.Parsing.Operators,e=a.Grammar,f=a.Translator,g;e.datePartDelimiter=b.rtoken(/^([\s\-\.\,\/\x27]+)/);e.timePartDelimiter=b.stoken(":");e.whiteSpace=b.rtoken(/^\s*/);e.generalDelimiter=b.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};e.ctoken=function(a){var c=h[a];if(!c){c=d.regexPatterns;for(var e=a.split(/\s+/),f=[],g=0;g<e.length;g++)f.push(b.replace(b.rtoken(c[e[g]]),e[g]));c=h[a]=b.any.apply(null,f)}return c};e.ctoken2=
function(a){return b.rtoken(d.regexPatterns[a])};e.h=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),f.hour));e.hh=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2])/),f.hour));e.H=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),f.hour));e.HH=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3])/),f.hour));e.m=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),f.minute));e.mm=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),f.minute));e.s=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),f.second));e.ss=
b.cache(b.process(b.rtoken(/^[0-5][0-9]/),f.second));e.hms=b.cache(b.sequence([e.H,e.m,e.s],e.timePartDelimiter));e.t=b.cache(b.process(e.ctoken2("shortMeridian"),f.meridian));e.tt=b.cache(b.process(e.ctoken2("longMeridian"),f.meridian));e.z=b.cache(b.process(b.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone));e.zz=b.cache(b.process(b.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone));e.zzz=b.cache(b.process(e.ctoken2("timezone"),f.timezone));e.timeSuffix=b.each(b.ignore(e.whiteSpace),
b.set([e.tt,e.zzz]));e.time=b.each(b.optional(b.ignore(b.stoken("T"))),e.hms,e.timeSuffix);e.d=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1]|\d)/),b.optional(e.ctoken2("ordinalSuffix"))),f.day));e.dd=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1])/),b.optional(e.ctoken2("ordinalSuffix"))),f.day));e.ddd=e.dddd=b.cache(b.process(e.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));e.M=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d|\d)/),f.month));e.MM=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d)/),
f.month));e.MMM=e.MMMM=b.cache(b.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),f.month));e.y=b.cache(b.process(b.rtoken(/^(\d\d?)/),f.year));e.yy=b.cache(b.process(b.rtoken(/^(\d\d)/),f.year));e.yyy=b.cache(b.process(b.rtoken(/^(\d\d?\d?\d?)/),f.year));e.yyyy=b.cache(b.process(b.rtoken(/^(\d\d\d\d)/),f.year));g=function(){return b.each(b.any.apply(null,arguments),b.not(e.ctoken2("timeContext")))};e.day=g(e.d,e.dd);e.month=g(e.M,e.MMM);e.year=g(e.yyyy,e.yy);e.orientation=b.process(e.ctoken("past future"),
function(a){return function(){this.orient=a}});e.operator=b.process(e.ctoken("add subtract"),function(a){return function(){this.operator=a}});e.rday=b.process(e.ctoken("yesterday tomorrow today now"),f.rday);e.unit=b.process(e.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});e.value=b.process(b.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});e.expression=b.set([e.rday,e.operator,e.value,e.unit,e.orientation,
e.ddd,e.MMM]);g=function(){return b.set(arguments,e.datePartDelimiter)};e.mdy=g(e.ddd,e.month,e.day,e.year);e.ymd=g(e.ddd,e.year,e.month,e.day);e.dmy=g(e.ddd,e.day,e.month,e.year);e.date=function(a){return(e[d.dateElementOrder]||e.mdy).call(this,a)};e.format=b.process(b.many(b.any(b.process(b.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(e[b])return e[b];else throw a.Parsing.Exception(b);}),b.process(b.rtoken(/^[^dMyhHmstz]+/),function(a){return b.ignore(b.stoken(a))}))),
function(a){return b.process(b.each.apply(null,a),f.finishExact)});var k={};e.formats=function(a){if(a instanceof Array){for(var c=[],d=0;d<a.length;d++)c.push(k[a[d]]=k[a[d]]||e.format(a[d])[0]);return b.any.apply(null,c)}else return k[a]=k[a]||e.format(a)[0]};e._formats=e.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy",
"ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);e._start=b.process(b.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),f.finish);e.start=function(a){try{var b=e._formats.call({},a);if(b[1].length===0)return b}catch(c){}return e._start.call({},a)};a._parse=a.parse;a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return c[1].length===
0?c[0]:null};a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(e){return null}return b[1].length===0?b[0]:null}};a.parseExact=function(b,c){return a.getParseFunction(c)(b)}})();
(function(a){function d(b,c){this.$div=b;this.options=a.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:["January","February","March","April","May","June","July","August","September","October","November","December"],day_of_week_texts:["S","M","T","W","T","F","S"]},c);this._extract_options();this._attach();this._redraw()}function c(a){b?b.firstChild.nodeValue=a:(b=document.createElement("div"),b.appendChild(document.createTextNode(a)));return b.innerHTML}a.fn.calendar_date_picker=
function(b){return this.each(function(){var c=a(this);c=new d(c,b);a(this).data("calendar_date_picker",c)})};a.extend(d.prototype,{_copy_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},_copy_date_with_time:function(a,b){if(!a)return a;var c=this._copy_date(a),d=(b||"").split(":");c.setHours(+d[0]||0);c.setMinutes(+d[1]||0);return c},_copy_time:function(a){if(!a)return null;var b=""+a.getHours();b.length==1&&(b="0"+b);a=""+a.getMinutes();a.length==1&&(a="0"+a);return b+
":"+a},_copy_month:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},_next_month:function(a){return new Date(a.getFullYear(),a.getMonth()+1,1)},_previous_month:function(a){return new Date(a.getFullYear(),a.getMonth()-1,1)},_next_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,a.getHours(),a.getMinutes())},_previous_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()-1,a.getHours(),a.getMinutes())},_same_year:function(a,b){return a.getFullYear()==
b.getFullYear()},_same_month:function(a,b){return this._same_year(a,b)&&a.getMonth()==b.getMonth()},_last_date_of_month:function(a){return new Date(a.getFullYear(),a.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){return this.selected_date&&this._same_month(this.selected_date,this.focus_date)?this.selected_date.getDate():void 0},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date);if(this.options.selected_date)this.selected_date=this._copy_date(this.options.selected_date);
this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date);this.time=this._does_datetime()?this._copy_time(this.options.selected_date||this.options.today_date||new Date):!1},_refresh_calendar_table_classes:function(a){var b=this._selected_date_date_in_focus_month();a=a.children("tbody");var c=a.find("a.selected");c.removeClass("selected");c.parent().removeClass("selected");b=a.find("a:eq("+(b-1)+")");b.addClass("selected");b.parent().addClass("selected")},_attach:function(){var a=
this;this.$div.bind("calendar_date_picker:select_date",function(b,c){a.select_date(c)})},_bind_dom_table_events:function(){var b=this,c=this.$div.children().children("table"),d=c.children(":eq(0)").children().children(),h=d.children("a.previous_month");h.text(this.options.previous_month_text);h.click(function(a){a.preventDefault();b._on_previous_month_clicked()});d=d.children("a.next_month");d.text(this.options.next_month_text);d.click(function(a){a.preventDefault();b._on_next_month_clicked()});c.children("tbody").click(function(c){var d=
a(a.browser.msie?c.srcElement:c.target);d[0]&&d[0].nodeName=="A"&&(c.preventDefault(),c=b._copy_date_with_time(b.focus_date,b.time),c.setDate(+d.text()),d=b._copy_date_with_time(b.selected_date,b.time),b.options.allow_deselect&&d&&!(c-d)?b.select_date(void 0):b.select_date(c))})},_bind_dom_time_events:function(){if(this._does_datetime()){var a=this,b=this.$div.children().children("div.time").find("input");b.time_field();b.trigger("time_field:set_time",this.time);b.bind("time_field:time_changed",function(b,
c){if(!a.selected_date)a.selected_date=new Date;var d=a._copy_date_with_time(a.selected_date,c);a.select_date(d)})}},_does_datetime:function(){return this.options.time_text!==void 0},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date);this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=this._next_month(this.focus_date);this._refresh_calendar()},_redraw:function(){this.$div.empty();this.$div.append('<div class="calendar_date_picker">'+
this._table_html()+this._time_div_html()+"</div>");this._bind_dom_table_events();this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html());this._bind_dom_table_events()},select_date:function(a,b){var c=a?this._copy_date(a):void 0,d=b?b:a?this._copy_time(a):void 0;if(!((this.selected_date?this.selected_date.valueOf():void 0)==(c?c.valueOf():void 0)&&d==this.time)){this.selected_date=c;if(this._does_datetime())this.time=d,this.$div.find("input").trigger("time_field:set_time",
d);this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]);this.focus_date=this._copy_month(this.selected_date||this.today_date);this._refresh_calendar();this._refresh_calendar_table_classes(this.$div.find("table"))}},_table_html:function(){return"<table>"+this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month" href="#"></a><a class="next_month" href="#"></a><span class="month">'+
c(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var a=this._copy_month(this.focus_date).getDay(),b=1,c=this._last_date_of_month(this.focus_date).getDate(),d=this._selected_date_date_in_focus_month(),k=this._same_month(this.focus_date,this.today_date)&&
this.today_date.getDate(),j=[];j.push(this._date_tds(a,d,k,b,c));for(b=8-a;b<=c;b+=7)j.push(this._date_tds(0,d,k,b,c));return"<tbody><tr>"+j.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(a,b,c,d,k){for(var j=[],q=0;q<a;q++)j.push("<td></td>");for(a=d;j.length<7&&a<=k;a++)q=[],a===b&&q.push("selected"),a===c&&q.push("today"),q=q.length?' class="'+q.join(" ")+'"':"",j.push("<td"+q+'><a href="#"'+q+">"+a+"</a></td>");for(b=k+1;b<d+7;b++)j.push("<td></td>");return j.join("")},_days_of_week_ths:function(){return a.map(this.options.day_of_week_texts,
c)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+c(this.options.time_text)+'<input type="text" /></label></div>':""}});var b})(jQuery);
(function(a){function d(c,b){this.$field=c;this.$calendar=void 0;this.options=a.extend({calendar:{},position:"right"},b);this._in_manual_edit=!1;this._blurs_to_ignore=-1;this._attach()}a.fn.datetime_picker_field=function(c){return this.each(function(){new d(a(this),c)})};a.extend(d.prototype,{_attach:function(){var a=this;this.$field.focus(function(){a._in_time_field=!1;a._ensure_calendar()});this.$field.blur(function(){a._hide_calendar_or_refocus();a._blurs_to_ignore-=1});a.$field.bind("keypress cut paste input",
function(){a._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var c=this,b=a("<div></div>"),e=a.extend({selected_date:this.get_selected_datetime()},this.options.calendar);b.css("position","absolute");b.css("z-index","1000");this.options.position==="bottom"?(b.css("left",this.$field.offset().left),b.css("top",this.$field.offset().top+this.$field.outerHeight()+20)):(b.css("left",this.$field.offset().left+this.$field.width()+20),b.css("top",this.$field.offset().top));
b.hide();this._get_surrounding_element().append(b);b.calendar_date_picker(e);b.mousedown(function(){c._in_time_field=!1;c._blurs_to_ignore+=1});b.find("label").mousedown(function(a){c._in_time_field=!0;c._blurs_to_ignore+=1;a.stopPropagation()});b.find("input").blur(function(){c._hide_calendar_or_refocus();c._blurs_to_ignore-=1});c._blurs_to_ignore=0;b.bind("calendar_date_picker:date_selected",function(a,b){if(!c._in_manual_edit){var e=c.options.format_callback(b);e!==c.$field.val()&&(c.$field.val(e),
c.$field.trigger("input"),c.options.calendar.time_text||(c._hide_calendar(),c._focus_next()))}});b.find(".time input").bind("keydown",function(b){b.keyCode===13&&(a(this).blur(),c._hide_calendar())});this.$calendar=b;b.fadeIn();this.options.open_calendar_callback&&this.options.open_calendar_callback();return this.$calendar},_hide_calendar:function(){if(this.$calendar)this.$calendar.fadeOut(function(){a(this).remove()}),this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback()},
_focus_next:function(){var a=this.$field.parents("form:eq(0)").find(":input"),b=a.index(this.$field);b>-1&&b+1<a.length&&a.eq(b+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var a=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){a._in_time_field?a.$calendar&&a.$calendar.length&&a.$calendar.find("input").focus():a.$field.focus()})},_handle_edit:function(){this._in_manual_edit=
!0;this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime());this._in_manual_edit=!1},get_selected_datetime:function(){return this.options.parse_callback(this.$field.val())},_get_surrounding_element:function(){return this.options.surrounding_element?a(this.options.surrounding_element):a("body")}})})(jQuery);
(function(a){function d(c,b){this.$field=c;this.options=a.extend({on_invalid:null},b);this._value=this._current_time_from_field();this._attach()}a.fn.time_field=function(c){return a(this).each(function(){new d(a(this),c)})};a.extend(d.prototype,{_attach:function(){var a=this;a.$field.bind("blur",function(){a._handle_edit()});this.$field.bind("time_field:set_time",function(b,e){a.set_time(e)})},_s_to_time:function(a){if(typeof Date.Parsing=="object")return(a=Date.parse(a))?a.toString("HH:mm"):this.options.on_invalid;
var b,e=a.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i);a=!e;if(!a){var d=+e[1]%12;b=+e[3]||0;var g=(e[4]||"").match(/p/i);e[4]||(g=+e[1]>=12);+e[1]>23&&(a=!0);+e[1]>12&&e[4]&&(a=!0);b>59&&(a=!0);+e[1]<1&&e[4]&&(a=!0);e=""+(d+(g?12:0));e.length==1&&(e="0"+e);b=""+b;b.length==1&&(b="0"+b);b=e+":"+b}return a?this.options.on_invalid:b},_time_to_s:function(a){if(typeof Date.Parsing=="object")return(a=Date.parse(a))?a.toString("h:mm tt"):this.options.on_invalid;var b=a&&a.match(/(\d\d):(\d\d)/);return b?
(a=+b[1],b=""+ +b[2],b.length==1&&(b="0"+b),""+(a%12?a%12:12)+":"+b+(a>=12?"pm":"am")):""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!=this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(a){if(a!=this._value)this._value=a,this.$field.trigger("time_field:time_changed",this._value);this._reset_field_value()},_handle_edit:function(){this.set_time(this._current_time_from_field())}})})(jQuery);
(function(a){function d(c,b){this.$element=a(c);this.options=b;this.enabled=!0;this.fixTitle()}d.prototype={show:function(){var c=this.getTitle();if(c&&this.enabled){var b=this.tip();b.find(".tipsy-inner")[this.options.html?"html":"text"](c);b[0].className="tipsy";b.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);c=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var e=b[0].offsetWidth,d=b[0].offsetHeight,
g=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,h;switch(g.charAt(0)){case "n":h={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-e/2};break;case "s":h={top:c.top-d-this.options.offset,left:c.left+c.width/2-e/2};break;case "e":h={top:c.top+c.height/2-d/2,left:c.left-e-this.options.offset};break;case "w":h={top:c.top+c.height/2-d/2,left:c.left+c.width+this.options.offset}}if(g.length==2)h.left=g.charAt(1)=="w"?c.left+c.width/2-
15:c.left+c.width/2-e+15;b.css(h).addClass("tipsy-"+g);this.options.fade?b.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):b.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("original-title")!="string")a.attr("original-title",a.attr("title")||"").removeAttr("title")},
getTitle:function(){var a,b=this.$element,e=this.options;this.fixTitle();typeof e.title=="string"?a=b.attr(e.title=="title"?"original-title":e.title):typeof e.title=="function"&&(a=e.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||e.fallback},tip:function(){if(!this.$tip)this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');return this.$tip},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=
null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};a.fn.tipsy=function(c){function b(b){var e=a.data(b,"tipsy");e||(e=new d(b,a.fn.tipsy.elementOptions(b,c)),a.data(b,"tipsy",e));return e}function e(){var a=b(this);a.hoverState="in";c.delayIn===0?a.show():(a.fixTitle(),setTimeout(function(){a.hoverState=="in"&&a.show()},c.delayIn))}function f(){var a=b(this);a.hoverState="out";c.delayOut===0?a.hide():setTimeout(function(){a.hoverState==
"out"&&a.hide()},c.delayOut)}if(c===!0)return this.data("tipsy");else if(typeof c=="string"){var g=this.data("tipsy");if(g)g[c]();return this}c=a.extend({},a.fn.tipsy.defaults,c);c.live||this.each(function(){b(this)});if(c.trigger!="manual"){g=c.live?"live":"bind";var h=c.trigger=="hover"?"mouseleave":"blur";this[g](c.trigger=="hover"?"mouseenter":"focus",e)[g](h,f)}return this};a.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:0.8,title:"title",
trigger:"hover"};a.fn.tipsy.elementOptions=function(c,b){return a.metadata?a.extend({},b,a(c).metadata()):b};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}})(jQuery);
(function(a){function d(a){return typeof a=="object"?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};c.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
b.compatMode=="BackCompat"?b.body:b.documentElement})};a.fn.scrollTo=function(b,e,f){typeof e=="object"&&(f=e,e=0);typeof f=="function"&&(f={onAfter:f});b=="max"&&(b=9E9);f=a.extend({},c.defaults,f);e=e||f.speed||f.duration;f.queue=f.queue&&f.axis.length>1;f.queue&&(e/=2);f.offset=d(f.offset);f.over=d(f.over);return this._scrollable().each(function(){function g(a){k.animate(s,e,f.easing,a&&function(){a.call(this,b,f)})}var h=this,k=a(h),j=b,q,s={},u=k.is("html,body");switch(typeof j){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(j)){j=
d(j);break}j=a(j,this);case "object":if(j.is||j.style)q=(j=a(j)).offset()}a.each(f.axis.split(""),function(a,b){var e=b=="x"?"Left":"Top",d=e.toLowerCase(),n="scroll"+e,p=h[n],A=c.max(h,b);q?(s[n]=q[d]+(u?0:p-k.offset()[d]),f.margin&&(s[n]-=parseInt(j.css("margin"+e))||0,s[n]-=parseInt(j.css("border"+e+"Width"))||0),s[n]+=f.offset[d]||0,f.over[d]&&(s[n]+=j[b=="x"?"width":"height"]()*f.over[d])):(e=j[d],s[n]=e.slice&&e.slice(-1)=="%"?parseFloat(e)/100*A:e);/^\d+$/.test(s[n])&&(s[n]=s[n]<=0?0:Math.min(s[n],
A));!a&&f.queue&&(p!=s[n]&&g(f.onAfterFirst),delete s[n])});g(f.onAfter)}).end()};c.max=function(b,c){var d=c=="x"?"Width":"Height",g="scroll"+d;if(!a(b).is("html,body"))return b[g]-a(b)[d.toLowerCase()]();d="client"+d;var h=b.ownerDocument.documentElement,k=b.ownerDocument.body;return Math.max(h[g],k[g])-Math.min(h[d],k[d])}})(jQuery);
(function(a){var d=a.serialScroll=function(c){return a(window).serialScroll(c)};d.defaults={duration:1E3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0};a.fn.serialScroll=function(c){return this.each(function(){function b(a){a.data+=o;e(a,this)}function e(a,b){if(!isNaN(b))a.data=b;var c=a.data,e=a.type,d=k.exclude?g().slice(0,-k.exclude):g(),h=d.length,j=d[c],p=k.duration;e&&a.preventDefault();n&&(clearTimeout(A),A=setTimeout(f,k.interval));if(!j){c=c<0?0:h-1;if(o==c)if(k.cycle)c=
h-c-1;else return;j=d[c]}if(j&&!(k.lock&&t.is(":animated")||e&&k.onBefore&&k.onBefore(a,j,t,g(),c)===!1))k.stop&&t.queue("fx",[]).stop(),k.constant&&(p=Math.abs(p/q*(o-c))),t.scrollTo(j,p,k).trigger("notify.serialScroll",[c])}function f(){t.trigger("next.serialScroll")}function g(){return a(B,v)}function h(a){if(!isNaN(a))return a;for(var b=g(),c;(c=b.index(a))==-1&&a!=v;)a=a.parentNode;return c}var k=a.extend({},d.defaults,c),j=k.event,q=k.step,s=k.lazy,u=k.target?this:document,t=a(k.target||this,
u),v=t[0],B=k.items,o=k.start,n=k.interval,p=k.navigation,A;s||(B=g());k.force&&e({},o);a(k.prev||[],u).bind(j,-q,b);a(k.next||[],u).bind(j,q,b);v.ssbound||t.bind("prev.serialScroll",-q,b).bind("next.serialScroll",q,b).bind("goto.serialScroll",e);n&&t.bind("start.serialScroll",function(){n||(clearTimeout(A),n=!0,f())}).bind("stop.serialScroll",function(){clearTimeout(A);n=!1});t.bind("notify.serialScroll",function(a,b){var c=h(b);c>-1&&(o=c)});v.ssbound=!0;k.jump&&(s?t:g()).bind(j,function(a){e(a,
h(a.target))});p&&(p=a(p,u).bind(j,function(a){a.data=Math.round(g().length/p.length)*p.index(this);e(a,this)}))})}})(jQuery);
(function(a){a.color={};a.color.make=function(c,b,e,d){var g={};g.r=c||0;g.g=b||0;g.b=e||0;g.a=d!=null?d:1;g.add=function(a,b){for(var c=0;c<a.length;++c)g[a.charAt(c)]+=b;return g.normalize()};g.scale=function(a,b){for(var c=0;c<a.length;++c)g[a.charAt(c)]*=b;return g.normalize()};g.toString=function(){return g.a>=1?"rgb("+[g.r,g.g,g.b].join(",")+")":"rgba("+[g.r,g.g,g.b,g.a].join(",")+")"};g.normalize=function(){function a(b,c,e){return c<b?b:c>e?e:c}g.r=a(0,parseInt(g.r),255);g.g=a(0,parseInt(g.g),
255);g.b=a(0,parseInt(g.b),255);g.a=a(0,g.a,1);return g};g.clone=function(){return a.color.make(g.r,g.b,g.g,g.a)};return g.normalize()};a.color.extract=function(c,b){var e;do{e=c.css(b).toLowerCase();if(e!=""&&e!="transparent")break;c=c.parent()}while(!a.nodeName(c.get(0),"body"));e=="rgba(0, 0, 0, 0)"&&(e="transparent");return a.color.parse(e)};a.color.parse=function(c){var b,e=a.color.make;if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(b[1],10),
parseInt(b[2],10),parseInt(b[3],10));if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4]));if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55);if(b=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseFloat(b[1])*
2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55,parseFloat(b[4]));if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16));if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16));c=a.trim(c).toLowerCase();return c=="transparent"?e(255,255,255,0):(b=d[c]||[0,0,0],e(b[0],b[1],b[2]))};var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(a){function d(b,e,d,g){function h(a,b){b=[N].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function k(b){for(var c=[],e=0;e<b.length;++e){var d=a.extend(!0,{},w.series);b[e].data!=null?(d.data=b[e].data,delete b[e].data,a.extend(!0,d,b[e]),b[e].data=d.data):d.data=b[e];c.push(d)}L=c;c=L.length;e=[];d=[];for(b=0;b<L.length;++b){var f=L[b].color;f!=null&&(--c,typeof f=="number"?d.push(f):e.push(a.color.parse(L[b].color)))}for(b=0;b<d.length;++b)c=Math.max(c,d[b]+1);e=[];for(b=d=
0;e.length<c;)f=w.colors.length==b?a.color.make(100,100,100):a.color.parse(w.colors[b]),f.scale("rgb",1+(d%2==1?-1:1)*Math.ceil(d/2)*0.2),e.push(f),++b,b>=w.colors.length&&(b=0,++d);for(b=c=0;b<L.length;++b){d=L[b];if(d.color==null)d.color=e[c].toString(),++c;else if(typeof d.color=="number")d.color=e[d.color].toString();if(d.lines.show==null){var g;f=!0;for(g in d)if(d[g]&&d[g].show){f=!1;break}if(f)d.lines.show=!0}d.xaxis=u(S,j(d,"x"));d.yaxis=u(X,j(d,"y"))}t()}function j(a,b){var c=a[b+"axis"];
if(typeof c=="object")c=c.n;typeof c!="number"&&(c=1);return c}function q(){return a.grep(S.concat(X),function(a){return a})}function s(a){var b={},c,e;for(c=0;c<S.length;++c)(e=S[c])&&e.used&&(b["x"+e.n]=e.c2p(a.left));for(c=0;c<X.length;++c)(e=X[c])&&e.used&&(b["y"+e.n]=e.c2p(a.top));if(b.x1!==void 0)b.x=b.x1;if(b.y1!==void 0)b.y=b.y1;return b}function u(b,c){b[c-1]||(b[c-1]={n:c,direction:b==S?"x":"y",options:a.extend(!0,{},b==S?w.xaxis:w.yaxis)});return b[c-1]}function t(){function b(a,c,e){if(c<
a.datamin&&c!=-d)a.datamin=c;if(e>a.datamax&&e!=d)a.datamax=e}var c=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,d=Number.MAX_VALUE,f,g,o,j,n,l,p,k,t,s;a.each(q(),function(a,b){b.datamin=c;b.datamax=e;b.used=!1});for(f=0;f<L.length;++f)n=L[f],n.datapoints={points:[]},h(ba.processRawData,[n,n.data,n.datapoints]);for(f=0;f<L.length;++f){n=L[f];var A=n.data,J=n.datapoints.format;if(!J){J=[];J.push({x:!0,number:!0,required:!0});J.push({y:!0,number:!0,required:!0});if(n.bars.show||n.lines.show&&
n.lines.fill)if(J.push({y:!0,number:!0,required:!1,defaultValue:0}),n.bars.horizontal)delete J[J.length-1].y,J[J.length-1].x=!0;n.datapoints.format=J}if(n.datapoints.pointsize==null){n.datapoints.pointsize=J.length;p=n.datapoints.pointsize;l=n.datapoints.points;insertSteps=n.lines.show&&n.lines.steps;n.xaxis.used=n.yaxis.used=!0;for(g=o=0;g<A.length;++g,o+=p){s=A[g];var u=s==null;if(!u)for(j=0;j<p;++j){k=s[j];if(t=J[j])if(t.number&&k!=null&&(k=+k,isNaN(k)?k=null:k==Infinity?k=d:k==-Infinity&&(k=-d)),
k==null&&(t.required&&(u=!0),t.defaultValue!=null))k=t.defaultValue;l[o+j]=k}if(u)for(j=0;j<p;++j)k=l[o+j],k!=null&&(t=J[j],t.x&&b(n.xaxis,k,k),t.y&&b(n.yaxis,k,k)),l[o+j]=null;else if(insertSteps&&o>0&&l[o-p]!=null&&l[o-p]!=l[o]&&l[o-p+1]!=l[o+1]){for(j=0;j<p;++j)l[o+p+j]=l[o+j];l[o+1]=l[o-p+1];o+=p}}}}for(f=0;f<L.length;++f)n=L[f],h(ba.processDatapoints,[n,n.datapoints]);for(f=0;f<L.length;++f){n=L[f];l=n.datapoints.points;p=n.datapoints.pointsize;s=o=c;u=A=e;for(g=0;g<l.length;g+=p)if(l[g]!=null)for(j=
0;j<p;++j)if(k=l[g+j],(t=J[j])&&!(k==d||k==-d))t.x&&(k<o&&(o=k),k>A&&(A=k)),t.y&&(k<s&&(s=k),k>u&&(u=k));n.bars.show&&(g=n.bars.align=="left"?0:-n.bars.barWidth/2,n.bars.horizontal?(s+=g,u+=g+n.bars.barWidth):(o+=g,A+=g+n.bars.barWidth));b(n.xaxis,o,A);b(n.yaxis,s,u)}a.each(q(),function(a,b){if(b.datamin==c)b.datamin=null;if(b.datamax==e)b.datamax=null})}function v(c,e){var d=document.createElement("canvas");d.className=e;d.width=U;d.height=Y;c||a(d).css({position:"absolute",left:0,top:0});a(d).appendTo(b);
d.getContext||(d=window.G_vmlCanvasManager.initElement(d));d.getContext("2d").save();return d}function B(){U=b.width();Y=b.height();if(U<=0||Y<=0)throw"Invalid dimensions for plot, width = "+U+", height = "+Y;}function o(a){if(a.width!=U)a.width=U;if(a.height!=Y)a.height=Y;a=a.getContext("2d");a.restore();a.save()}function n(a){function b(a){return a}var c,e,d=a.options.transform||b,f=a.options.inverseTransform;a.direction=="x"?(c=a.scale=ga/Math.abs(d(a.max)-d(a.min)),e=Math.min(d(a.max),d(a.min))):
(c=a.scale=ca/Math.abs(d(a.max)-d(a.min)),c=-c,e=Math.max(d(a.max),d(a.min)));a.p2c=d==b?function(a){return(a-e)*c}:function(a){return(d(a)-e)*c};a.c2p=f?function(a){return f(e+a/c)}:function(a){return e+a/c}}function p(c){function e(d,f){return a('<div style="position:absolute;top:-10000px;'+f+'font-size:smaller"><div class="'+c.direction+"Axis "+c.direction+c.n+'Axis">'+d.join("")+"</div></div>").appendTo(b)}var d=c.options,f,g=c.ticks||[],o=[],h,j=d.labelWidth;d=d.labelHeight;if(c.direction=="x"){if(j==
null&&(j=Math.floor(U/(g.length>0?g.length:1))),d==null){o=[];for(f=0;f<g.length;++f)(h=g[f].label)&&o.push('<div class="tickLabel" style="float:left;width:'+j+'px">'+h+"</div>");o.length>0&&(o.push('<div style="clear:left"></div>'),g=e(o,"width:10000px;"),d=g.height(),g.remove())}}else if(j==null||d==null){for(f=0;f<g.length;++f)(h=g[f].label)&&o.push('<div class="tickLabel">'+h+"</div>");o.length>0&&(g=e(o,""),j==null&&(j=g.children().width()),d==null&&(d=g.find("div.tickLabel").height()),g.remove())}j==
null&&(j=0);d==null&&(d=0);c.labelWidth=j;c.labelHeight=d}function A(b){var c=b.labelWidth,e=b.labelHeight,d=b.options.position,f=b.options.tickLength,g=w.grid.axisMargin,o=w.grid.labelMargin,h=b.direction=="x"?S:X,j=a.grep(h,function(a){return a&&a.options.position==d&&a.reserveSpace});a.inArray(b,j)==j.length-1&&(g=0);f==null&&(f="full");h=a.grep(h,function(a){return a&&a.reserveSpace});h=a.inArray(b,h)==0;!h&&f=="full"&&(f=5);isNaN(+f)||(o+=+f);b.direction=="x"?(e+=o,d=="bottom"?(I.bottom+=e+g,
b.box={top:Y-I.bottom,height:e}):(b.box={top:I.top+g,height:e},I.top+=e+g)):(c+=o,d=="left"?(b.box={left:I.left+g,width:c},I.left+=c+g):(I.right+=c+g,b.box={left:U-I.right,width:c}));b.position=d;b.tickLength=f;b.box.padding=o;b.innermost=h}function z(){var b,c=q();a.each(c,function(a,b){b.show=b.options.show;if(b.show==null)b.show=b.used;b.reserveSpace=b.show||b.options.reserveSpace;var c=b.options,e=+(c.min!=null?c.min:b.datamin),d=+(c.max!=null?c.max:b.datamax),f=d-e;if(f==0){if(f=d==0?1:0.01,
c.min==null&&(e-=f),c.max==null||c.min!=null)d+=f}else{var g=c.autoscaleMargin;g!=null&&(c.min==null&&(e-=f*g,e<0&&b.datamin!=null&&b.datamin>=0&&(e=0)),c.max==null&&(d+=f*g,d>0&&b.datamax!=null&&b.datamax<=0&&(d=0)))}b.min=e;b.max=d});allocatedAxes=a.grep(c,function(a){return a.reserveSpace});I.left=I.right=I.top=I.bottom=0;if(w.grid.show){a.each(allocatedAxes,function(b,c){l(c);var e=c.options.ticks,d=[];e==null||typeof e=="number"&&e>0?d=c.tickGenerator(c):e&&(d=a.isFunction(e)?e({min:c.min,max:c.max}):
e);var f;c.ticks=[];for(e=0;e<d.length;++e){var g=null,o=d[e];typeof o=="object"?(f=+o[0],o.length>1&&(g=o[1])):f=+o;g==null&&(g=c.tickFormatter(f,c));isNaN(f)||c.ticks.push({v:f,label:g})}d=c.ticks;if(c.options.autoscaleMargin&&d.length>0){if(c.options.min==null)c.min=Math.min(c.min,d[0].v);if(c.options.max==null&&d.length>1)c.max=Math.max(c.max,d[d.length-1].v)}p(c)});for(b=allocatedAxes.length-1;b>=0;--b)A(allocatedAxes[b]);var e=w.grid.minBorderMargin;if(e==null)for(b=e=0;b<L.length;++b)e=Math.max(e,
L[b].points.radius+L[b].points.lineWidth/2);for(var d in I)I[d]+=w.grid.borderWidth,I[d]=Math.max(e,I[d])}ga=U-I.left-I.right;ca=Y-I.bottom-I.top;a.each(c,function(a,b){n(b)});w.grid.show&&(a.each(allocatedAxes,function(a,b){b.direction=="x"?(b.box.left=I.left,b.box.width=ga):(b.box.top=I.top,b.box.height=ca)}),J());W()}function l(b){var e=b.options,d=(b.max-b.min)/(typeof e.ticks=="number"&&e.ticks>0?e.ticks:0.3*Math.sqrt(b.direction=="x"?U:Y)),f,g,o,h;if(e.mode=="time"){var j={second:1E3,minute:6E4,
hour:36E5,day:864E5,month:2592E6,year:525949.2*6E4};h=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];f=0;e.minTickSize!=null&&(f=typeof e.tickSize=="number"?e.tickSize:e.minTickSize[0]*j[e.minTickSize[1]]);for(g=0;g<h.length-1;++g)if(d<(h[g][0]*
j[h[g][1]]+h[g+1][0]*j[h[g+1][1]])/2&&h[g][0]*j[h[g][1]]>=f)break;f=h[g][0];o=h[g][1];o=="year"&&(g=Math.pow(10,Math.floor(Math.log(d/j.year)/Math.LN10)),h=d/j.year/g,f=h<1.5?1:h<3?2:h<7.5?5:10,f*=g);b.tickSize=e.tickSize||[f,o];g=function(a){var b=[],e=a.tickSize[0],d=a.tickSize[1],f=new Date(a.min),g=e*j[d];d=="second"&&f.setUTCSeconds(c(f.getUTCSeconds(),e));d=="minute"&&f.setUTCMinutes(c(f.getUTCMinutes(),e));d=="hour"&&f.setUTCHours(c(f.getUTCHours(),e));d=="month"&&f.setUTCMonth(c(f.getUTCMonth(),
e));d=="year"&&f.setUTCFullYear(c(f.getUTCFullYear(),e));f.setUTCMilliseconds(0);g>=j.minute&&f.setUTCSeconds(0);g>=j.hour&&f.setUTCMinutes(0);g>=j.day&&f.setUTCHours(0);g>=j.day*4&&f.setUTCDate(1);g>=j.year&&f.setUTCMonth(0);var o=0,h=Number.NaN,n;do if(n=h,h=f.getTime(),b.push(h),d=="month")if(e<1){f.setUTCDate(1);var l=f.getTime();f.setUTCMonth(f.getUTCMonth()+1);var p=f.getTime();f.setTime(h+o*j.hour+(p-l)*e);o=f.getUTCHours();f.setUTCHours(0)}else f.setUTCMonth(f.getUTCMonth()+e);else d=="year"?
f.setUTCFullYear(f.getUTCFullYear()+e):f.setTime(h+g);while(h<a.max&&h!=n);return b};f=function(b,c){var d=new Date(b);if(e.timeformat!=null)return a.plot.formatDate(d,e.timeformat,e.monthNames);var f=c.tickSize[0]*j[c.tickSize[1]],g=c.max-c.min,o=e.twelveHourClock?" %p":"";fmt=f<j.minute?"%h:%M:%S"+o:f<j.day?g<2*j.day?"%h:%M"+o:"%b %d %h:%M"+o:f<j.month?"%b %d":f<j.year?g<j.year?"%b":"%b %y":"%y";return a.plot.formatDate(d,fmt,e.monthNames)}}else{o=e.tickDecimals;var n=-Math.floor(Math.log(d)/Math.LN10);
o!=null&&n>o&&(n=o);g=Math.pow(10,-n);h=d/g;if(h<1.5)f=1;else if(h<3){if(f=2,h>2.25&&(o==null||n+1<=o))f=2.5,++n}else f=h<7.5?5:10;f*=g;if(e.minTickSize!=null&&f<e.minTickSize)f=e.minTickSize;b.tickDecimals=Math.max(0,o!=null?o:n);b.tickSize=e.tickSize||f;g=function(a){var b=[],e=c(a.min,a.tickSize),d=0,f=Number.NaN,g;do g=f,f=e+d*a.tickSize,b.push(f),++d;while(f<a.max&&f!=g);return b};f=function(a,b){return a.toFixed(b.tickDecimals)}}if(e.alignTicksWithAxis!=null){var l=(b.direction=="x"?S:X)[e.alignTicksWithAxis-
1];if(l&&l.used&&l!=b){g=g(b);if(g.length>0){if(e.min==null)b.min=Math.min(b.min,g[0]);if(e.max==null&&g.length>1)b.max=Math.max(b.max,g[g.length-1])}g=function(a){var b=[],c,e;for(e=0;e<l.ticks.length;++e)c=(l.ticks[e].v-l.min)/(l.max-l.min),c=a.min+c*(a.max-a.min),b.push(c);return b};if(b.mode!="time"&&e.tickDecimals==null&&(d=Math.max(0,-Math.floor(Math.log(d)/Math.LN10)+1),h=g(b),!(h.length>1&&/\..*0$/.test((h[1]-h[0]).toFixed(d)))))b.tickDecimals=d}}b.tickGenerator=g;b.tickFormatter=a.isFunction(e.tickFormatter)?
function(a,b){return""+e.tickFormatter(a,b)}:f}function E(){C.clearRect(0,0,U,Y);var a=w.grid;if(a.show&&a.backgroundColor)C.save(),C.translate(I.left,I.top),C.fillStyle=da(w.grid.backgroundColor,ca,0,"rgba(255, 255, 255, 0)"),C.fillRect(0,0,ga,ca),C.restore();a.show&&!a.aboveData&&M();for(var b=0;b<L.length;++b){h(ba.drawSeries,[C,L[b]]);var c=L[b];c.lines.show&&K(c);c.bars.show&&Q(c);c.points.show&&H(c)}h(ba.draw,[C]);a.show&&a.aboveData&&M()}function D(a,b){var c,e,d,f,g=q();for(i=0;i<g.length;++i)if(c=
g[i],c.direction==b&&(f=b+c.n+"axis",!a[f]&&c.n==1&&(f=b+"axis"),a[f])){e=a[f].from;d=a[f].to;break}a[f]||(c=b=="x"?S[0]:X[0],e=a[b+"1"],d=a[b+"2"]);e!=null&&d!=null&&e>d&&(f=e,e=d,d=f);return{from:e,to:d,axis:c}}function M(){var b;C.save();C.translate(I.left,I.top);var c=w.grid.markings;if(c){if(a.isFunction(c)){var e=N.getAxes();e.xmin=e.xaxis.min;e.xmax=e.xaxis.max;e.ymin=e.yaxis.min;e.ymax=e.yaxis.max;c=c(e)}for(b=0;b<c.length;++b){e=c[b];var d=D(e,"x"),f=D(e,"y");if(d.from==null)d.from=d.axis.min;
if(d.to==null)d.to=d.axis.max;if(f.from==null)f.from=f.axis.min;if(f.to==null)f.to=f.axis.max;if(!(d.to<d.axis.min||d.from>d.axis.max||f.to<f.axis.min||f.from>f.axis.max))if(d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max),f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),!(d.from==d.to&&f.from==f.to))d.from=d.axis.p2c(d.from),d.to=d.axis.p2c(d.to),f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),d.from==d.to||f.from==f.to?(C.beginPath(),C.strokeStyle=e.color||w.grid.markingsColor,
C.lineWidth=e.lineWidth||w.grid.markingsLineWidth,C.moveTo(d.from,f.from),C.lineTo(d.to,f.to),C.stroke()):(C.fillStyle=e.color||w.grid.markingsColor,C.fillRect(d.from,f.to,d.to-d.from,f.from-f.to))}}e=q();c=w.grid.borderWidth;for(d=0;d<e.length;++d){f=e[d];b=f.box;var g=f.tickLength,o,h,j,n;if(f.show&&f.ticks.length!=0){C.strokeStyle=f.options.tickColor||a.color.parse(f.options.color).scale("a",0.22).toString();C.lineWidth=1;f.direction=="x"?(o=0,h=g=="full"?f.position=="top"?0:ca:b.top-I.top+(f.position==
"top"?b.height:0)):(h=0,o=g=="full"?f.position=="left"?0:ga:b.left-I.left+(f.position=="left"?b.width:0));f.innermost||(C.beginPath(),j=n=0,f.direction=="x"?j=ga:n=ca,C.lineWidth==1&&(o=Math.floor(o)+0.5,h=Math.floor(h)+0.5),C.moveTo(o,h),C.lineTo(o+j,h+n),C.stroke());C.beginPath();for(b=0;b<f.ticks.length;++b){var l=f.ticks[b].v;j=n=0;l<f.min||l>f.max||g=="full"&&c>0&&(l==f.min||l==f.max)||(f.direction=="x"?(o=f.p2c(l),n=g=="full"?-ca:g,f.position=="top"&&(n=-n)):(h=f.p2c(l),j=g=="full"?-ga:g,f.position==
"left"&&(j=-j)),C.lineWidth==1&&(f.direction=="x"?o=Math.floor(o)+0.5:h=Math.floor(h)+0.5),C.moveTo(o,h),C.lineTo(o+j,h+n))}C.stroke()}}if(c)C.lineWidth=c,C.strokeStyle=w.grid.borderColor,C.strokeRect(-c/2,-c/2,ga+c,ca+c);C.restore()}function J(){b.find(".tickLabels").remove();for(var a=['<div class="tickLabels" style="font-size:smaller">'],c=q(),e=0;e<c.length;++e){var d=c[e],f=d.box;if(d.show){a.push('<div class="'+d.direction+"Axis "+d.direction+d.n+'Axis" style="color:'+d.options.color+'">');
for(var g=0;g<d.ticks.length;++g){var o=d.ticks[g];if(o.label&&!(o.v<d.min||o.v>d.max)){var h={},j;d.direction=="x"?(j="center",h.left=Math.round(I.left+d.p2c(o.v)-d.labelWidth/2),d.position=="bottom"?h.top=f.top+f.padding:h.bottom=Y-(f.top+f.height-f.padding)):(h.top=Math.round(I.top+d.p2c(o.v)-d.labelHeight/2),d.position=="left"?(h.right=U-(f.left+f.width-f.padding),j="right"):(h.left=f.left+f.padding,j="left"));h.width=d.labelWidth;j=["position:absolute","text-align:"+j];for(var n in h)j.push(n+
":"+h[n]+"px");a.push('<div class="tickLabel" style="'+j.join(";")+'">'+o.label+"</div>")}}a.push("</div>")}}a.push("</div>");b.append(a.join(""))}function K(a){function b(a,c,e,d,f){var g=a.points;a=a.pointsize;var o=null,h=null;C.beginPath();for(var j=a;j<g.length;j+=a){var n=g[j-a],l=g[j-a+1],p=g[j],k=g[j+1];if(!(n==null||p==null)){if(l<=k&&l<f.min){if(k<f.min)continue;n=(f.min-l)/(k-l)*(p-n)+n;l=f.min}else if(k<=l&&k<f.min){if(l<f.min)continue;p=(f.min-l)/(k-l)*(p-n)+n;k=f.min}if(l>=k&&l>f.max){if(k>
f.max)continue;n=(f.max-l)/(k-l)*(p-n)+n;l=f.max}else if(k>=l&&k>f.max){if(l>f.max)continue;p=(f.max-l)/(k-l)*(p-n)+n;k=f.max}if(n<=p&&n<d.min){if(p<d.min)continue;l=(d.min-n)/(p-n)*(k-l)+l;n=d.min}else if(p<=n&&p<d.min){if(n<d.min)continue;k=(d.min-n)/(p-n)*(k-l)+l;p=d.min}if(n>=p&&n>d.max){if(p>d.max)continue;l=(d.max-n)/(p-n)*(k-l)+l;n=d.max}else if(p>=n&&p>d.max){if(n>d.max)continue;k=(d.max-n)/(p-n)*(k-l)+l;p=d.max}(n!=o||l!=h)&&C.moveTo(d.p2c(n)+c,f.p2c(l)+e);o=p;h=k;C.lineTo(d.p2c(p)+c,f.p2c(k)+
e)}}C.stroke()}function c(a,b,e){var d=a.points;a=a.pointsize;for(var f=Math.min(Math.max(0,e.min),e.max),g=0,o=!1,h=1,j=0,n=0;;){if(a>0&&g>d.length+a)break;g+=a;var l=d[g-a],p=d[g-a+h],k=d[g],t=d[g+h];if(o){if(a>0&&l!=null&&k==null){n=g;a=-a;h=2;continue}if(a<0&&g==j+a){C.fill();o=!1;a=-a;h=1;g=j=n+a;continue}}if(!(l==null||k==null)){if(l<=k&&l<b.min){if(k<b.min)continue;p=(b.min-l)/(k-l)*(t-p)+p;l=b.min}else if(k<=l&&k<b.min){if(l<b.min)continue;t=(b.min-l)/(k-l)*(t-p)+p;k=b.min}if(l>=k&&l>b.max){if(k>
b.max)continue;p=(b.max-l)/(k-l)*(t-p)+p;l=b.max}else if(k>=l&&k>b.max){if(l>b.max)continue;t=(b.max-l)/(k-l)*(t-p)+p;k=b.max}o||(C.beginPath(),C.moveTo(b.p2c(l),e.p2c(f)),o=!0);if(p>=e.max&&t>=e.max)C.lineTo(b.p2c(l),e.p2c(e.max)),C.lineTo(b.p2c(k),e.p2c(e.max));else if(p<=e.min&&t<=e.min)C.lineTo(b.p2c(l),e.p2c(e.min)),C.lineTo(b.p2c(k),e.p2c(e.min));else{var s=l,A=k;if(p<=t&&p<e.min&&t>=e.min)l=(e.min-p)/(t-p)*(k-l)+l,p=e.min;else if(t<=p&&t<e.min&&p>=e.min)k=(e.min-p)/(t-p)*(k-l)+l,t=e.min;if(p>=
t&&p>e.max&&t<=e.max)l=(e.max-p)/(t-p)*(k-l)+l,p=e.max;else if(t>=p&&t>e.max&&p<=e.max)k=(e.max-p)/(t-p)*(k-l)+l,t=e.max;l!=s&&C.lineTo(b.p2c(s),e.p2c(p));C.lineTo(b.p2c(l),e.p2c(p));C.lineTo(b.p2c(k),e.p2c(t));k!=A&&(C.lineTo(b.p2c(k),e.p2c(t)),C.lineTo(b.p2c(A),e.p2c(t)))}}}}C.save();C.translate(I.left,I.top);C.lineJoin="round";var e=a.lines.lineWidth,d=a.shadowSize;if(e>0&&d>0){C.lineWidth=d;C.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(e/2+d/2),Math.cos(f)*(e/2+
d/2),a.xaxis,a.yaxis);C.lineWidth=d/2;b(a.datapoints,Math.sin(f)*(e/2+d/4),Math.cos(f)*(e/2+d/4),a.xaxis,a.yaxis)}C.lineWidth=e;C.strokeStyle=a.color;if(d=P(a.lines,a.color,0,ca))C.fillStyle=d,c(a.datapoints,a.xaxis,a.yaxis);e>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis);C.restore()}function H(a){function b(a,c,e,d,f,g,o,h){var j=a.points;a=a.pointsize;for(var n=0;n<j.length;n+=a){var l=j[n],p=j[n+1];if(!(l==null||l<g.min||l>g.max||p<o.min||p>o.max)){C.beginPath();l=g.p2c(l);p=o.p2c(p)+d;h=="circle"?C.arc(l,
p,c,0,f?Math.PI:Math.PI*2,!1):h(C,l,p,c,f);C.closePath();if(e)C.fillStyle=e,C.fill();C.stroke()}}}C.save();C.translate(I.left,I.top);var c=a.points.lineWidth,e=a.shadowSize,d=a.points.radius,f=a.points.symbol;if(c>0&&e>0)e/=2,C.lineWidth=e,C.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,d,null,e+e/2,!0,a.xaxis,a.yaxis,f),C.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,d,null,e/2,!0,a.xaxis,a.yaxis,f);C.lineWidth=c;C.strokeStyle=a.color;b(a.datapoints,d,P(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);C.restore()}
function V(a,b,c,e,d,f,g,o,h,j,n,l){var p,k,t,s;n?(s=k=t=!0,p=!1,n=c,c=b+e,d=b+d,a<n&&(b=a,a=n,n=b,p=!0,k=!1)):(p=k=t=!0,s=!1,n=a+e,a+=d,d=c,c=b,c<d&&(b=c,c=d,d=b,s=!0,t=!1));if(!(a<o.min||n>o.max||c<h.min||d>h.max)){if(n<o.min)n=o.min,p=!1;if(a>o.max)a=o.max,k=!1;if(d<h.min)d=h.min,s=!1;if(c>h.max)c=h.max,t=!1;n=o.p2c(n);d=h.p2c(d);a=o.p2c(a);c=h.p2c(c);if(g)j.beginPath(),j.moveTo(n,d),j.lineTo(n,c),j.lineTo(a,c),j.lineTo(a,d),j.fillStyle=g(d,c),j.fill();if(l>0&&(p||k||t||s))j.beginPath(),j.moveTo(n,
d+f),p?j.lineTo(n,c+f):j.moveTo(n,c+f),t?j.lineTo(a,c+f):j.moveTo(a,c+f),k?j.lineTo(a,d+f):j.moveTo(a,d+f),s?j.lineTo(n,d+f):j.moveTo(n,d+f),j.stroke()}}function Q(a){C.save();C.translate(I.left,I.top);C.lineWidth=a.bars.lineWidth;C.strokeStyle=a.color;var b=a.bars.align=="left"?0:-a.bars.barWidth/2;(function(b,c,e,d,f,g,o){var h=b.points;b=b.pointsize;for(var j=0;j<h.length;j+=b)h[j]!=null&&V(h[j],h[j+1],h[j+2],c,e,d,f,g,o,C,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,
0,a.bars.fill?function(b,c){return P(a.bars,a.color,b,c)}:null,a.xaxis,a.yaxis);C.restore()}function P(b,c,e,d){var f=b.fill;if(!f)return null;if(b.fillColor)return da(b.fillColor,e,d,c);b=a.color.parse(c);b.a=typeof f=="number"?f:0.4;b.normalize();return b.toString()}function W(){b.find(".legend").remove();if(w.legend.show){for(var c=[],e=!1,d=w.legend.labelFormatter,f,g,o=0;o<L.length;++o)if(f=L[o],g=f.label)o%w.legend.noColumns==0&&(e&&c.push("</tr>"),c.push("<tr>"),e=!0),d&&(g=d(g,f)),c.push('<td class="legendColorBox"><div style="border:1px solid '+
w.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+f.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+g+"</td>");e&&c.push("</tr>");if(c.length!=0)if(e='<table style="font-size:smaller;color:'+w.grid.color+'">'+c.join("")+"</table>",w.legend.container!=null)a(w.legend.container).html(e);else if(c="",d=w.legend.position,f=w.legend.margin,f[0]==null&&(f=[f,f]),d.charAt(0)=="n"?c+="top:"+(f[1]+I.top)+"px;":d.charAt(0)=="s"&&(c+="bottom:"+
(f[1]+I.bottom)+"px;"),d.charAt(1)=="e"?c+="right:"+(f[0]+I.right)+"px;":d.charAt(1)=="w"&&(c+="left:"+(f[0]+I.left)+"px;"),e=a('<div class="legend">'+e.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(b),w.legend.backgroundOpacity!=0){d=w.legend.backgroundColor;if(d==null)d=(d=w.grid.backgroundColor)&&typeof d=="string"?a.color.parse(d):a.color.extract(e,"background-color"),d.a=1,d=d.toString();f=e.children();a('<div style="position:absolute;width:'+f.width()+"px;height:"+
f.height()+"px;"+c+"background-color:"+d+';"> </div>').prependTo(e).css("opacity",w.legend.backgroundOpacity)}}}function ea(a){w.grid.hoverable&&ha("plothover",a,function(a){return a.hoverable!=!1})}function ka(a){w.grid.hoverable&&ha("plothover",a,function(){return!1})}function Z(a){ha("plotclick",a,function(a){return a.clickable!=!1})}function ha(a,c,e){var d=aa.offset(),f=c.pageX-d.left-I.left,g=c.pageY-d.top-I.top,o=s({left:f,top:g});o.pageX=c.pageX;o.pageY=c.pageY;c=w.grid.mouseActiveRadius;
var h=c*c+1,j=null,n,l;for(n=L.length-1;n>=0;--n)if(e(L[n])){var p=L[n],k=p.xaxis,t=p.yaxis,A=p.datapoints.points,q=p.datapoints.pointsize,J=k.c2p(f),u=t.c2p(g),H=c/k.scale,z=c/t.scale;if(k.options.inverseTransform)H=Number.MAX_VALUE;if(t.options.inverseTransform)z=Number.MAX_VALUE;if(p.lines.show||p.points.show)for(l=0;l<A.length;l+=q){var K=A[l],v=A[l+1];if(K!=null&&!(K-J>H||K-J<-H||v-u>z||v-u<-z))K=Math.abs(k.p2c(K)-f),v=Math.abs(t.p2c(v)-g),v=K*K+v*v,v<h&&(h=v,j=[n,l/q])}if(p.bars.show&&!j){k=
p.bars.align=="left"?0:-p.bars.barWidth/2;p=k+p.bars.barWidth;for(l=0;l<A.length;l+=q)if(K=A[l],v=A[l+1],t=A[l+2],K!=null&&(L[n].bars.horizontal?J<=Math.max(t,K)&&J>=Math.min(t,K)&&u>=v+k&&u<=v+p:J>=K+k&&J<=K+p&&u>=Math.min(t,v)&&u<=Math.max(t,v)))j=[n,l/q]}}j?(n=j[0],l=j[1],q=L[n].datapoints.pointsize,e={datapoint:L[n].datapoints.points.slice(l*q,(l+1)*q),dataIndex:l,series:L[n],seriesIndex:n}):e=null;if(e)e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+d.left+I.left),e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+
d.top+I.top);if(w.grid.autoHighlight){for(d=0;d<fa.length;++d)f=fa[d],f.auto==a&&(!e||!(f.series==e.series&&f.point[0]==e.datapoint[0]&&f.point[1]==e.datapoint[1]))&&G(f.series,f.point);e&&ja(e.series,e.datapoint,a)}b.trigger(a,[o,e])}function T(){ma||(ma=setTimeout(la,30))}function la(){ma=null;R.save();R.clearRect(0,0,U,Y);R.translate(I.left,I.top);var b,c;for(b=0;b<fa.length;++b)if(c=fa[b],c.series.bars.show)oa(c.series,c.point);else{var e=c.series,d=c.point;c=d[0];d=d[1];var f=e.xaxis,g=e.yaxis;
if(!(c<f.min||c>f.max||d<g.min||d>g.max)){var o=e.points.radius+e.points.lineWidth/2;R.lineWidth=o;R.strokeStyle=a.color.parse(e.color).scale("a",0.5).toString();o*=1.5;c=f.p2c(c);d=g.p2c(d);R.beginPath();e.points.symbol=="circle"?R.arc(c,d,o,0,2*Math.PI,!1):e.points.symbol(R,c,d,o,!1);R.closePath();R.stroke()}}R.restore();h(ba.drawOverlay,[R])}function ja(a,b,c){typeof a=="number"&&(a=L[a]);if(typeof b=="number"){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=na(a,b);if(e==
-1)fa.push({series:a,point:b,auto:c}),T();else if(!c)fa[e].auto=!1}function G(a,b){a==null&&b==null&&(fa=[],T());typeof a=="number"&&(a=L[a]);typeof b=="number"&&(b=a.data[b]);var c=na(a,b);c!=-1&&(fa.splice(c,1),T())}function na(a,b){for(var c=0;c<fa.length;++c){var e=fa[c];if(e.series==a&&e.point[0]==b[0]&&e.point[1]==b[1])return c}return-1}function oa(b,c){R.lineWidth=b.bars.lineWidth;R.strokeStyle=a.color.parse(b.color).scale("a",0.5).toString();var e=a.color.parse(b.color).scale("a",0.5).toString(),
d=b.bars.align=="left"?0:-b.bars.barWidth/2;V(c[0],c[1],c[2]||0,d,d+b.bars.barWidth,0,function(){return e},b.xaxis,b.yaxis,R,b.bars.horizontal,b.bars.lineWidth)}function da(b,c,e,d){if(typeof b=="string")return b;else{c=C.createLinearGradient(0,e,0,c);e=0;for(var f=b.colors.length;e<f;++e){var g=b.colors[e];if(typeof g!="string"){var o=a.color.parse(d);g.brightness!=null&&(o=o.scale("rgb",g.brightness));g.opacity!=null&&(o.a*=g.opacity);g=o.toString()}c.addColorStop(e/(f-1),g)}return c}}var L=[],
w={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,
tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,
borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},O=null,ia=null,aa=null,C=null,R=null,S=[],X=[],I={left:0,right:0,top:0,bottom:0},U=0,Y=0,ga=0,ca=0,ba={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},N=this;N.setData=k;N.setupGrid=z;N.draw=E;N.getPlaceholder=function(){return b};N.getCanvas=function(){return O};
N.getPlotOffset=function(){return I};N.width=function(){return ga};N.height=function(){return ca};N.offset=function(){var a=aa.offset();a.left+=I.left;a.top+=I.top;return a};N.getData=function(){return L};N.getAxes=function(){var b={};a.each(S.concat(X),function(a,c){c&&(b[c.direction+(c.n!=1?c.n:"")+"axis"]=c)});return b};N.getXAxes=function(){return S};N.getYAxes=function(){return X};N.c2p=s;N.p2c=function(a){var b={},c,e,d;for(c=0;c<S.length;++c)if((e=S[c])&&e.used)if(d="x"+e.n,a[d]==null&&e.n==
1&&(d="x"),a[d]!=null){b.left=e.p2c(a[d]);break}for(c=0;c<X.length;++c)if((e=X[c])&&e.used)if(d="y"+e.n,a[d]==null&&e.n==1&&(d="y"),a[d]!=null){b.top=e.p2c(a[d]);break}return b};N.getOptions=function(){return w};N.highlight=ja;N.unhighlight=G;N.triggerRedrawOverlay=T;N.pointOffset=function(a){return{left:parseInt(S[j(a,"x")-1].p2c(+a.x)+I.left),top:parseInt(X[j(a,"y")-1].p2c(+a.y)+I.top)}};N.shutdown=function(){ma&&clearTimeout(ma);aa.unbind("mousemove",ea);aa.unbind("mouseleave",ka);aa.unbind("click",
Z);h(ba.shutdown,[aa])};N.resize=function(){B();o(O);o(ia)};N.hooks=ba;(function(){for(var b=0;b<g.length;++b){var c=g[b];c.init(N);c.options&&a.extend(!0,w,c.options)}})(N);(function(b){a.extend(!0,w,b);if(w.xaxis.color==null)w.xaxis.color=w.grid.color;if(w.yaxis.color==null)w.yaxis.color=w.grid.color;if(w.xaxis.tickColor==null)w.xaxis.tickColor=w.grid.tickColor;if(w.yaxis.tickColor==null)w.yaxis.tickColor=w.grid.tickColor;if(w.grid.borderColor==null)w.grid.borderColor=w.grid.color;if(w.grid.tickColor==
null)w.grid.tickColor=a.color.parse(w.grid.color).scale("a",0.22).toString();for(b=0;b<Math.max(1,w.xaxes.length);++b)w.xaxes[b]=a.extend(!0,{},w.xaxis,w.xaxes[b]);for(b=0;b<Math.max(1,w.yaxes.length);++b)w.yaxes[b]=a.extend(!0,{},w.yaxis,w.yaxes[b]);if(w.xaxis.noTicks&&w.xaxis.ticks==null)w.xaxis.ticks=w.xaxis.noTicks;if(w.yaxis.noTicks&&w.yaxis.ticks==null)w.yaxis.ticks=w.yaxis.noTicks;if(w.x2axis)w.xaxes[1]=a.extend(!0,{},w.xaxis,w.x2axis),w.xaxes[1].position="top";if(w.y2axis)w.yaxes[1]=a.extend(!0,
{},w.yaxis,w.y2axis),w.yaxes[1].position="right";if(w.grid.coloredAreas)w.grid.markings=w.grid.coloredAreas;if(w.grid.coloredAreasColor)w.grid.markingsColor=w.grid.coloredAreasColor;w.lines&&a.extend(!0,w.series.lines,w.lines);w.points&&a.extend(!0,w.series.points,w.points);w.bars&&a.extend(!0,w.series.bars,w.bars);if(w.shadowSize!=null)w.series.shadowSize=w.shadowSize;for(b=0;b<w.xaxes.length;++b)u(S,b+1).options=w.xaxes[b];for(b=0;b<w.yaxes.length;++b)u(X,b+1).options=w.yaxes[b];for(var c in ba)w.hooks[c]&&
w.hooks[c].length&&(ba[c]=ba[c].concat(w.hooks[c]));h(ba.processOptions,[w])})(d);(function(){var c;c=b.children("canvas.base");var e=b.children("canvas.overlay");c.length==0||e==0?(b.html(""),b.css({padding:0}),b.css("position")=="static"&&b.css("position","relative"),B(),O=v(!0,"base"),ia=v(!1,"overlay"),c=!1):(O=c.get(0),ia=e.get(0),c=!0);C=O.getContext("2d");R=ia.getContext("2d");aa=a([ia,O]);c&&(b.data("plot").shutdown(),N.resize(),R.clearRect(0,0,U,Y),aa.unbind(),b.children().not([O,ia]).remove());
b.data("plot",N)})();k(e);z();E();w.grid.hoverable&&(aa.mousemove(ea),aa.mouseleave(ka));w.grid.clickable&&aa.click(Z);h(ba.bindEvents,[aa]);var fa=[],ma=null}function c(a,c){return c*Math.floor(a/c)}a.plot=function(b,c,f){return new d(a(b),c,f,a.plot.plugins)};a.plot.version="0.7";a.plot.plugins=[];a.plot.formatDate=function(a,c,d){var g=function(a){a=""+a;return a.length==1?"0"+a:a},h=[],k=!1,j=!1,q=a.getUTCHours(),s=q<12;d==null&&(d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct",
"Nov","Dec"]);c.search(/%p|%P/)!=-1&&(q>12?q-=12:q==0&&(q=12));for(var u=0;u<c.length;++u){var t=c.charAt(u);if(k){switch(t){case "h":t=""+q;break;case "H":t=g(q);break;case "M":t=g(a.getUTCMinutes());break;case "S":t=g(a.getUTCSeconds());break;case "d":t=""+a.getUTCDate();break;case "m":t=""+(a.getUTCMonth()+1);break;case "y":t=""+a.getUTCFullYear();break;case "b":t=""+d[a.getUTCMonth()];break;case "p":t=s?"am":"pm";break;case "P":t=s?"AM":"PM";break;case "0":t="",j=!0}t&&j&&(t=g(t),j=!1);h.push(t);
j||(k=!1)}else t=="%"?k=!0:h.push(t)}return h.join("")}})(jQuery);
(function(a){var d={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,offset:{top:0,left:"auto"},stroke:{color:"#FFF",width:1},label:{show:"auto",formatter:function(a,b){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+b.color+';">'+a+"<br/>"+Math.round(b.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};a.plot.plugins.push({init:function(c){function b(b){E||
(E=!0,u=b.getCanvas(),t=a(u).parent(),d=b.getOptions(),b.setData(e(b.getData())))}function e(a){for(var b=0;b<a.length;++b)if(typeof a[b].data=="number")a[b].data=[[1,a[b].data]];else if(typeof a[b].data=="undefined"||typeof a[b].data[0]=="undefined"){if(typeof a[b].data!="undefined"&&typeof a[b].data.label!="undefined")a[b].label=a[b].data.label;a[b].data=[[1,0]]}b=a;for(var c=0;c<b.length;++c){var e=parseFloat(b[c].data[0][1]);e&&(n+=e)}c=b=0;e=d.series.pie.combine.color;for(var f=[],g=0;g<a.length;++g)if(a[g].data[0][1]=
parseFloat(a[g].data[0][1]),a[g].data[0][1]||(a[g].data[0][1]=0),a[g].data[0][1]/n<=d.series.pie.combine.threshold){if(b+=a[g].data[0][1],c++,!e)e=a[g].color}else f.push({data:[[1,a[g].data[0][1]]],color:a[g].color,label:a[g].label,angle:a[g].data[0][1]*Math.PI*2/n,percent:a[g].data[0][1]/n*100});c>0&&f.push({data:[[1,b]],color:e,label:d.series.pie.combine.label,angle:b*Math.PI*2/n,percent:b/n*100});return f}function f(b,c){function e(){ctx.clearRect(0,0,u.width,u.height);t.children().filter(".pieLabel, .pieLabelBackground").remove()}
function f(){var a=d.series.pie.radius>1?d.series.pie.radius:v*d.series.pie.radius;if(!(a>=u.width/2-5||a*d.series.pie.tilt>=u.height/2-15||a<=10)){ctx.save();ctx.translate(5,15);ctx.globalAlpha=0.02;ctx.fillStyle="#000";ctx.translate(B,o);ctx.scale(1,d.series.pie.tilt);for(var b=1;b<=10;b++)ctx.beginPath(),ctx.arc(0,0,a,0,Math.PI*2,!1),ctx.fill(),a-=b;ctx.restore()}}function h(){function b(c,d,g){if(!(c<=0||isNaN(c)))g?ctx.fillStyle=d:(ctx.strokeStyle=d,ctx.lineJoin="round"),ctx.beginPath(),Math.abs(c-
Math.PI*2)>1.0E-9?ctx.moveTo(0,0):a.browser.msie&&(c-=1.0E-4),ctx.arc(0,0,e,f,f+c,!1),ctx.closePath(),f+=c,g?ctx.fill():ctx.stroke()}function c(){function b(c,e,g){if(c.data[0][1]!=0){var j=d.legend.labelFormatter,h=d.series.pie.label.formatter;j=j?j(c.label,c):c.label;h&&(j=h(j,c));h=(e+c.angle+e)/2;e=B+Math.round(Math.cos(h)*f);h=o+Math.round(Math.sin(h)*f)*d.series.pie.tilt;t.append('<span class="pieLabel" id="pieLabel'+g+'" style="position:absolute;top:'+h+"px;left:"+e+'px;">'+j+"</span>");g=
t.children("#pieLabel"+g);j=h-g.height()/2;e-=g.width()/2;g.css("top",j);g.css("left",e);if(0-j>0||0-e>0||u.height-(j+g.height())<0||u.width-(e+g.width())<0)p=!0;if(d.series.pie.label.background.opacity!=0){h=d.series.pie.label.background.color;if(h==null)h=c.color;a('<div class="pieLabelBackground" style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+("top:"+j+"px;left:"+e+"px;")+"background-color:"+h+';"> </div>').insertBefore(g).css("opacity",d.series.pie.label.background.opacity)}}}
for(var e=startAngle,f=d.series.pie.label.radius>1?d.series.pie.label.radius:v*d.series.pie.label.radius,g=0;g<j.length;++g)j[g].percent>=d.series.pie.label.threshold*100&&b(j[g],e,g),e+=j[g].angle}startAngle=Math.PI*d.series.pie.startAngle;var e=d.series.pie.radius>1?d.series.pie.radius:v*d.series.pie.radius;ctx.save();ctx.translate(B,o);ctx.scale(1,d.series.pie.tilt);ctx.save();for(var f=startAngle,n=0;n<j.length;++n)j[n].startAngle=f,b(j[n].angle,j[n].color,!0);ctx.restore();ctx.save();ctx.lineWidth=
d.series.pie.stroke.width;f=startAngle;for(n=0;n<j.length;++n)b(j[n].angle,d.series.pie.stroke.color,!1);ctx.restore();g(ctx);d.series.pie.label.show&&c();ctx.restore()}if(t){ctx=c;l=t.children().filter(".legend").children().width();v=Math.min(u.width,u.height/d.series.pie.tilt)/2;o=u.height/2+d.series.pie.offset.top;B=u.width/2;d.series.pie.offset.left=="auto"?d.legend.position.match("w")?B+=l/2:B-=l/2:B+=d.series.pie.offset.left;B<v?B=v:B>u.width-v&&(B=u.width-v);for(var j=b.getData(),n=0;p&&n<
A;)p=!1,n>0&&(v*=z),n+=1,e(),d.series.pie.tilt<=0.8&&f(),h();n>=A&&(e(),t.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>'));b.setSeries&&b.insertLegend&&(b.setSeries(j),b.insertLegend())}}function g(a){if(d.series.pie.innerRadius>0)a.save(),innerRadius=d.series.pie.innerRadius>1?d.series.pie.innerRadius:v*d.series.pie.innerRadius,a.globalCompositeOperation="destination-out",a.beginPath(),a.fillStyle=d.series.pie.stroke.color,a.arc(0,0,innerRadius,0,Math.PI*
2,!1),a.fill(),a.closePath(),a.restore(),a.save(),a.beginPath(),a.strokeStyle=d.series.pie.stroke.color,a.arc(0,0,innerRadius,0,Math.PI*2,!1),a.stroke(),a.closePath(),a.restore()}function h(a){j("plothover",a)}function k(a){j("plotclick",a)}function j(a,b){var e=c.offset(),f=parseInt(b.pageX-e.left);a:{e=parseInt(b.pageY-e.top);var g=c.getData(),j=c.getOptions();j=j.series.pie.radius>1?j.series.pie.radius:v*j.series.pie.radius;for(var h=0;h<g.length;++h){var n=g[h];if(n.pie.show){ctx.save();ctx.beginPath();
ctx.moveTo(0,0);ctx.arc(0,0,j,n.startAngle,n.startAngle+n.angle,!1);ctx.closePath();x=f-B;y=e-o;if(ctx.isPointInPath){if(ctx.isPointInPath(f-B,e-o)){ctx.restore();f={datapoint:[n.percent,n.data],dataIndex:0,series:n,seriesIndex:h};break a}}else{p1X=j*Math.cos(n.startAngle);p1Y=j*Math.sin(n.startAngle);p2X=j*Math.cos(n.startAngle+n.angle/4);p2Y=j*Math.sin(n.startAngle+n.angle/4);p3X=j*Math.cos(n.startAngle+n.angle/2);p3Y=j*Math.sin(n.startAngle+n.angle/2);p4X=j*Math.cos(n.startAngle+n.angle/1.5);p4Y=
j*Math.sin(n.startAngle+n.angle/1.5);p5X=j*Math.cos(n.startAngle+n.angle);p5Y=j*Math.sin(n.startAngle+n.angle);arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]];arrPoint=[x,y];for(var l=!1,p=-1,k=arrPoly.length,s=k-1;++p<k;s=p)(arrPoly[p][1]<=arrPoint[1]&&arrPoint[1]<arrPoly[s][1]||arrPoly[s][1]<=arrPoint[1]&&arrPoint[1]<arrPoly[p][1])&&arrPoint[0]<(arrPoly[s][0]-arrPoly[p][0])*(arrPoint[1]-arrPoly[p][1])/(arrPoly[s][1]-arrPoly[p][1])+arrPoly[p][0]&&(l=!l);if(l){ctx.restore();f={datapoint:[n.percent,
n.data],dataIndex:0,series:n,seriesIndex:h};break a}}ctx.restore()}}f=null}if(d.grid.autoHighlight)for(e=0;e<D.length;++e)if(g=D[e],g.auto==a&&!(f&&g.series==f.series))g=g.series,g==null&&(D=[],c.triggerRedrawOverlay()),typeof g=="number"&&(g=series[g]),g=q(g),g!=-1&&(D.splice(g,1),c.triggerRedrawOverlay());if(f)if(e=f.series,typeof e=="number"&&(e=series[e]),g=q(e),g==-1)D.push({series:e,auto:a}),c.triggerRedrawOverlay();else if(!a)D[g].auto=!1;t.trigger(a,[{pageX:b.pageX,pageY:b.pageY},f])}function q(a){for(var b=
0;b<D.length;++b)if(D[b].series==a)return b;return-1}function s(a,b){function c(a){if(!(a.angle<=0||isNaN(a.angle)))b.fillStyle="rgba(255, 255, 255, "+e.series.pie.highlight.opacity+")",b.beginPath(),Math.abs(a.angle-Math.PI*2)>1.0E-9&&b.moveTo(0,0),b.arc(0,0,d,a.startAngle,a.startAngle+a.angle,!1),b.closePath(),b.fill()}var e=a.getOptions(),d=e.series.pie.radius>1?e.series.pie.radius:v*e.series.pie.radius;b.save();b.translate(B,o);b.scale(1,e.series.pie.tilt);for(i=0;i<D.length;++i)c(D[i].series);
g(b);b.restore()}var u=null,t=null,v=null,B=null,o=null,n=0,p=!0,A=10,z=0.95,l=0,E=!1,D=[];c.hooks.processOptions.push(function(a,c){if(c.series.pie.show){c.grid.show=!1;if(c.series.pie.label.show=="auto")c.series.pie.label.show=c.legend.show?!1:!0;if(c.series.pie.radius=="auto")c.series.pie.radius=c.series.pie.label.show?0.75:1;if(c.series.pie.tilt>1)c.series.pie.tilt=1;if(c.series.pie.tilt<0)c.series.pie.tilt=0;a.hooks.processDatapoints.push(b);a.hooks.drawOverlay.push(s);a.hooks.draw.push(f)}});
c.hooks.bindEvents.push(function(a,b){var c=a.getOptions();c.series.pie.show&&c.grid.hoverable&&b.unbind("mousemove").mousemove(h);c.series.pie.show&&c.grid.clickable&&b.unbind("click").click(k)})},options:d,name:"pie",version:"1.0"})})(jQuery);
(function(a){a.plot.plugins.push({init:function(a){function c(a,c){var d;for(d=0;d<c.length;++d)if(c[d].id==a.fillBetween)return c[d];if(typeof a.fillBetween=="number"){d=a.fillBetween;if(d<0||d>=c.length)return null;return c[d]}return null}a.hooks.processDatapoints.push(function(a,e,d){if(e.fillBetween!=null){var g=c(e,a.getData());if(g){a=d.pointsize;var h=d.points,k=g.datapoints.pointsize;g=g.datapoints.points;for(var j=[],q,s,u,t,v=e.lines.show,B=a>2&&d.format[2].y,o=v&&e.lines.steps,n=!0,p=0,
A=0,z;;){if(p>=h.length)break;z=j.length;if(h[p]==null){for(m=0;m<a;++m)j.push(h[p+m]);p+=a}else if(A>=g.length){if(!v)for(m=0;m<a;++m)j.push(h[p+m]);p+=a}else if(g[A]==null){for(m=0;m<a;++m)j.push(null);n=!0;A+=k}else{q=h[p];s=h[p+1];e=g[A];u=g[A+1];t=0;if(q==e){for(m=0;m<a;++m)j.push(h[p+m]);t=u;p+=a;A+=k}else if(q>e){if(v&&p>0&&h[p-a]!=null){q=s+(h[p-a+1]-s)*(e-q)/(h[p-a]-q);j.push(e);j.push(q);for(m=2;m<a;++m)j.push(h[p+m]);t=u}A+=k}else{if(n&&v){p+=a;continue}for(m=0;m<a;++m)j.push(h[p+m]);v&&
A>0&&g[A-k]!=null&&(t=u+(g[A-k+1]-u)*(q-e)/(g[A-k]-e));p+=a}n=!1;z!=j.length&&B&&(j[z+2]=t)}if(o&&z!=j.length&&z>0&&j[z]!=null&&j[z]!=j[z-a]&&j[z+1]!=j[z-a+1]){for(m=0;m<a;++m)j[z+a+m]=j[z+m];j[z+1]=j[z-a+1]}}d.points=j}}})},options:{series:{fillBetween:null}},name:"fillbetween",version:"1.0"})})(jQuery);
(function(a){a.extend({tablesorter:new function(){function c(a,c){b(a+","+((new Date).getTime()-c.getTime())+"ms")}function b(a){typeof console!="undefined"&&typeof console.debug!="undefined"?console.log(a):alert(a)}function e(c,e){if(c.config.debug)var g="";if(c.tBodies.length!=0){var o=c.tBodies[0].rows;if(o[0])for(var j=[],n=o[0].cells.length,p=0;p<n;p++){var k=!1;a.metadata&&a(e[p]).metadata()&&a(e[p]).metadata().sorter?k=d(a(e[p]).metadata().sorter):c.config.headers[p]&&c.config.headers[p].sorter&&
(k=d(c.config.headers[p].sorter));if(!k)a:{k=c;for(var t=o,s=-1,q=p,u=A.length,z=!1,v=!1,B=!0;v==""&&B;)s++,t[s]?(z=t[s].cells[q],v=a.trim(h(k.config,z)),k.config.debug&&b("Checking if value was empty on row:"+s)):B=!1;for(t=1;t<u;t++)if(A[t].is(v,k,z)){k=A[t];break a}k=A[0]}c.config.debug&&(g+="column:"+p+" parser:"+k.id+"\n");j.push(k)}c.config.debug&&b(g);return j}}function d(a){for(var b=A.length,c=0;c<b;c++)if(A[c].id.toLowerCase()==a.toLowerCase())return A[c];return!1}function g(b){if(b.config.debug)var e=
new Date;for(var d=b.tBodies[0]&&b.tBodies[0].rows.length||0,f=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||0,g=b.config.parsers,o={row:[],normalized:[]},j=0;j<d;++j){var n=a(b.tBodies[0].rows[j]),p=[];if(n.hasClass(b.config.cssChildRow))o.row[o.row.length-1]=o.row[o.row.length-1].add(n);else{o.row.push(n);for(var k=0;k<f;++k)p.push(g[k].format(h(b.config,n[0].cells[k]),b,n[0].cells[k]));p.push(o.normalized.length);o.normalized.push(p)}}b.config.debug&&c("Building cache for "+d+" rows:",
e);return o}function h(b,c){var e="";if(!c)return"";if(!b.supportsTextContent)b.supportsTextContent=c.textContent||!1;return e=b.textExtraction=="simple"?b.supportsTextContent?c.textContent:c.childNodes[0]&&c.childNodes[0].hasChildNodes()?c.childNodes[0].innerHTML:c.innerHTML:typeof b.textExtraction=="function"?b.textExtraction(c):a(c).text()}function k(b,e){if(b.config.debug)var d=new Date;for(var f=e.row,g=e.normalized,o=g.length,j=g[0].length-1,h=a(b.tBodies[0]),n=[],p=0;p<o;p++){var k=g[p][j];
n.push(f[k]);if(!b.config.appender)for(var t=f[k].length,s=0;s<t;s++)h[0].appendChild(f[k][s])}b.config.appender&&b.config.appender(b,n);n=null;b.config.debug&&c("Rebuilt table:",d);u(b);setTimeout(function(){a(b).trigger("sortEnd")},0)}function j(e){if(e.config.debug)var d=new Date;var f=q(e);$tableHeaders=a(e.config.selectorHeaders,e).each(function(b){this.column=f[this.parentNode.rowIndex+"-"+this.cellIndex];this.count=this.order=typeof e.config.sortInitialOrder!="Number"?e.config.sortInitialOrder.toLowerCase()==
"desc"?1:0:e.config.sortInitialOrder==1?1:0;var c;c=a.metadata&&a(this).metadata().sorter===!1?!0:!1;c||(c=e.config.headers[b]&&e.config.headers[b].sorter===!1?!0:!1);if(c)this.sortDisabled=!0;if(s(e,b))this.order=this.lockedOrder=s(e,b);this.sortDisabled||(c=a(this).addClass(e.config.cssHeader),e.config.onRenderHeader&&e.config.onRenderHeader.apply(c));e.config.headerList[b]=this});e.config.debug&&(c("Built headers:",d),b($tableHeaders));return $tableHeaders}function q(a){var b=[],c={};a=a.getElementsByTagName("THEAD")[0].getElementsByTagName("TR");
for(var e=0;e<a.length;e++)for(var d=a[e].cells,f=0;f<d.length;f++){var g=d[f],o=g.parentNode.rowIndex,j=o+"-"+g.cellIndex,h=g.rowSpan||1;g=g.colSpan||1;var n;typeof b[o]=="undefined"&&(b[o]=[]);for(var p=0;p<b[o].length+1;p++)if(typeof b[o][p]=="undefined"){n=p;break}c[j]=n;for(p=o;p<o+h;p++){typeof b[p]=="undefined"&&(b[p]=[]);j=b[p];for(var k=n;k<n+g;k++)j[k]="x"}}return c}function s(a,b){if(a.config.headers[b]&&a.config.headers[b].lockedOrder)return a.config.headers[b].lockedOrder;return!1}function u(a){for(var b=
a.config.widgets,c=b.length,e=0;e<c;e++)t(b[e]).format(a)}function t(a){for(var b=z.length,c=0;c<b;c++)if(z[c].id.toLowerCase()==a.toLowerCase())return z[c]}function v(a,b){for(var c=b.length,e=0;e<c;e++)if(b[e][0]==a)return!0;return!1}function B(b,c,e,d){c.removeClass(d[0]).removeClass(d[1]);var f=[];c.each(function(){this.sortDisabled||(f[this.column]=a(this))});b=e.length;for(c=0;c<b;c++)f[e[c][0]].addClass(d[e[c][1]])}function o(b){if(b.config.widthFixed){var c=a("<colgroup>");a("tr:first td",
b.tBodies[0]).each(function(){c.append(a("<col>").css("width",a(this).width()))});a(b).prepend(c)}}function n(a,b,e){if(a.config.debug)var d=new Date;for(var f="var sortWrapper = function(a,b) {",g=b.length,o=0;o<g;o++){var j=b[o][0],h=b[o][1];j=a.config.parsers[j].type=="text"?h==0?p("text","asc",j):p("text","desc",j):h==0?p("numeric","asc",j):p("numeric","desc",j);var n="e"+o;f+="var "+n+" = "+j;f+="if("+n+") { return "+n+"; } ";f+="else { "}o=e.normalized[0].length-1;f+="return a["+o+"]-b["+o+
"];";for(o=0;o<g;o++)f+="}; ";f+="return 0; ";f+="}; ";a.config.debug&&c("Evaling expression:"+f,new Date);eval(f);e.normalized.sort(sortWrapper);a.config.debug&&c("Sorting on "+b.toString()+" and dir "+h+" time:",d);return e}function p(a,b,c){var e="a["+c+"]";c="b["+c+"]";if(a=="text"&&b=="asc")return"("+e+" == "+c+" ? 0 : ("+e+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+c+") ? -1 : 1 )));";else if(a=="text"&&b=="desc")return"("+e+" == "+c+" ? 0 : ("+
e+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : ("+c+" < "+e+") ? -1 : 1 )));";else if(a=="numeric"&&b=="asc")return"("+e+" === null && "+c+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+c+"));";else if(a=="numeric"&&b=="desc")return"("+e+" === null && "+c+" === null) ? 0 :("+e+" === null ? Number.POSITIVE_INFINITY : ("+c+" === null ? Number.NEGATIVE_INFINITY : "+c+" - "+e+"));"}var A=[],z=
[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=c;this.construct=function(b){return this.each(function(){if(this.tHead&&
this.tBodies){var c,d,f,p;this.config={};p=a.extend(this.config,a.tablesorter.defaults,b);c=a(this);a.data(this,"tablesorter",p);d=j(this);this.config.parsers=e(this,d);f=g(this);var s=[p.cssDesc,p.cssAsc];o(this);d.click(function(b){var e=c[0].tBodies[0]&&c[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&e>0){c.trigger("sortStart");a(this);e=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(b[p.sortMultiSortKey])if(v(e,p.sortList))for(b=0;b<p.sortList.length;b++){var g=
p.sortList[b],o=p.headerList[g[0]];if(g[0]==e)o.count=g[1],o.count++,g[1]=o.count%2}else p.sortList.push([e,this.order]);else{p.sortList=[];if(p.sortForce!=null){g=p.sortForce;for(b=0;b<g.length;b++)g[b][0]!=e&&p.sortList.push(g[b])}p.sortList.push([e,this.order])}setTimeout(function(){B(c[0],d,p.sortList,s);k(c[0],n(c[0],p.sortList,f))},1);return!1}}).mousedown(function(){if(p.cancelSelection)return this.onselectstart=function(){return!1},!1});c.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=
e(a,d);f=g(a)},1)}).bind("updateCell",function(a,b){var c=this.config,e=[b.parentNode.rowIndex-1,b.cellIndex];f.normalized[e[0]][e[1]]=c.parsers[e[1]].format(h(c,b),b)}).bind("sorton",function(b,c){a(this).trigger("sortStart");p.sortList=c;for(var e=p.sortList,g=this.config,o=e.length,j=0;j<o;j++){var h=e[j],l=g.headerList[h[0]];l.count=h[1];l.count++}B(this,d,e,s);k(this,n(this,e,f))}).bind("appendCache",function(){k(this,f)}).bind("applyWidgetId",function(a,b){t(b).format(this)}).bind("applyWidgets",
function(){u(this)});if(a.metadata&&a(this).metadata()&&a(this).metadata().sortlist)p.sortList=a(this).metadata().sortlist;p.sortList.length>0&&c.trigger("sorton",[p.sortList]);u(this)}})};this.addParser=function(a){for(var b=A.length,c=!0,e=0;e<b;e++)A[e].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&A.push(a)};this.addWidget=function(a){z.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(b){return/^[-+]?\d*$/.test(a.trim(b.replace(/[,.']/g,
"")))};this.clearTableBody=function(b){a.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(b.tBodies[0]):b.tBodies[0].innerHTML=""}}});a.fn.extend({tablesorter:a.tablesorter.construct});var d=a.tablesorter;d.addParser({id:"text",is:function(){return!0},format:function(c){return a.trim(c.toLocaleLowerCase())},type:"text"});d.addParser({id:"digit",is:function(c,b){return a.tablesorter.isDigit(c,b.config)},format:function(c){return a.tablesorter.formatFloat(c)},type:"numeric"});
d.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(c){return a.tablesorter.formatFloat(c.replace(RegExp(/[\u00a3$\u20ac]/g),""))},type:"numeric"});d.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(c){c=c.split(".");for(var b="",e=c.length,d=0;d<e;d++){var g=c[d];b+=g.length==2?"0"+g:g}return a.tablesorter.formatFloat(b)},type:"numeric"});d.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},
format:function(a){return jQuery.trim(a.replace(RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});d.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(c){return a.tablesorter.formatFloat(c!=""?(new Date(c.replace(RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});d.addParser({id:"percent",is:function(c){return/\%$/.test(a.trim(c))},format:function(c){return a.tablesorter.formatFloat(c.replace(RegExp(/%/g),""))},type:"numeric"});d.addParser({id:"usLongDate",
is:function(a){return a.match(RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(c){return a.tablesorter.formatFloat((new Date(c)).getTime())},type:"numeric"});d.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(c,b){var e=b.config;c=c.replace(/\-/g,"/");if(e.dateFormat=="us")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");else if(e.dateFormat==
"uk")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if(e.dateFormat=="dd/mm/yy"||e.dateFormat=="dd-mm-yy")c=c.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return a.tablesorter.formatFloat((new Date(c)).getTime())},type:"numeric"});d.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(c){return a.tablesorter.formatFloat((new Date("2000/01/01 "+c)).getTime())},type:"numeric"});d.addParser({id:"metadata",
is:function(){return!1},format:function(c,b,e){c=b.config;c=!c.parserMetadataName?"sortValue":c.parserMetadataName;return a(e).metadata()[c]},type:"numeric"});d.addWidget({id:"zebra",format:function(c){if(c.config.debug)var b=new Date;var e,d=-1,g;a("tr:visible",c.tBodies[0]).each(function(){e=a(this);e.hasClass(c.config.cssChildRow)||d++;g=d%2==0;e.removeClass(c.config.widgetZebra.css[g?0:1]).addClass(c.config.widgetZebra.css[g?1:0])});c.config.debug&&a.tablesorter.benchmark("Applying Zebra widget",
b)}})})(jQuery);
(function(a){a.fn.hoverIntent=function(d,c){var b={sensitivity:7,interval:100,timeout:0};b=a.extend(b,c?{over:d,out:c}:d);var e,f,g,h,k=function(a){e=a.pageX;f=a.pageY},j=function(c,d){d.hoverIntent_t=clearTimeout(d.hoverIntent_t);if(Math.abs(g-e)+Math.abs(h-f)<b.sensitivity)return a(d).unbind("mousemove",k),d.hoverIntent_s=1,b.over.apply(d,[c]);else g=e,h=f,d.hoverIntent_t=setTimeout(function(){j(c,d)},b.interval)},q=function(c){for(var e=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;e&&
e!=this;)try{e=e.parentNode}catch(d){e=this}if(e==this)return!1;var f=jQuery.extend({},c),q=this;if(q.hoverIntent_t)q.hoverIntent_t=clearTimeout(q.hoverIntent_t);if(c.type=="mouseover"){if(g=f.pageX,h=f.pageY,a(q).bind("mousemove",k),q.hoverIntent_s!=1)q.hoverIntent_t=setTimeout(function(){j(f,q)},b.interval)}else if(a(q).unbind("mousemove",k),q.hoverIntent_s==1)q.hoverIntent_t=setTimeout(function(){q.hoverIntent_t=clearTimeout(q.hoverIntent_t);q.hoverIntent_s=0;b.out.apply(q,[f])},b.timeout)};return this.mouseover(q).mouseout(q)}})(jQuery);
(function(a){typeof define==="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(a,d){function c(a){function b(){e?(c(),V(b),d=!0,e=!1):d=!1}var c=a,e=!1,d=!1;this.kick=function(){e=!0;d||b()};this.end=function(a){var b=c;a&&(d?(c=e?function(){b();a()}:a,e=!0):a())}}function b(){return!0}function e(){return!1}function f(a){a.preventDefault()}function g(a){Q[a.target.tagName.toLowerCase()]||a.preventDefault()}function h(a,b){var c,e;if(a.identifiedTouch)return a.identifiedTouch(b);c=-1;
for(e=a.length;++c<e;)if(a[c].identifier===b)return a[c]}function k(a,b){var c=h(a.changedTouches,b.identifier);if(c&&!(c.pageX===b.pageX&&c.pageY===b.pageY))return c}function j(a){B(a,a.data,a,s)}function q(){s()}function s(){H(document,P.move,j);H(document,P.cancel,s)}function u(a){var b=a.data,c=k(a,b);c&&B(a,b,c,v)}function t(a){var b=a.data;h(a.changedTouches,b.identifier)&&v(b.identifier)}function v(a){H(document,"."+a,u);H(document,"."+a,t)}function B(a,b,c,e){var d=c.pageX-b.startX,f=c.pageY-
b.startY;d*d+f*f<J*J||p(a,b,c,d,f,e)}function o(){this._handled=b;return!1}function n(a){a._handled()}function p(b,c,e,d,f,g){var j,h;j=b.targetTouches;h=b.timeStamp-c.timeStamp;c.type="movestart";c.distX=d;c.distY=f;c.deltaX=d;c.deltaY=f;c.pageX=e.pageX;c.pageY=e.pageY;c.velocityX=d/h;c.velocityY=f/h;c.targetTouches=j;c.finger=j?j.length:1;c._handled=o;c._preventTouchmoveDefault=function(){b.preventDefault()};a.event.trigger(c,void 0,c.target);g(c.identifier)}function A(a){D(a.data.event,a,a.timeStamp,
a.data.timer)}function z(a){var b=a.data.event;a=a.data.timer;H(document,P.move,A);H(document,P.end,z);M(b,a,function(){setTimeout(function(){H(b.target,"click",e)},0)})}function l(a){var b=a.data.event,c=a.data.timer,e=k(a,b);if(e)a.preventDefault(),b.targetTouches=a.targetTouches,D(b,e,a.timeStamp,c)}function E(a){var b=a.data.event,c=a.data.timer;h(a.changedTouches,b.identifier)&&(H(document,"."+b.identifier,l),H(document,"."+b.identifier,E),M(b,c))}function D(a,b,c,e){c-=a.timeStamp;a.type="move";
a.distX=b.pageX-a.startX;a.distY=b.pageY-a.startY;a.deltaX=b.pageX-a.pageX;a.deltaY=b.pageY-a.pageY;a.velocityX=0.3*a.velocityX+0.7*a.deltaX/c;a.velocityY=0.3*a.velocityY+0.7*a.deltaY/c;a.pageX=b.pageX;a.pageY=b.pageY;e.kick()}function M(b,c,e){c.end(function(){b.type="moveend";a.event.trigger(b,void 0,b.target);return e&&e()})}var J=6,K=a.event.add,H=a.event.remove,V=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){return window.setTimeout(function(){a()},25)}}(),Q={textarea:!0,input:!0,select:!0},P={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},W={move:"touchmove",cancel:"touchend",end:"touchend"};a.event.special.movestart={setup:function(){K(this,"dragstart.move drag.move",f);K(this,"mousedown.move",g);K(this,"movestart.move",n);return!0},teardown:function(){H(this,"dragstart drag",f);H(this,"mousedown touchstart",g);H(this,"movestart",n);return!0},
_default:function(b){var f,g;b._handled()&&(f={target:b.target,startX:b.startX,startY:b.startY,pageX:b.pageX,pageY:b.pageY,distX:b.distX,distY:b.distY,deltaX:b.deltaX,deltaY:b.deltaY,velocityX:b.velocityX,velocityY:b.velocityY,timeStamp:b.timeStamp,identifier:b.identifier,targetTouches:b.targetTouches,finger:b.finger},g={event:f,timer:new c(function(){a.event.trigger(f,void 0,b.target)})},b.identifier===d?(K(b.target,"click",e),K(document,P.move,A,g),K(document,P.end,z,g)):(b._preventTouchmoveDefault(),
K(document,W.move+"."+b.identifier,l,g),K(document,W.end+"."+b.identifier,E,g)))}};a.event.special.move={setup:function(){K(this,"movestart.move",a.noop)},teardown:function(){H(this,"movestart.move",a.noop)}};a.event.special.moveend={setup:function(){K(this,"movestart.moveend",a.noop)},teardown:function(){H(this,"movestart.moveend",a.noop)}};K(document,"mousedown.move",function(a){a.which===1&&!a.ctrlKey&&!a.altKey&&(a={target:a.target,startX:a.pageX,startY:a.pageY,timeStamp:a.timeStamp},K(document,
P.move,j,a),K(document,P.cancel,q,a))});K(document,"touchstart.move",function(a){var b;Q[a.target.tagName.toLowerCase()]||(b=a.changedTouches[0],a={target:b.target,startX:b.pageX,startY:b.pageY,timeStamp:a.timeStamp,identifier:b.identifier},K(document,W.move+"."+b.identifier,u,a),K(document,W.cancel+"."+b.identifier,t,a))});typeof Array.prototype.indexOf==="function"&&function(a){for(var b=["changedTouches","targetTouches"],c=b.length;c--;)a.event.props.indexOf(b[c])===-1&&a.event.props.push(b[c])}(a)});
(function(a){typeof define==="function"&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function d(b){var c,e,d;c=b.target.offsetWidth;e=b.target.offsetHeight;d={distX:b.distX,distY:b.distY,velocityX:b.velocityX,velocityY:b.velocityY,finger:b.finger};if(b.distX>b.distY)if(b.distX>-b.distY){if(b.distX/c>f.threshold||b.velocityX*b.distX/c*f.sensitivity>1)d.type="swiperight",a.event.trigger(d,void 0,b.currentTarget)}else{if(-b.distY/e>f.threshold||b.velocityY*b.distY/c*f.sensitivity>1)d.type=
"swipeup",a.event.trigger(d,void 0,b.currentTarget)}else if(b.distX>-b.distY){if(b.distY/e>f.threshold||b.velocityY*b.distY/c*f.sensitivity>1)d.type="swipedown",a.event.trigger(d,void 0,b.currentTarget)}else if(-b.distX/c>f.threshold||b.velocityX*b.distX/c*f.sensitivity>1)d.type="swipeleft",a.event.trigger(d,void 0,b.currentTarget)}function c(b){var c=a.data(b,"event_swipe");c||(c={count:0},a.data(b,"event_swipe",c));return c}var b=a.event.add,e=a.event.remove,f={threshold:0.4,sensitivity:6};a.event.special.swipe=
a.event.special.swipeleft=a.event.special.swiperight=a.event.special.swipeup=a.event.special.swipedown={setup:function(a){a=c(this);if(!(a.count++>0))return b(this,"moveend",d),!0},teardown:function(){if(!(--c(this).count>0))return e(this,"moveend",d),!0},settings:f}});var JSON;JSON||(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function d(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=g[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,b){var g,s,u,t,v=e,B,o=b[a];o&&typeof o==="object"&&typeof o.toJSON==="function"&&(o=o.toJSON(a));typeof h==="function"&&(o=h.call(b,a,o));switch(typeof o){case "string":return d(o);case "number":return isFinite(o)?String(o):"null";case "boolean":case "null":return String(o);
case "object":if(!o)return"null";e+=f;B=[];if(Object.prototype.toString.apply(o)==="[object Array]"){t=o.length;for(g=0;g<t;g+=1)B[g]=c(g,o)||"null";u=B.length===0?"[]":e?"[\n"+e+B.join(",\n"+e)+"\n"+v+"]":"["+B.join(",")+"]";e=v;return u}if(h&&typeof h==="object"){t=h.length;for(g=0;g<t;g+=1)typeof h[g]==="string"&&(s=h[g],(u=c(s,o))&&B.push(d(s)+(e?": ":":")+u))}else for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(u=c(s,o))&&B.push(d(s)+(e?": ":":")+u);u=B.length===0?"{}":e?"{\n"+e+B.join(",\n"+
e)+"\n"+v+"}":"{"+B.join(",")+"}";e=v;return u}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e,f,g={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,d){var g;f=e="";if(typeof d==="number")for(g=0;g<d;g+=1)f+=" ";else typeof d==="string"&&(f=d);if((h=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",{"":a})}})();
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){typeof a=="string"&&(a=document.getElementById(a));if(!a.addClass)a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){for(var c=this.className.split(/\s+/),b=-1,e=0;e<c.length;e++)if(c[e]==a)b=e,e=c.length;if(b>-1)c.splice(b,1),this.className=c.join(" ");return this},a.hasClass=
function(a){return!!this.className.match(RegExp("\\s*"+a+"\\s*"))};return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,d,c){(a=this.clients[a])&&a.receiveEvent(d,c)},register:function(a,d){this.clients[a]=d},getDOMObjectPosition:function(a,d){for(var c={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};a&&a!=d;)c.left+=a.offsetLeft,c.top+=a.offsetTop,a=a.offsetParent;return c},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;
this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(a,d,c){this.domElement=ZeroClipboard.$(a);a=99;this.domElement.style.zIndex&&(a=parseInt(this.domElement.style.zIndex,10)+1);typeof d=="string"?d=ZeroClipboard.$(d):typeof d=="undefined"&&(d=document.getElementsByTagName("body")[0]);var b=ZeroClipboard.getDOMObjectPosition(this.domElement,d);this.div=document.createElement("div");var e=this.div.style;e.position="absolute";
e.left=""+b.left+"px";e.top=""+b.top+"px";e.width=""+b.width+"px";e.height=""+b.height+"px";e.zIndex=a;if(typeof c=="object")for(addedStyle in c)e[addedStyle]=c[addedStyle];this.div.className="zero_clipboard_wrapper";d.appendChild(this.div);this.div.innerHTML=this.getHTML(b.width,b.height)},getHTML:function(a,d){var c="",b="id="+this.id+"&width="+a+"&height="+d;if(navigator.userAgent.match(/MSIE/)){var e=location.href.match(/^https/i)?"https://":"http://";c+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+
e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+d+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+b+'"/><param name="wmode" value="transparent"/></object>'}else c+=
'<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+d+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+b+'" wmode="transparent" />';return c},hide:function(){if(this.div)this.div.style.left="-2000px"},show:function(){this.reposition()},destroy:function(){if(this.domElement&&
this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(d){}this.div=this.domElement=null}},reposition:function(a){if(a)(this.domElement=ZeroClipboard.$(a))||this.hide();if(this.domElement&&this.div){a=ZeroClipboard.getDOMObjectPosition(this.domElement);var d=this.div.style;d.left=""+a.left+"px";d.top=""+a.top+"px"}},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},addEventListener:function(a,d){a=a.toString().toLowerCase().replace(/^on/,
"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(d)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,d){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){c=
this;setTimeout(function(){c.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.setText(this.clipText);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case "mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=!1;if(this.domElement.hasClass("active"))this.domElement.removeClass("active"),this.recoverActive=
!0;this.domElement.removeClass("hover")}break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":if(this.domElement&&this.cssEffects)this.domElement.removeClass("active"),this.recoverActive=!1}if(this.handlers[a])for(var b=0,e=this.handlers[a].length;b<e;b++){var f=this.handlers[a][b];if(typeof f=="function")f(this,d);else if(typeof f=="object"&&f.length==2)f[0][f[1]](this,d);else if(typeof f=="string")window[f](this,d)}}};
var FORMALIZE=function(a,d,c){var b="placeholder"in c.createElement("input"),e="autofocus"in c.createElement("input"),f=!!(a.browser.msie&&parseInt(a.browser.version,10)===6),g=!!(a.browser.msie&&parseInt(a.browser.version,10)===7);return{go:function(){for(var a in FORMALIZE.init)FORMALIZE.init[a]()},init:{full_input_size:function(){g&&a("textarea, input.input_full").length&&a("textarea, input.input_full").wrap('<span class="input_full_wrap"></span>')},ie6_skin_inputs:function(){if(f&&a("input, select, textarea").length){var b=
/button|submit|reset/,c=/date|datetime|datetime-local|email|month|number|password|range|search|tel|text|time|url|week/;a("input").each(function(){var e=a(this);this.getAttribute("type").match(b)?(e.addClass("ie6_button"),this.disabled&&e.addClass("ie6_button_disabled")):this.getAttribute("type").match(c)&&(e.addClass("ie6_input"),this.disabled&&e.addClass("ie6_input_disabled"))});a("textarea, select").each(function(){this.disabled&&a(this).addClass("ie6_input_disabled")})}},autofocus:function(){!e&&
a(":input[autofocus]").length&&a(":input[autofocus]:visible:first").focus()},placeholder:function(){!b&&a(":input[placeholder]").length&&(FORMALIZE.misc.add_placeholder(),a(":input[placeholder]").each(function(){var b=a(this),c=b.attr("placeholder");b.focus(function(){b.val()===c&&b.val("").removeClass("placeholder_text")}).blur(function(){FORMALIZE.misc.add_placeholder()});b.closest("form").submit(function(){b.val()===c&&b.val("").removeClass("placeholder_text")}).bind("reset",function(){setTimeout(FORMALIZE.misc.add_placeholder,
50)})}))}},misc:{add_placeholder:function(){!b&&a(":input[placeholder]").length&&a(":input[placeholder]").each(function(){var b=a(this),c=b.attr("placeholder");(!b.val()||b.val()===c)&&b.val(c).addClass("placeholder_text")})}}}}(jQuery,this,this.document);jQuery(document).ready(function(){FORMALIZE.go()});
(function(a,d,c){function b(){g=d[h](function(){e.each(function(){var b=a(this),c=b.width(),e=b.height(),d=a.data(this,j);if(c!==d.w||e!==d.h)b.trigger(k,[d.w=c,d.h=e])});b()},f[q])}var e=a([]),f=a.resize=a.extend(a.resize,{}),g,h="setTimeout",k="resize",j=k+"-special-event",q="delay";f[q]=250;f.throttleWindow=!0;a.event.special[k]={setup:function(){if(!f.throttleWindow&&this[h])return!1;var c=a(this);e=e.add(c);a.data(this,j,{w:c.width(),h:c.height()});e.length===1&&b()},teardown:function(){if(!f.throttleWindow&&
this[h])return!1;var b=a(this);e=e.not(b);b.removeData(j);e.length||clearTimeout(g)},add:function(b){function e(b,f,g){var n=a(this),h=a.data(this,j);h.w=f!==c?f:n.width();h.h=g!==c?g:n.height();d.apply(this,arguments)}if(!f.throttleWindow&&this[h])return!1;var d;if(a.isFunction(b))return d=b,e;else d=b.handler,b.handler=e}}})(jQuery,this);
(function(a,d,c){function b(a,b){var c=d.createElement(a||"div"),e;for(e in b)c[e]=b[e];return c}function e(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,e){var d=["opacity",b,~~(a*100),c,e].join("-");c=0.01+c/e*100;e=Math.max(1-(1-a)/b*(100-c),a);var f=u.substring(0,u.indexOf("Animation")).toLowerCase();s[d]||(t.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+d+"{0%{opacity:"+e+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+
a+"}100%{opacity:"+e+"}}",t.cssRules.length),s[d]=1);return d}function g(a,b){var e=a.style,d,f;if(e[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<q.length;f++)if(d=q[f]+b,e[d]!==c)return d}function h(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function k(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],d;for(d in e)a[d]===c&&(a[d]=e[d])}return a}function j(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}
var q=["webkit","Moz","ms","O"],s={},u,t=function(){var a=b("style",{type:"text/css"});e(d.getElementsByTagName("head")[0],a);return a.sheet||a.styleSheet}(),v={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"},B=function n(a){if(!this.spin)return new n(a);this.opts=k(a||{},n.defaults,v)};B.defaults={};k(B.prototype,{spin:function(a){this.stop();var c=this,e=c.opts,d=
c.el=h(b(0,{className:e.className}),{position:e.position,width:0,zIndex:e.zIndex}),f=e.radius+e.length+e.width,g,k;a&&(a.insertBefore(d,a.firstChild||null),k=j(a),g=j(d),h(d,{left:(e.left=="auto"?k.x-g.x+(a.offsetWidth>>1):parseInt(e.left,10)+f)+"px",top:(e.top=="auto"?k.y-g.y+(a.offsetHeight>>1):parseInt(e.top,10)+f)+"px"}));d.setAttribute("aria-role","progressbar");c.lines(d,c.opts);if(!u){var t=0,s=e.fps,q=s/e.speed,H=(1-e.opacity)/(q*e.trail/100),v=q/e.lines;(function P(){t++;for(var a=e.lines;a;a--)c.opacity(d,
e.lines-a,Math.max(1-(t+a*v)%q*H,e.opacity),e);c.timeout=c.el&&setTimeout(P,~~(1E3/s))})()}return c},stop:function(){var a=this.el;if(a)clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c;return this},lines:function(a,c){function d(a,e){return h(b(),{position:"absolute",width:c.length+c.width+"px",height:c.width+"px",background:a,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/c.lines*g+c.rotate)+"deg) translate("+c.radius+"px,0)",borderRadius:(c.corners*c.width>>
1)+"px"})}for(var g=0,j;g<c.lines;g++)j=h(b(),{position:"absolute",top:1+~(c.width/2)+"px",transform:c.hwaccel?"translate3d(0,0,0)":"",opacity:c.opacity,animation:u&&f(c.opacity,c.trail,g,c.lines)+" "+1/c.speed+"s linear infinite"}),c.shadow&&e(j,h(d("#000","0 0 4px #000"),{top:"2px"})),e(a,e(j,d(c.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){if(b<a.childNodes.length)a.childNodes[b].style.opacity=c}});(function(){function a(c,e){return b("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',
e)}var c=h(b("group"),{behavior:"url(#default#VML)"});!g(c,"transform")&&c.adj?(t.addRule(".spin-vml","behavior:url(#default#VML)"),B.prototype.lines=function(b,c){function d(){return h(a("group",{coordsize:j+" "+j,coordorigin:-g+" "+-g}),{width:j,height:j})}function f(b,j,p){e(k,e(h(d(),{rotation:360/c.lines*b+"deg",left:~~j}),e(h(a("roundrect",{arcsize:c.corners}),{width:g,height:c.width,left:c.radius,top:-c.width>>1,filter:p}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}
var g=c.length+c.width,j=2*g,p=-(c.width+c.length)*2+"px",k=h(d(),{position:"absolute",top:p,left:p});if(c.shadow)for(p=1;p<=c.lines;p++)f(p,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(p=1;p<=c.lines;p++)f(p);return e(b,k)},B.prototype.opacity=function(a,b,c,e){a=a.firstChild;e=e.shadow&&e.lines||0;if(a&&b+e<a.childNodes.length&&(a=(a=(a=a.childNodes[b+e])&&a.firstChild)&&a.firstChild))a.opacity=c}):u=g(c,"animation")})();typeof define=="function"&&
define.amd?define(function(){return B}):a.Spinner=B})(window,document);
(function(a){a.fn.spin=function(d,c){var b={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}};if(Spinner)return this.each(function(){var e=a(this),f=e.data();f.spinner&&(f.spinner.stop(),delete f.spinner);if(d!==!1){if(typeof d==="string"&&(d=d in b?b[d]:{},c))d.color=c;f.spinner=(new Spinner(a.extend({color:e.css("color")},d))).spin(this)}});else throw"Spinner class not available.";}})(jQuery);
(function(a,d){var c,b;d._i=[];d.init=function(a,f,g){var h=d;"undefined"!==typeof g?h=d[g]=[]:g="mixpanel";c=["disable","track","track_links","track_forms","register","register_once","unregister","identify","name_tag","set_config"];for(b=0;b<c.length;b++)(function(a){h[a]=function(){h.push([a].concat(Array.prototype.slice.call(arguments,0)))}})(c[b]);d._i.push([a,f,g])};window.mixpanel=d})(document,[]);
(function(a){function d(){if(!d.done)b=d.done=!0,e.each(l,function(a){a._dom_loaded()})}var c=!1,b=!1,e={},f=Array.prototype,g=Object.prototype,h=f.slice,k=g.toString,j=g.hasOwnProperty,q=window.console,s=window.navigator,u=window.document,t=s.userAgent,v={api_host:("https:"==u.location.protocol?"https://":"http://")+"api.mixpanel.com",cross_subdomain_cookie:!0,cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,test:!1,img:!1,track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:365,
upgrade:!1,disable_cookie:!1};(function(){var a=f.forEach,b=f.indexOf,c=Array.isArray,d={},g=e.each=function(b,c,e){if(b!=null)if(a&&b.forEach===a)b.forEach(c,e);else if(b.length===+b.length)for(var f=0,g=b.length;f<g;f++){if(f in b&&c.call(e,b[f],f,b)===d)break}else for(f in b)if(j.call(b,f)&&c.call(e,b[f],f,b)===d)break};e.extend=function(a){g(h.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])});return a};e.isArray=c||function(a){return k.call(a)==="[object Array]"};e.isFunction=
function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return!1}};e.isArguments=function(a){return!(!a||!j.call(a,"callee"))};e.toArray=function(a){if(!a)return[];if(a.toArray)return a.toArray();if(e.isArray(a))return h.call(a);if(e.isArguments(a))return h.call(a);return e.values(a)};e.values=function(a){var b=[];if(a==null)return b;g(a,function(a){b[b.length]=a});return b};e.identity=function(a){return a};e.include=function(a,c){var e=!1;if(a==null)return e;if(b&&a.indexOf===b)return a.indexOf(c)!=
-1;g(a,function(a){if(e||(e=a===c))return d});return e};e.includes=function(a,b){return a.indexOf(b)!==-1}})();e.inherit=function(a,b){a.prototype=new b;a.prototype.constructor=a;a.superclass=b.prototype;return a};e.isObject=function(a){return a===Object(a)&&!e.isArray(a)};e.getUnixtime=function(){return parseInt((new Date).getTime().toString().substring(0,10),10)};e.truncate=function(a,b){var c;typeof a==="string"?c=a.slice(0,b):e.isArray(a)?(c=[],e.each(a,function(a){c.push(e.truncate(a,b))})):
e.isObject(a)?(c={},e.each(a,function(a,d){c[d]=e.truncate(a,b)})):c=a;return c};e.JSONEncode=function(a){var b=function(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=c[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':
'"'+a+'"'},c=function(a,e){var d="",f=0,g=f="";g=0;var o=d,h=[],n=e[a];n&&typeof n==="object"&&typeof n.toJSON==="function"&&(n=n.toJSON(a));switch(typeof n){case "string":return b(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);case "object":if(!n)return"null";d+="    ";h=[];if(k.apply(n)==="[object Array]"){g=n.length;for(f=0;f<g;f+=1)h[f]=c(f,n)||"null";return g=h.length===0?"[]":d?"[\n"+d+h.join(",\n"+d)+"\n"+o+"]":"["+h.join(",")+"]"}for(f in n)j.call(n,
f)&&(g=c(f,n))&&h.push(b(f)+(d?": ":":")+g);return g=h.length===0?"{}":d?"{"+h.join(",")+""+o+"}":"{"+h.join(",")+"}"}};return c("",{"":a})};e.base64Encode=function(a){var b,c,d,f,g=0,o=0,j="";j=[];if(!a)return a;a=e.utf8Encode(a);do b=a.charCodeAt(g++),c=a.charCodeAt(g++),d=a.charCodeAt(g++),f=b<<16|c<<8|d,b=f>>18&63,c=f>>12&63,d=f>>6&63,f&=63,j[o++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);while(g<a.length);j=j.join("");switch(a.length%3){case 1:j=j.slice(0,-2)+"==";break;case 2:j=j.slice(0,-1)+"="}return j};e.utf8Encode=function(a){a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b="",c,e,d=0,f;c=e=0;d=a.length;for(f=0;f<d;f++){var g=a.charCodeAt(f),o=null;g<128?e++:o=g>127&&g<2048?String.fromCharCode(g>>6|192,g&63|128):String.fromCharCode(g>>
12|224,g>>6&63|128,g&63|128);o!==null&&(e>c&&(b+=a.substring(c,e)),b+=o,c=e=f+1)}e>c&&(b+=a.substring(c,a.length));return b};e.UUID=function(){var a=function(){for(var a=1*new Date,b=0;a==1*new Date;)b++;return a.toString(16)+b.toString(16)},b=function(){function a(b,c){var d,f=0;for(d=0;d<c.length;d++)f|=e[d]<<d*8;return b^f}var b,c,e=[],d=0;for(b=0;b<t.length;b++)c=t.charCodeAt(b),e.unshift(c&255),e.length>=4&&(d=a(d,e),e=[]);e.length>0&&(d=a(d,e));return d.toString(16)};return function(){var c=
(screen.height*screen.width).toString(16);return a()+"-"+Math.random().toString(16).replace(".","")+"-"+b()+"-"+c+"-"+a()}}();e.isBlockedUA=function(){if(/(google web preview|baiduspider|yandexbot)/i.test(t))return!0;return!1};e.HTTPBuildQuery=function(a,b){var c,d,f=[];typeof b==="undefined"&&(b="&");e.each(a,function(a,b){c=encodeURIComponent(a.toString());d=encodeURIComponent(b);f[f.length]=d+"="+c});return f.join(b)};e.getQueryParam=function(a,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");
var c=RegExp("[\\?&]"+b+"=([^&#]*)").exec(a);return c===null||c&&typeof c[1]!=="string"&&c[1].length?"":decodeURIComponent(c[1]).replace(/\+/g," ")};e.cookie={get:function(a){a+="=";for(var b=u.cookie.split(";"),c=0;c<b.length;c++){for(var e=b[c];e.charAt(0)==" ";)e=e.substring(1,e.length);if(e.indexOf(a)==0)return decodeURIComponent(e.substring(a.length,e.length))}return null},eval:function(a){var b;try{b=eval("("+e.cookie.get(a)+")")||{}}catch(c){}return b},set:function(a,b,c,e){var d="",f="";e&&
(d=(d=(d=u.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?d[0]:"")?"; domain=."+d:"");c&&(f=new Date,f.setTime(f.getTime()+c*864E5),f="; expires="+f.toGMTString());u.cookie=a+"="+encodeURIComponent(b)+f+"; path=/"+d},remove:function(a,b){e.cookie.set(a,"",-1,b)}};e.register_event=function(){function a(c){c[g]=b;var e=function(a){return c[g](a)};e[f]=!0;return e}function b(a){if(a=a||c(window.event)){var d=!0,f=this.events[a.type],g;for(g in f)if(!Object.prototype[g])this.$$handler=
f[g],e.isFunction(this.$$handler)&&this.$$handler(a)===!1&&(d=!1);if(this.$$handler)this.$$handler=null;return d}}function c(a){if(a)a.preventDefault=c.preventDefault,a.stopPropagation=c.stopPropagation;return a}var d={},f="__cbefHandler",g="__handleEvent";d.addEvent=function(b,c,e,g){if(b)if(b.addEventListener&&!g)b.addEventListener(c,e,!1);else{if(!e.$$guid)e.$$guid=d.addEvent.guid++;if(!b.events)b.events={};g=b.events[c];var o="on"+c;g||(g=b.events[c]={});b[o]&&!b[o][f]?(g[d.addEvent.guid++]=b[o],
b[o]=a(b)):b[o]||(b[o]=a(b));g[e.$$guid]=e}else B.error(8,"No valid element provided to register_event")};d.addEvent.guid=1;c.preventDefault=function(){this.returnValue=!1};c.stopPropagation=function(){this.cancelBubble=!0};return d.addEvent}();e.dom_query=function(){return function(a){if(!u.getElementsByTagName)return[];a=a.split(" ");for(var b,c=Array(u),e=0;e<a.length;e++)if(b=a[e].replace(/^\s+/,"").replace(/\s+$/,""),b.indexOf("#")>-1){b=b.split("#");var d=b[0];c=u.getElementById(b[1]);if(d&&
c.nodeName.toLowerCase()!=d)return[];c=Array(c)}else if(b.indexOf(".")>-1){b=b.split(".");d=b[0];var f=b[1];d||(d="*");b=[];for(var g=0,o=0;o<c.length;o++){var j;j=d=="*"?c[o].all?c[o].all:c[o].getElementsByTagName("*"):c[o].getElementsByTagName(d);for(var h=0;h<j.length;h++)b[g++]=j[h]}c=[];for(g=d=0;g<b.length;g++)b[g].className&&b[g].className.match(RegExp("\\b"+f+"\\b"))&&(c[d++]=b[g])}else if(b.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){d=RegExp.$1;var n=RegExp.$2;f=RegExp.$3;var p=
RegExp.$4;d||(d="*");b=[];for(o=g=0;o<c.length;o++){j=d=="*"?c[o].all?c[o].all:c[o].getElementsByTagName("*"):c[o].getElementsByTagName(d);for(h=0;h<j.length;h++)b[g++]=j[h]}c=[];d=0;switch(f){case "=":f=function(a){return a.getAttribute(n)==p};break;case "~":f=function(a){return a.getAttribute(n).match(RegExp("\\b"+p+"\\b"))};break;case "|":f=function(a){return a.getAttribute(n).match(RegExp("^"+p+"-?"))};break;case "^":f=function(a){return a.getAttribute(n).indexOf(p)==0};break;case "$":f=function(a){return a.getAttribute(n).lastIndexOf(p)==
a.getAttribute(n).length-p.length};break;case "*":f=function(a){return a.getAttribute(n).indexOf(p)>-1};break;default:f=function(a){return a.getAttribute(n)}}c=[];for(g=d=0;g<b.length;g++)f(b[g])&&(c[d++]=b[g])}else{d=b;b=[];for(o=g=0;o<c.length;o++){j=c[o].getElementsByTagName(d);for(h=0;h<j.length;h++)b[g++]=j[h]}c=b}return c}}();e.info={campaignParams:function(){var a="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),b="",c={};e.each(a,function(a){b=e.getQueryParam(u.URL,a);
b.length&&(c[a]=b)});return c},searchEngine:function(a){return a.search("https?://(.*)google.([^/?]*)")===0?"google":a.search("https?://(.*)bing.com")===0?"bing":a.search("https?://(.*)yahoo.com")===0?"yahoo":a.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(a){var b=e.info.searchEngine(a),c;c={};if(b!==null)c.$search_engine=b,a=e.getQueryParam(a,b!="yahoo"?"q":"p"),a.length&&(c.mp_keyword=a);return c},browser:function(){var a=s.vendor||"";if(window.opera){if(e.includes(t,
"Mini"))return"Opera Mini";return"Opera"}else if(e.includes(t,"Chrome"))return"Chrome";else if(e.includes(a,"Apple")){if(e.includes(t,"Mobile"))return"iOS Mobile";return"Safari"}else return e.includes(t,"Android")?"Android Mobile":e.includes(a,"KDE")?"Konqueror":e.includes(t,"Firefox")?"Firefox":e.includes(t,"MSIE")?"Internet Explorer":e.includes(t,"Gecko")?"Mozilla":""},os:function(){return/Windows/i.test(t)?"Windows":/iPhone/.test(t)?"iPhone":/Android/.test(t)?"Android":/Mac/i.test(t)?"Mac OS X":
/X11/.test(t)||/Linux/.test(t)?"Linux":""},referringDomain:function(a){a=a.split("/");if(a.length>=3)return a[2];return""},properties:function(){return{$os:e.info.os(),$browser:e.info.browser(),$referrer:u.referrer,$referring_domain:e.info.referringDomain(u.referrer)}},pageviewInfo:function(a){a={mp_page:a,mp_referrer:u.referrer,mp_browser:e.info.browser(),mp_platform:e.info.os()};e.each(a,function(){});return a}};var B={log:function(){if(typeof q!=="undefined"&&q&&c)try{q.log.apply(q,arguments)}catch(a){q.log("<< MPLib >>"),
e.each(arguments,function(a){q.log(a)}),q.log("<</ MPLib >>")}},error:function(a){if(typeof q!=="undefined"&&q&&c){var b=e.toArray(arguments).slice(1);b=["Mixpanel Error ("+a+"): "].concat(b);try{q.error.apply(q,b)}catch(d){e.each(b,function(a){q.error(a)})}}}};g=function(){};g.prototype.create_properties=function(){};g.prototype.event_handler=function(){};g.prototype.after_track_handler=function(){};g.prototype.init=function(a){this.mp=a;return this};g.prototype.track=function(a,b,c,d){var f=this,
g=e.dom_query(a);if(g.length==0)B.error(7,"The DOM query ("+a+") returned 0 elements");else return e.each(g,function(a){e.register_event(a,this.override_event,function(a){var e={},g=f.create_properties(c,this),o=f.mp.get_config("track_links_timeout");f.event_handler(a,this,e);window.setTimeout(f.track_callback(d,g,e,!0),o);f.mp.track(b,g,f.track_callback(d,g,e))})},this),!0};g.prototype.track_callback=function(a,b,c,e){e=e||!1;var d=this;return function(){if(!c.callback_fired)c.callback_fired=!0,
a&&a(e,b)===!1||d.after_track_handler(b,c,e)}};g.prototype.create_properties=function(a,b){return typeof a==="function"?a(b):e.extend({},a)};var o=function(){this.override_event="click"};e.inherit(o,g);o.prototype.create_properties=function(a,b){var c=o.superclass.create_properties.apply(this,arguments);if(b.href)c.url=b.href;return c};o.prototype.event_handler=function(a,b,c){c.new_tab=a.which===2||a.metaKey||b.target==="_blank";c.href=b.href;c.new_tab||a.preventDefault()};o.prototype.after_track_handler=
function(a,b){b.new_tab||setTimeout(function(){window.location=b.href},0)};var n=function(){this.override_event="submit"};e.inherit(n,g);n.prototype.event_handler=function(a,b,c){c.element=b;a.preventDefault()};n.prototype.after_track_handler=function(a,b){setTimeout(function(){b.element.submit()},0)};var p=function(a){this.props={};this.campaign_params_saved=!1;this.name=a.cookie_name?"mp_"+a.cookie_name:"mp_"+a.token+"_mixpanel";this.load();this.update_config(a);this.upgrade(a);this.save()};p.prototype.properties=
function(){return this.props};p.prototype.load=function(){if(!this.disabled){var a=e.cookie.eval(this.name);a&&(this.props=e.extend({},a))}};p.prototype.upgrade=function(a){var b=a.upgrade,c;if(b)c="mp_super_properties",typeof b==="string"&&(c=b),b=e.cookie.eval(c),e.cookie.remove(c),e.cookie.remove(c,!0),b&&(this.props=e.extend(this.props,b.all,b.events));if(!a.cookie_name&&a.name!=="mixpanel"&&(c="mp_"+a.token+"_"+a.name,b=e.cookie.eval(c)))e.cookie.remove(c),e.cookie.remove(c,!0),this.register_once(b)};
p.prototype.save=function(){this.disabled||e.cookie.set(this.name,e.JSONEncode(this.props),this.expire_days,this.cross_subdomain)};p.prototype.remove=function(){e.cookie.remove(this.name,!1);e.cookie.remove(this.name,!0)};p.prototype.clear=function(){this.remove();this.props={}};p.prototype.register_once=function(a,b,c){if(e.isObject(a))return typeof b==="undefined"&&(b="None"),this.expire_days=typeof c==="undefined"?this.default_expiry:c,e.each(a,function(a,c){if(!this.props[c]||this.props[c]===
b)this.props[c]=a},this),this.save(),!0;return!1};p.prototype.register=function(a,b){if(e.isObject(a))return this.expire_days=typeof b==="undefined"?this.default_expiry:b,e.extend(this.props,a),this.save(),!0;return!1};p.prototype.unregister=function(a){a in this.props&&(delete this.props[a],this.save())};p.prototype.update_campaign_params=function(){if(!this.campaign_params_saved)this.register_once(e.info.campaignParams()),this.campaign_params_saved=!0};p.prototype.update_search_keyword=function(a){this.register(e.info.searchInfo(a))};
p.prototype.update_referrer_info=function(a){this.register_once({$initial_referrer:a||"$direct",$initial_referring_domain:e.info.referringDomain(a)||"$direct"},"")};p.prototype.safe_merge=function(a){e.each(this.props,function(b,c){c in a||(a[c]=b)});return a};p.prototype.update_config=function(a){this.default_expiry=this.expire_days=a.cookie_expiration;this.set_disabled(a.disable_cookie);this.set_cross_subdomain(a.cross_subdomain_cookie)};p.prototype.set_disabled=function(a){(this.disabled=a)&&this.remove()};
p.prototype.set_cross_subdomain=function(a){if(a!==this.cross_subdomain)this.cross_subdomain=a,this.remove(),this.save()};p.prototype.get_cross_subdomain=function(){return this.cross_subdomain};var A=function(b,d,f){var g,o=f==="mixpanel"?a:a[f];if(o&&!e.isArray(o))B.error(1,"You have already initialized "+f);else return g=new z,g._init(b,d,f),c=c||g.get_config("debug"),typeof o!=="undefined"&&g._execute_array(o),g},z=function(){};z.prototype.init=function(b,c,e){if(typeof e==="undefined")B.error(2,
"You must name your new library: init(token, config, name)");else if(e==="mixpanel")B.error(3,"You must initialize the main mixpanel object right after you include the Mixpanel js snippet");else return b=A(b,c,e),a[e]=b,b._loaded(),b};z.prototype._init=function(a,b,c){this.config={};this.set_config(e.extend({},v,b,{name:c,token:a,callback_fn:(c==="mixpanel"?c:"mixpanel."+c)+"._jsc"}));this._jsc=function(){};this.dom_loaded_queue=[];this.disabled_events=[];this.disable_all_events=!1;this.cookie=new p(this.config)};
z.prototype._loaded=function(){this.get_config("loaded")(this);this.get_config("track_pageview")&&this.track_pageview()};z.prototype._dom_loaded=function(){e.each(this.dom_loaded_queue,function(a){this._track_dom.apply(this,a)},this)};z.prototype._track_dom=function(a,c){if(this.get_config("img"))return B.error(4,"You can't use DOM tracking functions with img = true."),!1;if(!b)return this.dom_loaded_queue.push([a,c]),!1;var e=(new a).init(this);return e.track.apply(e,c)};z.prototype._send_request=
function(a,b){this.get_config("test")&&(b.test=1);this.get_config("img")&&(b.img=1);b._=(new Date).getTime().toString();a+="?"+e.HTTPBuildQuery(b);if("img"in b){var c=u.createElement("img");c.src=a;u.body.appendChild(c)}else{c=u.createElement("script");c.type="text/javascript";c.async=!0;c.defer=!0;c.src=a;var d=u.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}};z.prototype._execute_array=function(a){var b,c=[];e.each(a,function(a){a&&(b=a[0],typeof a==="function"?a.call(this):e.isArray(a)&&
b.indexOf("track")!=-1&&typeof this[b]==="function"?c.push(a):this[b].apply(this,a.slice(1)))},this);e.each(c,function(a){this[a[0]].apply(this,a.slice(1))},this)};z.prototype.disable=function(a){typeof a==="undefined"?this.disable_all_events=!0:this.disabled_events=this.disabled_events.concat(a)};z.prototype.track=function(a,b,c){if(typeof a==="undefined")B.error(5,"No event name provided to mixpanel.track");else if(e.isBlockedUA()||this.disable_all_events||e.include(this.disabled_events,a))typeof c!==
"undefined"&&c(0);else{b=b||{};b.token=b.token||this.get_config("token");b.time=b.time||e.getUnixtime();this.register_once({distinct_id:e.UUID()},"");this.cookie.update_search_keyword(u.referrer);this.get_config("store_google")&&this.cookie.update_campaign_params();this.get_config("save_referrer")&&this.cookie.update_referrer_info(u.referrer);b=e.extend({},e.info.properties(),this.cookie.properties(),b);var d=e.truncate({event:a,properties:b},255);a=e.JSONEncode(d);a=e.base64Encode(a);B.log("MIXPANEL REQUEST:");
B.log(d);var f=this._jsc;b=this.get_config("callback_fn");if(typeof c!=="undefined"){var g=Math.floor(Math.random()*1E8);b+='["'+g+'"]';f[""+g]=function(a){delete f[""+g];c(a,d)}}this._send_request(this.get_config("api_host")+"/track/",{data:a,ip:1,callback:b});return d}};z.prototype.track_pageview=function(a){if(typeof a==="undefined")a=u.location.href;this.track("mp_page_view",e.info.pageviewInfo(a))};z.prototype.track_links=function(){return this._track_dom.call(this,o,arguments)};z.prototype.track_forms=
function(){return this._track_dom.call(this,n,arguments)};z.prototype.register=function(a,b){this.cookie.register(a,b)};z.prototype.register_once=function(a,b,c){this.cookie.register_once(a,b,c)};z.prototype.unregister=function(a){this.cookie.unregister(a)};z.prototype.identify=function(a){this.cookie.register({distinct_id:a})};z.prototype.name_tag=function(a){this.cookie.register({mp_name_tag:a})};z.prototype.set_config=function(a){e.isObject(a)&&(e.extend(this.config,a),this.cookie&&this.cookie.update_config(this.config),
c=c||this.get_config("debug"))};z.prototype.get_config=function(a){return this.config[a]};z.prototype.get_property=function(a){return this.cookie.props[a]};e.toArray=e.toArray;e.isObject=e.isObject;e.JSONEncode=e.JSONEncode;z.prototype.init=z.prototype.init;z.prototype.disable=z.prototype.disable;z.prototype.track=z.prototype.track;z.prototype.track_links=z.prototype.track_links;z.prototype.track_forms=z.prototype.track_forms;z.prototype.track_pageview=z.prototype.track_pageview;z.prototype.register=
z.prototype.register;z.prototype.register_once=z.prototype.register_once;z.prototype.unregister=z.prototype.unregister;z.prototype.identify=z.prototype.identify;z.prototype.name_tag=z.prototype.name_tag;z.prototype.set_config=z.prototype.set_config;z.prototype.get_config=z.prototype.get_config;z.prototype.get_property=z.prototype.get_property;p.prototype.update_search_keyword=p.prototype.update_search_keyword;p.prototype.update_referrer_info=p.prototype.update_referrer_info;p.prototype.get_cross_subdomain=
p.prototype.get_cross_subdomain;p.prototype.clear=p.prototype.clear;if(typeof a==="undefined"||typeof a._i==="undefined")B.error(6,"'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.");else{var l={};e.each(a._i,function(a){var b;a&&e.isArray(a)&&(b=a[a.length-1],a=A.apply(this,a),l[b]=a)});var E=function(){e.each(l,function(b,c){c!=="mixpanel"&&(a[c]=b)});a._=e};a.init=function(b,c,e){e?a[e]||(a[e]=l[e]=A(b,c,e),
a[e]._loaded()):(e=a,l.mixpanel?e=l.mixpanel:b&&(e=A(b,c,"mixpanel")),window.mixpanel=a=e,E())};a.init();e.each(l,function(a){a._loaded()});if(u.addEventListener)u.addEventListener("DOMContentLoaded",d,!1);else if(u.attachEvent){u.attachEvent("onreadystatechange",d);g=!1;try{g=window.frameElement==null}catch(D){}if(u.documentElement.doScroll&&g){var M=function(){try{u.documentElement.doScroll("left")}catch(a){setTimeout(M,1);return}d()};M()}}e.register_event(window,"load",d,!0)}})(window.mixpanel);
var Mustache=typeof module!=="undefined"&&module.exports||{};
(function(a){function d(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return A[a]||a})}function c(a,b,c,e){e=e||"<template>";var d=b.split("\n"),f=Math.max(c-3,0);d=d.slice(f,Math.min(d.length,c+3));for(var g,o=0,j=d.length;o<j;++o)g=o+f+1,d[o]=(g===c?" >> ":"    ")+d[o];a.template=b;a.line=c;a.file=e;a.message=[e+":"+c,d.join("\n"),"",a.message].join("\n");return a}function b(a,b,c){if(a===".")return b[b.length-1];a=a.split(".");for(var e=a.length-1,d=a[e],f,g,o=b.length,j,h;o;){h=
b.slice(0);g=b[--o];for(j=0;j<e;){g=g[a[j++]];if(g==null)break;h.push(g)}if(g&&typeof g==="object"&&d in g){f=g[d];break}}typeof f==="function"&&(f=f.call(h[h.length-1]));if(f==null)return c;return f}function e(a,c,e,d){var f="";a=b(a,c);if(d){if(a==null||a===!1||t(a)&&a.length===0)f+=e()}else if(t(a))v(a,function(a){c.push(a);f+=e();c.pop()});else if(typeof a==="object")c.push(a),f+=e(),c.pop();else if(typeof a==="function"){var g=c[c.length-1];f+=a.call(g,e(),function(a){return k(a,g)})||""}else a&&
(f+=e());return f}function f(b,e){e=e||{};for(var d=e.tags||a.tags,f=d[0],g=d[d.length-1],j=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],h=[],n=!1,p=!1,k=function(){if(n&&!p&&!e.space)for(;h.length;)j.splice(h.pop(),1);else h=[];p=n=!1},t=[],s,q,A,u=function(a){d=o(a).split(/\s+/);q=d[0];A=d[d.length-1]},z=function(a){j.push('";',s,'\nvar partial = partials["'+o(a)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},
v=function(a,d){var f=o(a);if(f==="")throw c(Error("Section name may not be empty"),b,da,e.file);t.push({name:f,inverted:d});j.push('";',s,'\nvar name = "'+f+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},ja=function(a){v(a,!0)},G=function(a){a=o(a);var d=t.length!=0&&t[t.length-1].name;if(!d||a!=d)throw c(Error('Section named "'+a+'" was never opened'),b,da,e.file);a=t.pop();j.push('";',"\n    return buffer;","\n  };","\n})();");a.inverted?
j.push("\nbuffer += renderSection(name,stack,callback,true);"):j.push("\nbuffer += renderSection(name,stack,callback);");j.push('\nbuffer += "')},na=function(a){j.push('";',s,'\nbuffer += lookup("'+o(a)+'",stack,"");','\nbuffer += "')},oa=function(a){j.push('";',s,'\nbuffer += escapeHTML(lookup("'+o(a)+'",stack,""));','\nbuffer += "')},da=1,L,w,O=0,ia=b.length;O<ia;++O)if(b.slice(O,O+f.length)===f){O+=f.length;L=b.substr(O,1);s="\nline = "+da+";";q=f;A=g;n=!0;switch(L){case "!":O++;w=null;break;case "=":O++;
g="="+g;w=u;break;case ">":O++;w=z;break;case "#":O++;w=v;break;case "^":O++;w=ja;break;case "/":O++;w=G;break;case "{":g="}"+g;case "&":O++;p=!0;w=na;break;default:p=!0,w=oa}L=b.indexOf(g,O);if(L===-1)throw c(Error('Tag "'+f+'" was not closed properly'),b,da,e.file);f=b.substring(O,L);w&&w(f);for(w=0;~(w=f.indexOf("\n",w));)da++,w++;O=L+g.length-1;f=q;g=A}else switch(L=b.substr(O,1),L){case '"':case "\\":p=!0;j.push("\\"+L);break;case "\r":break;case "\n":h.push(j.length);j.push("\\n");k();da++;
break;default:B.test(L)?h.push(j.length):p=!0,j.push(L)}if(t.length!=0)throw c(Error('Section "'+t[t.length-1].name+'" was not closed properly'),b,da,e.file);k();j.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");g=j.join("").replace(/buffer \+= "";\n/g,"");e.debug&&(typeof console!="undefined"&&console.log?console.log(g):typeof print==="function"&&print(g));return g}function g(a,g){var o=f(a,g),j=new Function("view,partials,stack,lookup,escapeHTML,renderSection,render",
o);return function(f,o){o=o||{};var h=[f];try{return j(f,o,h,b,d,e,k)}catch(n){throw c(n.error,a,n.line,g.file);}}}function h(a,b){b=b||{};if(b.cache!==!1)return z[a]||(z[a]=g(a,b)),z[a];return g(a,b)}function k(a,b,c){return h(a)(b,c)}a.name="mustache.js";a.version="0.5.0-dev";a.tags=["{{","}}"];a.parse=f;a.compile=h;a.render=k;a.clearCache=function(){z={}};a.to_html=function(a,b,c,e){a=k(a,b,c);if(typeof e==="function")e(a);else return a};var j=Object.prototype.toString,q=Array.isArray,s=Array.prototype.forEach,
u=String.prototype.trim,t;t=q?q:function(a){return j.call(a)==="[object Array]"};var v;v=s?function(a,b,c){return s.call(a,b,c)}:function(a,b,c){for(var e=0,d=a.length;e<d;++e)b.call(c,a[e],e,a)};var B=/^\s*$/,o;if(u)o=function(a){return a==null?"":u.call(a)};else{var n,p;B.test("\u00a0")?(n=/^\s+/,p=/\s+$/):(n=/^[\s\xA0]+/,p=/[\s\xA0]+$/);o=function(a){return a==null?"":String(a).replace(n,"").replace(p,"")}}var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z={}})(Mustache);
(function(a){function d(b){try{return b()}catch(c){a.console&&a.console.log&&a.console.log.apply&&a.console.log("Zenbox Error: ",c)}}function c(a,b,c){a&&a.addEventListener?a.addEventListener(b,c,!1):a&&a.attachEvent&&a.attachEvent("on"+b,c)}function b(){v=s.createElement("div");v.setAttribute("id","zenbox_tab");v.setAttribute("href","#");v.style.display="none";s.body.appendChild(v);B=s.createElement("div");B.setAttribute("id","zenbox_overlay");B.style.display="none";B.innerHTML='<div id="zenbox_container">  <div class="zenbox_header"><img id="zenbox_close"></div>  <iframe id="zenbox_body" frameborder="0" scrolling="auto" allowTransparency="true"></iframe></div><div id="zenbox_scrim">&nbsp;</div>';
s.body.appendChild(B);o=s.getElementById("zenbox_container");n=s.getElementById("zenbox_close");p=s.getElementById("zenbox_body");A=s.getElementById("zenbox_scrim");c(v,"click",function(){a.Zenbox.show()});c(n,"click",function(){a.Zenbox.hide()});c(A,"click",function(){a.Zenbox.hide()})}function e(a){for(var b in a)a.hasOwnProperty(b)&&(t[b]=b==="url"||b==="assetHost"?a[b]&&!u.test(a[b])?s.location.protocol+"//"+a[b]:a[b]:a[b])}function f(){if(t.hide_tab)v.style.display="none";else{v.setAttribute("title",
t.tabID);v.setAttribute("class","ZenboxTab"+t.tabPosition);v.setAttribute("className","ZenboxTab"+t.tabPosition);v.innerHTML='<div id="feedback_tab_text">'+t.tabID+"</div>";v.style.backgroundColor=t.tabColor;v.style.display="block";var a=v.className==="ZenboxTabRight"?"right":"left";v.style[a]=Math.ceil(-(v.offsetWidth-(v.offsetHeight-30))/2)+"px";if(navigator.userAgent.match(/MSIE [^9]/))a==="left"?(v.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=3)",v.style["-ms-filter"]='"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"',
v.style.left="-15px"):(v.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation=1)",v.style["-ms-filter"]='"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)"',a=navigator.userAgent.match(/MSIE 8/)?"-87px":navigator.userAgent.match(/MSIE 7/)?"-17px":"-50px",v.style.right=a)}}function g(b){b=b||a.event||{};b.cancelBubble=!0;b.returnValue=!1;b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();return!1}function h(){return t.assetHost+"/external/zenbox/v2.1/loading.html"}
function k(c){v||b();e(c);f();n.src=t.assetHost+"/external/zenbox/images/close_big.png";p.src=h();a.addEventListener("message",function(a){a.data==="hideZenbox"&&q()},!1)}function j(b){var c=p,e=t.url+"/account/dropboxes/"+t.dropboxID+"?x=1";t.request_subject&&(e+="&subject="+t.request_subject);t.request_description&&(e+="&description="+t.request_description);t.requester_name&&(e+="&name="+t.requester_name);t.requester_email&&(e+="&email="+t.requester_email);c.src=e;B.style.height=A.style.height=
Math.max(Math.max(s.body.scrollHeight,s.documentElement.scrollHeight),Math.max(s.body.offsetHeight,s.documentElement.offsetHeight),Math.max(s.body.clientHeight,s.documentElement.clientHeight))+"px";o.style.top={left:a.pageXOffset||s.documentElement.scrollLeft||s.body.scrollLeft,top:a.pageYOffset||s.documentElement.scrollTop||s.body.scrollTop}.top+50+"px";B.style.display="block";return g(b)}function q(a){B.style.display="none";p.src=h();return g(a)}var s=a.document,u=/^([a-zA-Z]+:)?\/\//,t={url:null,
dropboxID:null,tabID:"support",tabText:"Support",tabColor:"#000000",assetHost:"//assets.zendesk.com",tabPosition:"Left",hide_tab:!1,request_subject:null,request_description:null,requester_name:null,requester_email:null},v,B,o,n,p,A,z={init:function(a){d(function(){return k(a)})},update:function(a){d(function(){return k(a)})},render:function(a){d(function(){return j(a)})},show:function(a){d(function(){return j(a)})},hide:function(a){d(function(){return q(a)})}};c(a,"load",function(){a.zenbox_params&&
z.init(a.zenbox_params)});a.Zenbox=z})(this.window||this);(function(a){var d={};a.publish=function(){var c=Array.prototype.slice.call(arguments),b=c.shift();d[b]&&a.each(d[b],function(){this.apply(a,c)})};a.subscribe=function(a,b){d[a]||(d[a]=[]);d[a].push(b);return[a,b]};a.unsubscribe=function(c){d[c]&&a.each(d[c],function(a,e){this==e&&d[c].splice(a,1)})}})(jQuery);
(function(a){var d={decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:0.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}};if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();a.support=a.support||{};a.extend(a.support,{touch:"ontouchend"in document});var c=function(){return!1},b=function(a,b){var c=a;a>0?a>b&&(c=b):a<0-b&&(c=0-b);return c},e=function(a,b){this.removeClass(a.movingClass.up).removeClass(a.movingClass.down).removeClass(a.movingClass.left).removeClass(a.movingClass.right).removeClass(a.deceleratingClass.up).removeClass(a.deceleratingClass.down).removeClass(a.deceleratingClass.left).removeClass(a.deceleratingClass.right);
a.velocity>0&&this.addClass(b.right);a.velocity<0&&this.addClass(b.left);a.velocityY>0&&this.addClass(b.down);a.velocityY<0&&this.addClass(b.up)},f=function(a,b){var c=a[0];if(b.x&&c.scrollWidth>0){if(c.scrollLeft=b.scrollLeft=c.scrollLeft+b.velocity,Math.abs(b.velocity)>0)b.velocity=b.decelerate?Math.floor(Math.abs(b.velocity))===0?0:b.velocity*b.slowdown:b.velocity}else b.velocity=0;if(b.y&&c.scrollHeight>0){if(c.scrollTop=b.scrollTop=c.scrollTop+b.velocityY,Math.abs(b.velocityY)>0)b.velocityY=
b.decelerate?Math.floor(Math.abs(b.velocityY))===0?0:b.velocityY*b.slowdown:b.velocityY}else b.velocityY=0;e.call(a,b,b.deceleratingClass);typeof b.moved==="function"&&b.moved.call(a,b);Math.abs(b.velocity)>0||Math.abs(b.velocityY)>0?window.requestAnimationFrame(function(){f(a,b)}):typeof b.stopped==="function"&&b.stopped.call(a,b)},g=function(b){var c=a.kinetic.callMethods[b],e=Array.prototype.slice.call(arguments);c&&this.each(function(){var b=e.slice(1),d=a(this).data("kinetic-settings");b.unshift(d);
c.apply(this,b)})},h=function(b,e){var d=b[0];a.support.touch?(d.addEventListener("touchstart",e.events.touchStart,!1),d.addEventListener("touchend",e.events.inputEnd,!1),d.addEventListener("touchmove",e.events.touchMove,!1)):b.mousedown(e.events.inputDown).mouseup(e.events.inputEnd).mousemove(e.events.inputMove);b.click(e.events.inputClick).bind("selectstart",c);b.bind("dragstart",e.events.dragStart)},k=function(c){this.addClass("kinetic-active").each(function(){var g=a.extend({},d,c),k=this,u=a(this),
t,v=!1,B,o=!1,n=!1,p=1E3/g.throttleFPS,A,z;g.velocity=0;g.velocityY=0;var l=function(){n=B=t=!1};a(document).mouseup(l).click(l);var E=function(){g.velocity=b(v-t,g.maxvelocity);g.velocityY=b(o-B,g.maxvelocity)},D=function(b){if(a.isFunction(g.filterTarget))return g.filterTarget.call(k,b)!==!1;return!0},M=function(a,b){n=!0;g.velocity=v=0;g.velocityY=o=0;t=a;B=b},J=function(b,c){if(!A||new Date>new Date(A.getTime()+p))if(A=new Date,n&&(t||B))z&&(a(z).blur(),z=null,u.focus()),g.decelerate=!1,g.velocity=
g.velocityY=0,u[0].scrollLeft=g.scrollLeft=g.x?u[0].scrollLeft-(b-t):u[0].scrollLeft,u[0].scrollTop=g.scrollTop=g.y?u[0].scrollTop-(c-B):u[0].scrollTop,v=t,o=B,t=b,B=c,E(),e.call(u,g,g.movingClass),typeof g.moved==="function"&&g.moved.call(u,g)};g.events={touchStart:function(a){D(a.target)&&(M(a.touches[0].clientX,a.touches[0].clientY),a.stopPropagation())},touchMove:function(a){n&&(J(a.touches[0].clientX,a.touches[0].clientY),a.preventDefault&&a.preventDefault())},inputDown:function(a){if(D(a.target))M(a.clientX,
a.clientY),z=a.target,a.target.nodeName==="IMG"&&a.preventDefault(),a.stopPropagation()},inputEnd:function(a){if(t&&v&&g.decelerate===!1)g.decelerate=!0,E(),t=v=n=!1,f(u,g);z=null;a.preventDefault&&a.preventDefault()},inputMove:function(a){n&&(J(a.clientX,a.clientY),a.preventDefault&&a.preventDefault())},inputClick:function(a){if(Math.abs(g.velocity)>0)return a.preventDefault(),!1},dragStart:function(){if(z)return!1}};h(u,g);u.data("kinetic-settings",g).css("cursor","move");g.triggerHardware&&u.css("-webkit-transform",
"translate3d(0,0,0)")})};a.kinetic={settingsKey:"kinetic-settings",callMethods:{start:function(b,c){var e=a(this);if(b=a.extend(b,c))b.decelerate=!1,f(e,b)},end:function(b){a(this);if(b)b.decelerate=!0},stop:function(a){a.velocity=0;a.velocityY=0;a.decelerate=!0},detach:function(b){var e=a(this),d=e[0];a.support.touch?(d.removeEventListener("touchstart",b.events.touchStart,!1),d.removeEventListener("touchend",b.events.inputEnd,!1),d.removeEventListener("touchmove",b.events.touchMove,!1)):e.unbind("mousedown",
b.events.inputDown).unbind("mouseup",b.events.inputEnd).unbind("mousemove",b.events.inputMove);e.unbind("click",b.events.inputClick).unbind("selectstart",c);e.unbind("dragstart",b.events.dragStart);e.removeClass("kinetic-active").css("cursor","")},attach:function(b){var c=a(this);h(c,b);c.addClass("kinetic-active").css("cursor","move")}}};a.fn.kinetic=function(a){typeof a==="string"?g.apply(this,arguments):k.call(this,a);return this}})(window.jQuery||window.Zepto);
(function(a,d,c,b){var e=a(b),f=function(a,b){a.element.trigger("waypoint.reached",b);if(a.options.triggerOnce)a.element[d]("destroy")},g=function(a,b){if(!b)return-1;for(var c=b.waypoints.length-1;c>=0&&b.waypoints[c].element[0]!==a[0];)c-=1;return c},h=[],k=function(d){a.extend(this,{element:a(d),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:a.proxy(function(){var b=this.element.scrollTop(),e=b>this.oldScroll,d=this,g=a.grep(this.waypoints,function(a){return e?a.offset>d.oldScroll&&
a.offset<=b:a.offset<=d.oldScroll&&a.offset>b}),h=g.length;if(!this.oldScroll||!b)a[c]("refresh");this.oldScroll=b;h&&(e||g.reverse(),a.each(g,function(a,b){if(b.options.continuous||a===h-1)f(b,[e?"down":"up"])}))},this)});a(d).bind("scroll.waypoints",a.proxy(function(){if(!this.didScroll)this.didScroll=!0,b.setTimeout(a.proxy(function(){this.doScroll();this.didScroll=!1},this),a[c].settings.scrollThrottle)},this)).bind("resize.waypoints",a.proxy(function(){if(!this.didResize)this.didResize=!0,b.setTimeout(a.proxy(function(){a[c]("refresh");
this.didResize=!1},this),a[c].settings.resizeThrottle)},this));e.load(a.proxy(function(){this.doScroll()},this))},j=function(b){var c=null;a.each(h,function(a,e){if(e.element[0]===b)return c=e,!1});return c},q={init:function(b,e){this.each(function(){var f=a.fn[d].defaults.context,s,o=a(this);if(e&&e.context)f=e.context;a.isWindow(f)||(f=o.closest(f)[0]);s=j(f);s||(s=new k(f),h.push(s));var n=g(o,s),p=a.extend({},n<0?a.fn[d].defaults:s.waypoints[n].options,e);p.offset=p.offset==="bottom-in-view"?
function(){return(a.isWindow(f)?a[c]("viewportHeight"):a(f).height())-a(this).outerHeight()}:p.offset;n<0?s.waypoints.push({element:o,offset:null,options:p}):s.waypoints[n].options=p;b&&o.bind("waypoint.reached",b);e&&e.handler&&o.bind("waypoint.reached",e.handler)});a[c]("refresh");return this},remove:function(){return this.each(function(b,c){var e=a(c);a.each(h,function(a,b){var c=g(e,b);c>=0&&(b.waypoints.splice(c,1),b.waypoints.length||(b.element.unbind("scroll.waypoints resize.waypoints"),h.splice(a,
1)))})})},destroy:function(){return this.unbind("waypoint.reached")[d]("remove")}},s={refresh:function(){a.each(h,function(b,e){var d=a.isWindow(e.element[0]),g=d?0:e.element.offset().top,o=d?a[c]("viewportHeight"):e.element.height(),h=d?0:e.element.scrollTop();a.each(e.waypoints,function(a,b){if(b){var c=b.options.offset,d=b.offset;typeof b.options.offset==="function"?c=b.options.offset.apply(b.element):typeof b.options.offset==="string"&&(c=parseFloat(b.options.offset),c=b.options.offset.indexOf("%")?
Math.ceil(o*(c/100)):c);b.offset=b.element.offset().top-g+h-c;b.options.onlyOnScroll||(d!==null&&e.oldScroll>d&&e.oldScroll<=b.offset?f(b,["up"]):d!==null&&e.oldScroll<d&&e.oldScroll>=b.offset?f(b,["down"]):!d&&e.element.scrollTop()>b.offset&&f(b,["down"]))}});e.waypoints.sort(function(a,b){return a.offset-b.offset})})},viewportHeight:function(){return b.innerHeight?b.innerHeight:e.height()},aggregate:function(){var b=a();a.each(h,function(c,e){a.each(e.waypoints,function(a,c){b=b.add(c.element)})});
return b}};a.fn[d]=function(b){if(q[b])return q[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="function"||!b)return q.init.apply(this,arguments);else if(typeof b==="object")return q.init.apply(this,[null,b]);else a.error("Method "+b+" does not exist on jQuery "+d)};a.fn[d].defaults={continuous:!0,offset:0,triggerOnce:!1,context:b};a[c]=function(a){return s[a]?s[a].apply(this):s.aggregate()};a[c].settings={resizeThrottle:200,scrollThrottle:100};e.load(function(){a[c]("refresh")})})(jQuery,
"waypoint","waypoints",window);
(function(a,d){typeof exports==="object"?module.exports=d(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):typeof define==="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],d):a.URI=d(a.punycode,a.IPv6,a.SecondLevelDomains)})(this,function(a,d,c){function b(a,c){if(!(this instanceof b))return new b(a,c);a===void 0&&(a=typeof location!=="undefined"?location.href+"":"");this.href(a);if(c!==void 0)return this.absoluteTo(c);return this}function e(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,
"\\$1")}function f(a){return String(Object.prototype.toString.call(a))==="[object Array]"}function g(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}var h=b.prototype,k=Object.prototype.hasOwnProperty;b.duplicateQueryParameters=!1;b.protocol_expression=/^[a-z][a-z0-9-+-]*$/i;b.idn_expression=/[^a-z0-9\.-]/i;b.punycode_expression=/(xn--)/i;b.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;b.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
b.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;b.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};b.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;b.encode=g;b.decode=decodeURIComponent;b.iso8859=function(){b.encode=escape;b.decode=unescape};b.unicode=function(){b.encode=
g;b.decode=decodeURIComponent};b.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+",
"%2C":",","%3B":";","%3D":"="}}}};b.encodeQuery=function(a){return b.encode(a+"").replace(/%20/g,"+")};b.decodeQuery=function(a){return b.decode((a+"").replace(/\+/g,"%20"))};b.recodePath=function(a){a=(a+"").split("/");for(var c=0,e=a.length;c<e;c++)a[c]=b.encodePathSegment(b.decode(a[c]));return a.join("/")};b.decodePath=function(a){a=(a+"").split("/");for(var c=0,e=a.length;c<e;c++)a[c]=b.decodePathSegment(a[c]);return a.join("/")};var j={encode:"encode",decode:"decode"},q,s=function(a,c){return function(e){return b[c](e+
"").replace(b.characters[a][c].expression,function(e){return b.characters[a][c].map[e]})}};for(q in j)b[q+"PathSegment"]=s("pathname",j[q]);b.encodeReserved=s("reserved","encode");b.parse=function(a,c){var e;c||(c={});e=a.indexOf("#");if(e>-1)c.fragment=a.substring(e+1)||null,a=a.substring(0,e);e=a.indexOf("?");if(e>-1)c.query=a.substring(e+1)||null,a=a.substring(0,e);if(a.substring(0,2)==="//")c.protocol="",a=a.substring(2),a=b.parseAuthority(a,c);else if(e=a.indexOf(":"),e>-1)c.protocol=a.substring(0,
e),c.protocol&&!c.protocol.match(b.protocol_expression)?c.protocol=void 0:c.protocol==="file"?a=a.substring(e+3):a.substring(e+1,e+3)==="//"?(a=a.substring(e+3),a=b.parseAuthority(a,c)):(a=a.substring(e+1),c.urn=!0);c.path=a;return c};b.parseHost=function(a,b){var c=a.indexOf("/"),e;if(c===-1)c=a.length;a[0]==="["?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+2,c)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,
c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&a.substring(c)[0]!=="/"&&(c++,a="/"+a);return a.substring(c)||"/"};b.parseAuthority=function(a,c){a=b.parseUserinfo(a,c);return b.parseHost(a,c)};b.parseUserinfo=function(a,c){var e=a.indexOf("@"),d=a.indexOf("/");e>-1&&(d===-1||e<d)?(d=a.substring(0,e).split(":"),c.username=d[0]?b.decode(d[0]):null,d.shift(),c.password=d[0]?b.decode(d.join(":")):null,a=a.substring(e+1)):(c.username=null,c.password=null);return a};b.parseQuery=function(a){if(!a)return{};
a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};var c={};a=a.split("&");for(var e=a.length,d,f,g=0;g<e;g++)d=a[g].split("="),f=b.decodeQuery(d.shift()),d=d.length?b.decodeQuery(d.join("=")):null,c[f]?(typeof c[f]==="string"&&(c[f]=[c[f]]),c[f].push(d)):c[f]=d;return c};b.build=function(a){var c="";a.protocol&&(c+=a.protocol+":");if(!a.urn&&(c||a.hostname))c+="//";c+=b.buildAuthority(a)||"";typeof a.path==="string"&&(a.path[0]!=="/"&&typeof a.hostname==="string"&&(c+="/"),c+=a.path);
typeof a.query==="string"&&a.query&&(c+="?"+a.query);typeof a.fragment==="string"&&a.fragment&&(c+="#"+a.fragment);return c};b.buildHost=function(a){var c="";if(a.hostname)b.ip6_expression.test(a.hostname)?c+=a.port?"["+a.hostname+"]:"+a.port:a.hostname:(c+=a.hostname,a.port&&(c+=":"+a.port));else return"";return c};b.buildAuthority=function(a){return b.buildUserinfo(a)+b.buildHost(a)};b.buildUserinfo=function(a){var c="";a.username&&(c+=b.encode(a.username),a.password&&(c+=":"+b.encode(a.password)),
c+="@");return c};b.buildQuery=function(a,c){var e="",d,g,h,j;for(g in a)if(k.call(a,g)&&g)if(f(a[g])){d={};h=0;for(j=a[g].length;h<j;h++)a[g][h]!==void 0&&d[a[g][h]+""]===void 0&&(e+="&"+b.buildQueryParameter(g,a[g][h]),c!==!0&&(d[a[g][h]+""]=!0))}else a[g]!==void 0&&(e+="&"+b.buildQueryParameter(g,a[g]));return e.substring(1)};b.buildQueryParameter=function(a,c){return b.encodeQuery(a)+(c!==null?"="+b.encodeQuery(c):"")};b.addQuery=function(a,c,e){if(typeof c==="object")for(var d in c)k.call(c,
d)&&b.addQuery(a,d,c[d]);else if(typeof c==="string")a[c]===void 0?a[c]=e:(typeof a[c]==="string"&&(a[c]=[a[c]]),f(e)||(e=[e]),a[c]=a[c].concat(e));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};b.removeQuery=function(a,c,e){var d;if(f(c)){e=0;for(d=c.length;e<d;e++)a[c[e]]=void 0}else if(typeof c==="object")for(d in c)k.call(c,d)&&b.removeQuery(a,d,c[d]);else if(typeof c==="string")if(e!==void 0)if(a[c]===e)a[c]=void 0;else{if(f(a[c])){d=a[c];var g={},
h,j;if(f(e)){h=0;for(j=e.length;h<j;h++)g[e[h]]=!0}else g[e]=!0;h=0;for(j=d.length;h<j;h++)g[d[h]]!==void 0&&(d.splice(h,1),j--,h--);a[c]=d}}else a[c]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};b.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a[e]!==b[e]){e--;break}if(e<1)return a[0]===b[0]&&a[0]==="/"?"/":"";a[e]!=="/"&&(e=a.substring(0,e).lastIndexOf("/"));return a.substring(0,e+1)};b.withinString=function(a,
c){return a.replace(b.find_uri_expression,c)};b.ensureValidHostname=function(c){if(c.match(b.invalid_hostname_characters)){if(!a)throw new TypeError("Hostname '"+c+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(a.toASCII(c).match(b.invalid_hostname_characters))throw new TypeError("Hostname '"+c+"' contains characters other than [A-Z0-9.-]");}};h.build=function(a){if(a===!0)this._deferred_build=!0;else if(a===void 0||this._deferred_build)this._string=b.build(this._parts),
this._deferred_build=!1;return this};h.clone=function(){return new b(this)};h.toString=function(){return this.build(!1)._string};h.valueOf=function(){return this.toString()};j={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};s=function(a){return function(b,c){return b===void 0?this._parts[a]||"":(this._parts[a]=b,this.build(!c),this)}};for(q in j)h[q]=s(j[q]);j={query:"?",fragment:"#"};s=function(a,b){return function(c,e){return c===void 0?this._parts[a]||
"":(c!==null&&(c+="",c[0]===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!e),this)}};for(q in j)h[q]=s(q,j[q]);j={search:["?","query"],hash:["#","fragment"]};s=function(a,b){return function(c,e){var d=this[a](c,e);return typeof d==="string"&&d.length?b+d:d}};for(q in j)h[q]=s(j[q][1],j[q][0]);h.pathname=function(a,c){if(a===void 0||a===!0){var e=this._parts.path||(this._parts.urn?"":"/");return a?b.decodePath(e):e}else return this._parts.path=a?b.recodePath(a):"/",this.build(!c),this};h.path=
h.pathname;h.href=function(a,c){if(a===void 0)return this.toString();this._string="";this._parts={protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:b.duplicateQueryParameters};var e=a instanceof b,d=typeof a==="object"&&(a.hostname||a.path),f;!e&&d&&Object.prototype.toString.call(a)!=="[object Object]"&&(a=a.toString());if(typeof a==="string")this._parts=b.parse(a,this._parts);else if(e||d)for(f in e=e?a._parts:a,
e)k.call(this._parts,f)&&(this._parts[f]=e[f]);else throw new TypeError("invalid input");this.build(!c);return this};h.is=function(a){var e=!1,d=!1,f=!1,g=!1,h=!1,j=!1,k=!1,t=!this._parts.urn;this._parts.hostname&&(t=!1,d=b.ip4_expression.test(this._parts.hostname),f=b.ip6_expression.test(this._parts.hostname),e=d||f,h=(g=!e)&&c&&c.has(this._parts.hostname),j=g&&b.idn_expression.test(this._parts.hostname),k=g&&b.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return t;
case "absolute":return!t;case "domain":case "name":return g;case "sld":return h;case "ip":return e;case "ip4":case "ipv4":case "inet4":return d;case "ip6":case "ipv6":case "inet6":return f;case "idn":return j;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return k}return null};var u=h.protocol,t=h.port,v=h.hostname;h.protocol=function(a,b){if(a!==void 0&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");
return u.call(this,a,b)};h.scheme=h.protocol;h.port=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a!==void 0&&(a===0&&(a=null),a&&(a+="",a[0]===":"&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return t.call(this,a,b)};h.hostname=function(a,c){if(this._parts.urn)return a===void 0?"":this;if(a!==void 0){var e={};b.parseHost(a,e);a=e.hostname}return v.call(this,a,c)};h.host=function(a,c){if(this._parts.urn)return a===
void 0?"":this;return a===void 0?this._parts.hostname?b.buildHost(this._parts):"":(b.parseHost(a,this._parts),this.build(!c),this)};h.authority=function(a,c){if(this._parts.urn)return a===void 0?"":this;return a===void 0?this._parts.hostname?b.buildAuthority(this._parts):"":(b.parseAuthority(a,this._parts),this.build(!c),this)};h.userinfo=function(a,c){if(this._parts.urn)return a===void 0?"":this;if(a===void 0){if(!this._parts.username)return"";var e=b.buildUserinfo(this._parts);return e.substring(0,
e.length-1)}else return a[a.length-1]!=="@"&&(a+="@"),b.parseUserinfo(a,this._parts),this.build(!c),this};h.resource=function(a,c){var e;if(a===void 0)return this.path()+this.search()+this.hash();e=b.parse(a);this._parts.path=e.path;this._parts.query=e.query;this._parts.fragment=e.fragment;this.build(!c);return this};h.subdomain=function(a,c){if(this._parts.urn)return a===void 0?"":this;if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";return this._parts.hostname.substring(0,this._parts.hostname.length-
this.domain().length-1)||""}else{var d=this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length);d=RegExp("^"+e(d));a&&a[a.length-1]!=="."&&(a+=".");a&&b.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(d,a);this.build(!c);return this}};h.domain=function(a,c){if(this._parts.urn)return a===void 0?"":this;typeof a==="boolean"&&(c=a,a=void 0);if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.match(/\./g);if(d&&
d.length<2)return this._parts.hostname;d=this._parts.hostname.length-this.tld(c).length-1;d=this._parts.hostname.lastIndexOf(".",d-1)+1;return this._parts.hostname.substring(d)||""}else{if(!a)throw new TypeError("cannot set domain empty");b.ensureValidHostname(a);this._parts.hostname=!this._parts.hostname||this.is("IP")?a:this._parts.hostname.replace(RegExp(e(this.domain())+"$"),a);this.build(!c);return this}};h.tld=function(a,b){if(this._parts.urn)return a===void 0?"":this;typeof a==="boolean"&&
(b=a,a=void 0);if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.substring(this._parts.hostname.lastIndexOf(".")+1);if(b!==!0&&c&&c.list[d.toLowerCase()])return c.get(this._parts.hostname)||d;return d}else{if(a)if(a.match(/[^a-zA-Z0-9-]/))if(c&&c.is(a))d=RegExp(e(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a);else throw new TypeError("TLD '"+a+"' contains characters other than [A-Z0-9]");else if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");
else d=RegExp(e(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a);else throw new TypeError("cannot set TLD empty");this.build(!b);return this}};h.directory=function(a,c){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var d=this._parts.path.substring(0,this._parts.path.length-this.filename().length-1)||(this._parts.hostname?"/":"");return a?b.decodePath(d):d}else return d=
this._parts.path.substring(0,this._parts.path.length-this.filename().length),d=RegExp("^"+e(d)),this.is("relative")||(a||(a="/"),a[0]!=="/"&&(a="/"+a)),a&&a[a.length-1]!=="/"&&(a+="/"),a=b.recodePath(a),this._parts.path=this._parts.path.replace(d,a),this.build(!c),this};h.filename=function(a,c){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path||this._parts.path==="/")return"";var d=this._parts.path.substring(this._parts.path.lastIndexOf("/")+1);return a?b.decodePathSegment(d):
d}else{d=!1;a[0]==="/"&&(a=a.substring(1));a.match(/\.?\//)&&(d=!0);var f=RegExp(e(this.filename())+"$");a=b.recodePath(a);this._parts.path=this._parts.path.replace(f,a);d?this.normalizePath(c):this.build(!c);return this}};h.suffix=function(a,c){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path||this._parts.path==="/")return"";var d=this.filename(),f=d.lastIndexOf(".");if(f===-1)return"";d=d.substring(f+1);d=/^[a-z0-9%]+$/i.test(d)?d:"";return a?b.decodePathSegment(d):
d}else{a[0]==="."&&(a=a.substring(1));if(d=this.suffix())f=a?RegExp(e(d)+"$"):RegExp(e("."+d)+"$");else{if(!a)return this;this._parts.path+="."+b.recodePath(a)}if(f)a=b.recodePath(a),this._parts.path=this._parts.path.replace(f,a);this.build(!c);return this}};h.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g=d.substring(0,1)==="/";d=d.split(e);typeof a!=="number"&&(c=b,b=a,a=void 0);if(a!==void 0&&typeof a!=="number")throw Error("Bad segment '"+a+"', must be 0-based integer");
g&&d.shift();a<0&&(a=Math.max(d.length+a,0));if(b===void 0)return a===void 0?d:d[a];else if(a===null||d[a]===void 0)if(f(b))d=b;else{if(b||typeof b==="string"&&b.length)d[d.length-1]===""?d[d.length-1]=b:d.push(b)}else b||typeof b==="string"&&b.length?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};var B=h.query;h.query=function(a,c){return a===!0?b.parseQuery(this._parts.query):a!==void 0&&typeof a!=="string"?(this._parts.query=b.buildQuery(a,this._parts.duplicateQueryParameters),
this.build(!c),this):B.call(this,a,c)};h.addQuery=function(a,c,e){var d=b.parseQuery(this._parts.query);b.addQuery(d,a,c===void 0?null:c);this._parts.query=b.buildQuery(d,this._parts.duplicateQueryParameters);typeof a!=="string"&&(e=c);this.build(!e);return this};h.removeQuery=function(a,c,e){var d=b.parseQuery(this._parts.query);b.removeQuery(d,a,c);this._parts.query=b.buildQuery(d,this._parts.duplicateQueryParameters);typeof a!=="string"&&(e=c);this.build(!e);return this};h.addSearch=h.addQuery;
h.removeSearch=h.removeQuery;h.normalize=function(){if(this._parts.urn)return this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build();return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};h.normalizeProtocol=function(a){if(typeof this._parts.protocol==="string")this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a);return this};h.normalizeHostname=function(b){if(this._parts.hostname){if(this.is("IDN")&&
a)this._parts.hostname=a.toASCII(this._parts.hostname);else if(this.is("IPv6")&&d)this._parts.hostname=d.best(this._parts.hostname);this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!b)}return this};h.normalizePort=function(a){if(typeof this._parts.protocol==="string"&&this._parts.port===b.defaultPorts[this._parts.protocol])this._parts.port=null,this.build(!a);return this};h.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||this._parts.path==="/")return this;
var c,e,d=this._parts.path,f,g;d[0]!=="/"&&(d[0]==="."&&(e=d.substring(0,d.indexOf("/"))),c=!0,d="/"+d);for(d=d.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){f=d.indexOf("/../");if(f===-1)break;else if(f===0){d=d.substring(3);break}g=d.substring(0,f).lastIndexOf("/");g===-1&&(g=f);d=d.substring(0,g)+d.substring(f+3)}c&&this.is("relative")&&(d=e?e+d:d.substring(1));d=b.recodePath(d);this._parts.path=d;this.build(!a);return this};h.normalizePathname=h.normalizePath;h.normalizeQuery=function(a){if(typeof this._parts.query===
"string")this._parts.query.length?this.query(b.parseQuery(this._parts.query)):this._parts.query=null,this.build(!a);return this};h.normalizeFragment=function(a){if(!this._parts.fragment)this._parts.fragment=null,this.build(!a);return this};h.normalizeSearch=h.normalizeQuery;h.normalizeHash=h.normalizeFragment;h.iso8859=function(){var a=b.encode,c=b.decode;b.encode=escape;b.decode=decodeURIComponent;this.normalize();b.encode=a;b.decode=c;return this};h.unicode=function(){var a=b.encode,c=b.decode;
b.encode=g;b.decode=unescape;this.normalize();b.encode=a;b.decode=c;return this};h.readable=function(){var c=this.clone();c.username("").password("").normalize();var e="";c._parts.protocol&&(e+=c._parts.protocol+"://");c._parts.hostname&&(c.is("punycode")&&a?(e+=a.toUnicode(c._parts.hostname),c._parts.port&&(e+=":"+c._parts.port)):e+=c.host());c._parts.hostname&&c._parts.path&&c._parts.path[0]!=="/"&&(e+="/");e+=c.path(!0);if(c._parts.query){for(var d="",f=0,g=c._parts.query.split("&"),h=g.length;f<
h;f++){var j=(g[f]||"").split("=");d+="&"+b.decodeQuery(j[0]).replace(/&/g,"%26");j[1]!==void 0&&(d+="="+b.decodeQuery(j[1]).replace(/&/g,"%26"))}e+="?"+d.substring(1)}e+=c.hash();return e};h.absoluteTo=function(a){var c=this.clone(),e=["protocol","username","password","hostname","port"],d,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");if(this._parts.hostname)return c;a instanceof b||(a=new b(a));for(d=0;f=e[d];d++)c._parts[f]=a._parts[f];e=["query",
"path"];for(d=0;f=e[d];d++)!c._parts[f]&&a._parts[f]&&(c._parts[f]=a._parts[f]);if(c.path()[0]!=="/")a=a.directory(),c._parts.path=(a?a+"/":"")+c._parts.path,c.normalizePath();c.build();return c};h.relativeTo=function(a){var c=this.clone(),d=["protocol","username","password","hostname","port"],f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierachical components");a instanceof b||(a=new b(a));if(this.path()[0]!=="/"||a.path()[0]!=="/")throw Error("Cannot calculate common path from non-relative URLs");
f=b.commonPath(c.path(),a.path());a=a.directory();for(var g=0,h;h=d[g];g++)c._parts[h]=null;if(!f||f==="/")return c;if(a+"/"===f)c._parts.path="./"+c.filename();else{d="../";f=RegExp("^"+e(f));for(a=a.replace(f,"/").match(/\//g).length-1;a--;)d+="../";c._parts.path=c._parts.path.replace(f,d)}c.build();return c};h.equals=function(a){var c=this.clone(),e=new b(a),d={},g={};a={};var h;c.normalize();e.normalize();if(c.toString()===e.toString())return!0;d=c.query();g=e.query();c.query("");e.query("");
if(c.toString()!==e.toString())return!1;if(d.length!==g.length)return!1;d=b.parseQuery(d);g=b.parseQuery(g);for(h in d)if(k.call(d,h)){if(f(d[h])){if(!f(g[h]))return!1;if(d[h].length!==g[h].length)return!1;d[h].sort();g[h].sort();c=0;for(e=d[h].length;c<e;c++)if(d[h][c]!==g[h][c])return!1}else if(d[h]!==g[h])return!1;a[h]=!0}for(h in g)if(k.call(g,h)&&!a[h])return!1;return!0};h.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};return b});
(function(a,d){typeof exports==="object"?module.exports=d(require("jquery","./URI")):typeof define==="function"&&define.amd?define(["jquery","./URI"],d):d(a.jQuery,a.URI)})(this,function(a,d){function c(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function b(b){var c;a.each(["src","href","action"],function(a,e){if(e in b)return c=e,!1;return!0});if(!(b.nodeName.toLowerCase()==="input"&&b.type!=="image"))return c}function e(b){return{get:function(c){return a(c).uri()[b]()},set:function(c,
e){a(c).uri()[b](e);return e}}}function f(c,e){var d,f,j;if(!b(c)||!e)return!1;d=e.match(q);if(!d||!d[5]&&d[2]!==":"&&!h[d[2]])return!1;j=a(c).uri();if(d[5])return j.is(d[5]);else if(d[2]===":"){f=d[1].toLowerCase()+":";if(!h[f])return!1;return h[f](j,d[4])}else{f=d[1].toLowerCase();if(!g[f])return!1;return h[d[2]](j[f](),d[4],f)}}var g={},h={"=":function(a,b){return a===b},"^=":function(a,b){return!!(a+"").match(RegExp("^"+c(b),"i"))},"$=":function(a,b){return!!(a+"").match(RegExp(c(b)+"$","i"))},
"*=":function(a,b,e){e=="directory"&&(a+="/");return!!(a+"").match(RegExp(c(b),"i"))},"equals:":function(a,b){return a.equals(b)},"is:":function(a,b){return a.is(b)}};a.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(b,c){g[c]=!0;a.attrHooks["uri:"+c]=e(c)});var k={get:function(b){return a(b).uri()},set:function(b,c){return a(b).uri().href(c).toString()}};
a.each(["src","href","action","uri"],function(b,c){a.attrHooks[c]={set:k.set}});a.attrHooks.uri.get=k.get;a.fn.uri=function(a){var c=this.first(),e=c.get(0),f=b(e);if(!f)throw Error('Element "'+e.nodeName+'" does not have either property: href, src, action');if(a!==void 0){var g=c.data("uri");if(g)return g.href(a);a instanceof d||(a=d(a))}else if(a=c.data("uri"))return a;else a=d(c.attr(f));a._dom_element=e;a._dom_attribute=f;a.normalize();c.data("uri",a);return a};d.prototype.build=function(a){if(this._dom_element)this._string=
d.build(this._parts),this._deferred_build=!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string;else if(a===!0)this._deferred_build=!0;else if(a===void 0||this._deferred_build)this._string=d.build(this._parts),this._deferred_build=!1;return this};var j,q=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;j=a.expr.createPseudo?a.expr.createPseudo(function(a){return function(b){return f(b,a)}}):function(a,b,c){return f(a,
c[3])};a.expr[":"].uri=j;return{}});F=function(){};(function(){window.ksr_navigate=function(a){typeof window.ksr_before_unload==="function"?window.ksr_before_unload(function(){window.location=a}):window.location=a}})();
(function(a){function d(b,c){this.$elem=b;this.$close_a=b.find("a.modal_dialog_close");var d=b.children(),g=d.children(),h=g.children();d=b.add(d).add(g).add(h).add(this.$close_a);this.options=a.extend({close_link:d,scroll_margin:20,ignore_parent:!1,prevent_close:!1},c);(this.prevent_close=this.options.prevent_close)&&this.$close_a.hide();this.options.ignore_parent||this._bind_parent_modal();this._remember_original_css();this._attach()}function c(b,c){var d,g=a([]);a.each(window.seen_remote_urls,
function(a){url_equals(b,a,{include_query:!0})&&(d=this)});if(!d)g=a.create_modal_dialog(c.title||"","spinner",c),g.addClass("spinning"),d=g.data("modal_dialog"),d.remote_xhr=a.ajax({url:b,type:"get",dataType:c.dataType,beforeSend:c.beforeSend,success:function(d){d=a(d);(c.remote_modal_dialog_contents_loaded||F).apply(this,[d,c,b]);g.find(".modal_dialog_body").html(d);g.removeClass("spinning");g.trigger("size_change");g.trigger("modal_dialog:remote_dialog_loaded")},error:function(){g.trigger("modal_dialog:errored",
arguments);g.remove();delete window.seen_remote_urls[b]}}),d.remote_url=b,c.do_not_cache||(window.seen_remote_urls[b]=d);return d}a.fn.modal_dialog=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("modal_dialog");c||(c=new d(a(this),b),a(this).data("modal_dialog",c));c.open(b.event)})};window.seen_remote_urls={};a.create_modal_dialog=function(b,c,f){f=f||{};b.length&&(b="<h4>"+b+"</h4>");b=a('<div class="modal_dialog"'+(f.id!==void 0?' id="'+f.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_ie6_background"></div><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+
b+'<a class="modal_dialog_close" href="#"><span class="icon-x">Close</span></a></div><div class="modal_dialog_body">'+c+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');a("body").append(b);f=new d(b,f);b.data("modal_dialog",f);return b};window.F=function(){};a.open_remote_modal_dialog=function(a,e){e=e||{};var d=c(a,e);d.open(e.event);return d};a.extend(d.prototype,{_attach:function(){var b=this,c=a(this.options.close_link);this.$elem.bind("close.modal_dialog",function(){b.close()});
this.$elem.bind("size_change.modal_dialog",function(){b._on_size_changed()});this.$elem.bind("prevent_close.modal_dialog",function(){b._set_prevent_close(!0)});this.$elem.bind("allow_close.modal_dialog",function(){b._set_prevent_close(!1)});a(window).bind("resize.modal_dialog",function(){b._on_size_changed()});c.bind("click.modal_dialog",function(a){c.index(a.target)!==-1&&(b.close(a),a.preventDefault())});this.$elem.keypress(function(a){a.keyCode===27&&(b.close(a),a.preventDefault())})},_detach:function(){a(this.options.close_link).unbind("click.modal_dialog");
this.$elem.unbind("size_change.modal_dialog");a(window).unbind("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=a([]);this.$elem.bind("before_close.modal_dialog",function(){a(this).data("modal_dialog").$parent_modal.show();a(this).data("modal_dialog").$parent_modal=a([])})},_on_size_changed:function(a){this.$elem.find("div.modal_dialog_inner").height()>this._get_viewport_height()?this._resize_to_position_absolute(a):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},
_resize_to_position_absolute:function(b){a.browser.msie&&a.browser.version<"7"&&(this.$elem[0].style.removeExpression("top"),this.$elem[0].style.removeExpression("height"));var c=a("body").height(),d=a("body")[0].scrollTop+a("html")[0].scrollTop,g=this.$elem.find("div.modal_dialog_inner"),h=g.height(),k=this.options.scroll_margin,j=d+h+k*2;c=j>c?j:c;h=c-d-h-k*2;j=this.$elem.css("position")==="absolute";this.$elem.css("position","absolute");this.$elem.css("top","0");this.$elem.css("height",c);if(!j||
b)g.css("margin-top",d+k),g.css("margin-bottom",h)},_remember_original_css:function(){this._elem_original_css={};this._inner_original_css={};var b=this.$elem.find("div.modal_dialog_inner"),c=["position","top"],d=["margin-top","margin-bottom"],g=this;a.each(c,function(a){a=c[a];g._elem_original_css[a]=g.$elem.css(a)});a.each(d,function(a){a=d[a];g._inner_original_css[a]=b.css(a)})},_get_viewport_height:function(){return a.browser.msie?window.document.documentElement.clientHeight:window.innerHeight},
_apply_original_css:function(){var b,c,d=this.$elem.find("div.modal_dialog_inner");for(b in this._elem_original_css)this._elem_original_css.hasOwnProperty(b)&&(c=this._elem_original_css[b],this.$elem.css(b,c));for(b in this._inner_original_css)this._inner_original_css.hasOwnProperty(b)&&(c=this._inner_original_css[b],d.css(b,c));a.browser.msie&&a.browser.version<"7"?(this.$elem[0].style.top=document.documentElement.scrollTop,this.$elem[0].style.setExpression("top","eval(document.documentElement.scrollTop)"),
this.$elem[0].style.height=document.documentElement.clientHeight,this.$elem[0].style.setExpression("height","eval(document.documentElement.clientHeight)")):this.$elem.css("height","100%")},_set_prevent_close:function(a){(this.prevent_close=a)?this.$close_a.hide():this.$close_a.show()},open:function(b){var c=this.$elem.parents("body");c.length&&c.append(this.$elem);if(!this.options.ignore_parent)this.$parent_modal=a(".modal_dialog:visible"),this.$parent_modal.hide();this.$elem.show();this._on_size_changed(!0);
this.$elem.trigger("modal_dialog:opened",[b]);this._attach()},close:function(a){if(!this.prevent_close&&(this.$elem.trigger("before_close.modal_dialog",[a]),!a||!a.isDefaultPrevented()))this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.$elem.trigger("closed.modal_dialog",[a])}});a.modal_confirm=function(b,c){var d,g;c=a.extend({},{message:"Do you really want to do this?",confirm_text:"Confirm",cancel_text:"Cancel",title:"Are you sure?"},c);d=a.create_modal_dialog(c.title,
'<div style="max-width:600px;">'+c.message+"<p class='clearfix'><a class='confirm button-neutral left' href='#'>"+c.confirm_text+"</a><a class='cancel button-space left' href='#'>"+c.cancel_text+"</a></p></div>");g=d.data("modal_dialog");d.find(".cancel").click(function(a){a.preventDefault();g.close()});d.find(".confirm").click(function(a){a.preventDefault();b();g.close()});g.open()}})(jQuery);
(function(a){function d(b,c){this.$elem=b;this.$form=b.closest("form");this.options=a.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},c);this.url=this.options.url||this.$form.attr("action");this.ajax_url=this.options.file_extension?this.ensure_file_extension(this.options.file_extension):this.url;this.search_xhr=this.last_search=!1;this.cache=this.options.client_side_cache?{}:!1;this.active=!0;this._attach()}var c;a.fn.livesearch=function(b){b=
b||{};return a(this).each(function(){var c=a(this).data("livesearch");c||(c=new d(a(this),b),a(this).data("livesearch",c))})};a.extend(d.prototype,{_attach:function(){var a=this;this.$elem.attr("autocomplete","off");this.$elem.bind("keypress cut paste input",function(){a.active&&(clearTimeout(c),c=setTimeout(function(){a.search()},a.options.delay))});this.options.process_data||this.options.serialize.bind("change",function(){a.search()});this.$elem.bind("livesearch:suspend",function(){a.active=!1});
this.$elem.bind("livesearch:activate",function(){a.active=!0});this.$elem.bind("livesearch:cancel",function(){a.search_xhr&&a.search_xhr.abort();a.last_search=!1})},ensure_file_extension:function(a){var c=window.location.host.replace(/[^\w\d]/g,function(a){return"\\"+a});return this.url.replace(RegExp("((?:"+c+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)"),function(c,e,d,k){return e+"."+a+k})},suspend_while:function(a){this.active=!1;a();var c=this;setTimeout(function(){c.active=!0},100)},search:function(){var b=
this,c=this.options.serialize.serialize();this.options.process_data&&(c=this.options.process_data.apply(this,[c]),typeof c==="object"&&(c=a.param(c)));if(c!==this.last_search&&!(this.$elem.val().length<this.options.minimum_characters))this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[c]&&typeof this.cache[c]!=="function"?this.$elem.trigger("livesearch:results",[this.cache[c]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=a.ajax({type:"get",
url:this.ajax_url,dataType:this.options.dataType,data:c,global:!1,success:function(a){a!==null&&(b.$elem.trigger("livesearch:results",[a]),b.$elem.removeClass("searching"),b.cache&&(b.cache[c]=a))},error:function(){b.$elem.trigger("livesearch:ajax_error");b.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=c}})})(jQuery);
(function(a){function d(b,c){this.$elem=b;this.options=a.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(a){return a}},c);var d=this.$elem.closest(".field_with_icon"),g=a([]);g=d.length?d.siblings(".results"):this.$elem.siblings(".results");g.length?(this.$results=g,this.$results.find("div.no_results").remove()):(this.$results=a('<div class="results"></div>'),d.length?d.after(this.$results):this.$elem.after(this.$results));this.$results.find("ul.result_list").length||
this.$results.append('<ul class="result_list"></ul>');this.$no_results=a('<div class="no_results">'+this.options.no_results_html+"</div>");this.$no_results.hide();this.$results.append(this.$no_results);this.handle_optional_content();this.livesearch=b.livesearch(this.options).data("livesearch");this._attach()}var c={UP:38,DOWN:40,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};a.fn.livesearch_input_dropdown=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("livesearch.input_dropdown");
c||(c=new d(a(this),b),a(this).data("livesearch.input_dropdown",c))})};a.extend(d.prototype,{_attach:function(){var b=this;this.$elem.bind("livesearch:results",function(a,c){b.options.process_results&&(c=b.options.process_results(c));b.show_results(c);b.push_history(c)});this.bind_results();this.bind_popstate();this.$elem.bind((a.browser.opera?"keypress":"keydown")+".autocomplete",function(a){var d=!!b.$results.find(".selected").length;switch(a.keyCode){case c.UP:d?(d=b.$results.find(".selected").prev(":not(.not_result)"),
d.length||(d=b.$results.find("li:not(.not_result)").last()),b.select(d,!1)):b.select(b.$results.find("li:not(.not_result)").last(),!1);a.preventDefault();break;case c.DOWN:d?(d=b.$results.find(".selected").next(":not(.not_result)"),d.length||(d=b.$results.find("li:not(.not_result)").first()),b.select(d,!1)):b.select(b.$results.find("li:not(.not_result)").first(),!1);a.preventDefault();break;case c.ENTER:d=b.$results.find(".selected");if(!d.length&&b.input_can_submit())break;b.select(d,!0);a.preventDefault()}})},
history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var a=this;this.replacing_history_state=!1;window.onpopstate=function(c){c.state&&c.state.livesearch?(a.show_results(c.state.livesearch.results),a.livesearch.suspend_while(function(){a.$elem.val(c.state.livesearch.input_value).trigger("input")})):a.reset(!0)}}},input_can_submit:function(){var a=this.livesearch.search_xhr.readyState;
return this.options.input_can_submit_on_enter&&!(a>0&&a<4)&&this.$elem.is(":focus")},bind_results:function(){var b=this;this.$results.find("li").bind("click",function(){b.select(a(this),!0)});this.$results.find("li").bind("mouseover",function(){b.select(a(this));b.unselect_on_mouseout=!0});this.$results.bind("mouseout",function(){b.unselect_on_mouseout&&b.unselect_currently_selected()});this.$elem.bind("livesearch:reveal_results",function(){b.reveal_results()})},build_result_names_list:function(b){var c=
[],d=this;a.each(b,function(){var a=this;d.options.return_name_from_result?a=d.options.return_name_from_result(this):this!=="string"&&(a=this[0]);c.push(a)});return c},show_results:function(b){var c=this.$results.children("ul"),d=a([]),g;if(b.results)g=b,b=b.results;this.unselect_currently_selected();c.empty();b.length?(this.$no_results.hide(),c.show()):(this.$no_results.show(),c.hide());d=this.build_result_names_list(b);a.each(d,function(d){var f=a("<li>"+this+"</li>");f.data("livesearch_result",
b[d]);c.append(f)});g&&g.count>b.length&&(g="see all "+g.count+" results",d=a("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:g,"class":"see_all not_result"}).html('<span class="icon-arrow"></span>&nbsp;'+g).wrap("<li>"),c.append(d));this.bind_results();this.$elem.trigger("livesearch:reveal_results")},push_history:function(a){if(this.history_api_supported()&&!this.options.ignore_history)typeof a==="string"&&(a=JSON.parse(a)),a={livesearch:{input_value:this.$elem.val(),
results:a}},this.replacing_history_state?(window.history.replaceState(a),this.replacing_history_state=!1):window.history.pushState(a,"","?"+this.livesearch.last_search)},reveal_results:function(){var b=this;this.$results.slideDown(function(){a(window).resize();b.$results.trigger("sticky_bar:fix_to_bottom");b.$results.trigger("shifted")})},reset:function(a){this.$results.hide();this.$elem.val("");a&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var a=this.$results.children("ul").children("li.selected");
a.trigger("livesearch:unselect");a.removeClass("selected");this.unselect_on_mouseout=!1},select:function(a,c){var d=this;a.is(".not_result")||(this.unselect_currently_selected(),a.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){d.$elem.val(a.text());d.$elem.focus()}),a.trigger("livesearch:soft_select"),c&&a.trigger("livesearch:selected",[a.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})})(jQuery);
(function(a){a.fn.livesearch_pretty_input_dropdown=function(d){d=d||{};return a(this).each(function(){function c(){this.value?g.show():g.hide()}function b(){f.val("");f.trigger("livesearch:cancel").trigger("livesearch:close_results")}var e=a(this),f=e.find("input[type=text]"),g=e.find(".icon-search-clear"),h=f.siblings(".icon-search"),k;f.livesearch_input_dropdown(a.extend(d,{update_input:!1}));k=f.data("livesearch.input_dropdown");c.call(f[0]);f.bind("keypress cut paste input livesearch:close_results blur",
c);f.bind("livesearch:searching",function(){h.removeClass("icon-search").addClass("icon-loading-small")});f.bind("livesearch:results livesearch:ajax_error",function(){h.removeClass("icon-loading-small").addClass("icon-search")});f.bind("livesearch:results",function(){if(!d.input_can_submit_on_enter){var a=f.siblings(".results");k.select(a.find("li:first"))}});g.bind("click",function(){f.focus();b()});f.bind("livesearch:close_results",function(){f.siblings(".results").slideUp(function(){a(window).resize();
a(this).trigger("sticky_bar:fix_to_bottom")})});f.bind("blur",function(){f.val().length<3&&b()})})}})(jQuery);(function(a){a.fn.livesearch_navigator=function(){return a(this).each(function(){var d=a(this);d.livesearch_pretty_input_dropdown();d.bind("livesearch:selected",function(a,b){if(b)window.location=b[1]})})}})(jQuery);
(function(a){a.fn.livesearch_selector=function(d){d=a.extend({url:!1,cancel_copy:"Cancel",target_input:!1},d);return a(this).each(function(){function c(){e.hide();e.attr("disabled","disabled");e.siblings(".icon-search-clear, .icon-search").hide();var b=a('<div class="field-selected"><span class="value">'+e.val()+'</span><a class="cancel-link" href="#">'+d.cancel_copy+"</a></div>");e.siblings("div.field-selected").remove();e.after(b);e.siblings(".results").slideUp();e.trigger("livesearch_selector:select",
[e.val()]);b.find("a.cancel-link").click(function(a){a.preventDefault();e.val("");b.remove();e.removeAttr("disabled");e.siblings(".icon-search-clear, .icon-search").show();e.show();e.focus();f.val("");e.trigger("dirty");e.trigger("livesearch_selector:unselect")})}var b=a(this),e=b.find('input[type="text"]'),f=d.target_input||b.find('input[type="hidden"]'),g=e.siblings(".icon-search"),h;b.addClass("search");f.val()&&e.val()&&c();d.url=d.url||b.closest("form").attr("action");h=e.livesearch_input_dropdown(d);
e.bind("livesearch:searching",function(){g.removeClass("icon-search").addClass("icon-loading-small")});e.bind("livesearch:results livesearch:ajax_error",function(){g.removeClass("icon-loading-small").addClass("icon-search")});e.bind("livesearch:results",function(){var a=e.siblings(".results");h.select(a.find("li:first"))});b.bind("livesearch:selected",function(a,b){b&&(f.val(b[1]),c())})})}})(jQuery);
(function(a){a.fn.livesearch_multi_selector=function(d){d=a.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},d);return a(this).each(function(){function c(b){var c=a('<a class="cancel-link" href="#">'+d.cancel_copy+"</a>"),e=b.find(".destroy");b.append(c);e.val()&&e.val()!=="false"&&b.hide();c.click(function(a){a.preventDefault();b.fadeOut(function(){e.val("1");e.length||b.remove()})})}var b=a(this),e=b.find('input[type="text"]'),f=e.closest(".field_with_icon"),g=b.find("ol.search-selected,ul.search-selected"),
h=e.siblings(".icon-search"),k=e.attr("name"),j=e.siblings(".position").attr("name"),q=d;q.url=d.url||b.closest("form").attr("action");e.livesearch_input_dropdown(q);d.sortable&&g.sortable({containment:"document",axis:"y",update:function(){g.find("input.position").each(function(b){a(this).val(b)})}});b.addClass("search");e.attr("name","");g.find("li").each(function(){c(a(this))});e.bind("livesearch:searching",function(){h.removeClass("icon-search").addClass("icon-loading-small")});e.bind("livesearch:results livesearch:ajax_error",
function(){h.removeClass("icon-loading-small").addClass("icon-search")});b.bind("livesearch:selected",function(b,h){if(h){var t=k.replace("[template]","["+g.children("li").length+"]"),q=!1;j&&(q=j.replace("[template]","["+g.children("li").length+"]"));t=a("<li>"+h[0]+'<input type="hidden" name="'+t+'" value="'+h[1]+'"/></li>');d.sortable&&(q&&t.append('<input type="hidden" class="position" name="'+q+'" />'),g.find("input.position").each(function(b){a(this).val(b)}));g.append(t);c(t);e.val("");f.siblings(".results").slideUp();
e.trigger("livesearch:cancel")}})})}})(jQuery);
(function(a){function d(c,b){this.$elem=c;this.options=b;this.$target=this.options.target||c;this.offset=this.options.sprite_orientation&&this.options.sprite_orientation==="horizontal"?this.$target.width():this.$target.height();this.index=0;this.playing=!0;this.$index_control_children=this.options.index_control?this.options.index_control.children():a([]);if(!this.options.should_autoadvance_callback)this.options.should_autoadvance_callback=function(){return!0};this.number=this.options.number||this.$index_control_children.length;
this.update_offset();this._attach();b.play_delay&&this.playing_timer()}a.fn.spriteshow=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("spriteshow");b||(b=new d(a(this),c),a(this).data("spriteshow",b))})};a.extend(d.prototype,{_attach:function(){var c=this;this.$index_control_children.click(function(b){b.preventDefault();c.set_index(a(this).index());c.pause()});this.options.controls&&(this.options.controls.children(".left").click(function(a){a.preventDefault();c.page_left();
c.pause()}),this.options.controls.children(".right").click(function(a){a.preventDefault();c.page_right();c.pause()}),this.options.controls.children(".play-pause").click(function(){c.playing?c.pause():c.play()}))},update_offset:function(){var c=a([]);if(this.options.effect==="fade")c=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(c),this.$target.fadeOut(function(){a(this).remove()}),this.$target=c;this.current_offset=this.index*this.offset;this.options.sprite_orientation&&
this.options.sprite_orientation==="horizontal"?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(a){this.index=a;this.$index_control_children.removeClass("selected");this.$index_control_children.filter(":eq("+a.toString()+")").addClass("selected");this.$target.trigger("spriteshow:index",[a]);this.update_offset()},page_left:function(){var a=this.index-1;a<0&&(a=this.number-
1);this.set_index(a)},page_right:function(){var a=this.index+1;a>=this.number&&(a=0,this.options.play_once&&this.pause());this.set_index(a)},playing_timer:function(){var a=this;this.play_timeout=setTimeout(function(){a.playing&&a.options.should_autoadvance_callback()&&a.page_right();if(a.options.pause_when_behind_by){var b=(new Date).getTime();a.last_play_date&&Math.abs(a.last_play_date-b-a.options.play_delay)>a.options.pause_when_behind_by?(a.slow_strikes?a.slow_strikes+=1:a.slow_strikes=0,a.slow_strikes>
3&&a.pause()):a.slow_strikes=0;a.last_play_date=b}a.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0;this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1;this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})})(jQuery);
$.fn.validate=function(a){var d=$(this),c;d.data("validations")&&(c=!1,$.each(d.data("validations"),function(){if(!this(d.val()))return c=!0,!1}),c?(d.trigger("field_invalid"),d.focus(),a&&a.invalid&&a.invalid()):(d.trigger("field_valid"),a&&a.valid&&a.valid()))};
(function(a){a.fn.confirm_submit=function(d){d=d||{};return a(this).each(function(){var c=a(this);c.bind("submit.confirm_submit",function(b){b.preventDefault();b=a.create_modal_dialog(d.title||"Are you sure?",'<div class="modal_delete_confirmation"><p class="copy">'+(d.copy||"Really, buddy?")+'</p><div class="buttons"><a href="#" class="yes button-positive">'+(d.yes_copy||"Yes")+'</a><a href="#" class="no">'+(d.no_copy||"No Thanks!")+"</a></div></div>");c.removeAttr("submitting");b.find("a.yes").bind("click",
function(a){a.preventDefault();c.unbind("submit.confirm_submit");c.submit()});b.find("a.no").bind("click",function(b){b.preventDefault();a(this).trigger("close")});b.data("modal_dialog").open()})})}})(jQuery);(function(a){var d=function(){},c=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],b;if(window.console)a.console=window.console;else{a.console={};for(b=0;b<c.length;b+=1)a.console[c[b]]=d}})(jQuery);
(function(){$.fn.in_place_editor=function(){return $(this).each(function(){function a(){c.addClass("inactive");d.show()}var d=$(this),c=d.next("form.in_place_editor"),b=c.find(".button"),e=d.siblings(".trigger_editor")||d,f=c.find("input.text"),g=!1;e.bind("click",function(){c.css("width",d.width()+"px");f.css("fontSize",d.css("fontSize"));d.hide();c.removeClass("inactive");f.focus()});b.bind("click",function(){f.val(d.text());a()});c.bind("submit",function(b){b.preventDefault();g||(c.addClass("submitting"),
g=!0,$.ajax({url:c.attr("action").replace(/(\.\w+)?$/,".js"),data:c.serialize(),type:"POST",complete:function(){c.removeClass("submitting");g=!1},success:function(){var b=f.val();d.html(b);a();g=!1;c.siblings(".clippy_parent").find("a.clippy").data("text",b)},error:function(a){a=JSON.parse(a.responseText);var b="<p>Oops, there was a problem with your submission";c.removeClass("submitting");g=!1;a.errors?(b+=":<br/>"+$.map(a.errors,function(a,b){return b+": "+a}),b+="</p>"):b+=". Please refresh the page before trying again.</p>";
growl({error:$(b).html()})}}))})})}})();(function(){$("span.in_place_editor").in_place_editor()})();
(function(a){function d(c){this.$c=a(c);this.video=a(c).data("video_tag_markup");this.$video=a(this.video);this.initialized=!1;window.location.search.match(/play=1/)?this.flashify(!0):this.$c.hasClass("no-overlay")?this.flashify(!1):this.$c.hasClass("autoplay")?this.flashify(!0):this.overlay();this.bind_events()}a.fn.ksr_video=function(){return a(this).each(function(){var c=a(this).data("ksr_video");c||(c=new d(a(this)),a(this).data("ksr_video",c))})};a.extend(d.prototype,{overlay:function(){var a=
this.$c.attr("data-image");this.$c.height(this.$c.height());this.$c.width(this.$c.width());this.$c.empty();this.$c.append('<div class="overlay" style="line-height: '+this.$c.height()+'px"><span class="button-playvideo"></span><img src="'+a+'" /></div>')},bind_events:function(){var c=this;this.$c.find(".overlay").click(function(b){a(b.target).is("object, video")||c.flashify(!0)});this.$c.bind("ksr_video:initialize",function(){c.flashify(!1)});this.$c.bind("ksr_video:play",function(){c.initialized?
c.jwplayer?c.jwplayer.play():c.$c.find("video")[0].play():c.flashify(!0)});this.$c.bind("ksr_video:pause",function(){c.initialized&&c.playing()&&(c.jwplayer?c.jwplayer.pause():c.$c.find("video")[0].pause())});this.$c.bind("ksr_video:mute",function(){if(c.initialized)c.jwplayer?c.jwplayer.setMute(!0):c.$c.find("video")[0].muted=!0});this.$c.bind("ksr_video:unmute",function(){if(c.initialized)c.jwplayer?c.jwplayer.setMute(!1):c.$c.find("video")[0].muted=!1});this.$c.bind("ksr_video:destroy",function(){c.$c.empty();
c.$c.removeData("ksr_video")});this.$c.bind("ksr_video:seek",function(b,d,f){typeof f==="undefined"&&(f=!1);c.initialized?c.jwplayer?(c.jwplayer.seek(d),c.jwplayer.pause(f)):(b=c.$c.find("video")[0],b.currentTime=d,f?b.pause():b.play()):c.$c.trigger("ksr_video:play").trigger("ksr_video:mute").bind("ksr_video:loaded",function(){var b=a(this),h=!1;c.jwplayer?b.bind("ksr_video:buffer_change",function(a,c){!h&&c>d&&(h=!0,b.trigger("ksr_video:seek",[d,f]),b.trigger("ksr_video:unmute"))}):(b.trigger("ksr_video:seek",
[d]),b.trigger("ksr_video:unmute"))})})},current_position:function(){if(!this.initialized)return 0;return this.jwplayer?this.jwplayer.getPosition():this.$c.find("video")[0].currentTime},playing:function(){if(!this.initialized)return!1;return this.jwplayer?this.jwplayer.getState().toLowerCase()==="playing":!this.$c.find("video")[0].paused},flashify:function(c){var b="v"+parseInt(Math.random()*1E8,10),d=this;if(!this.initialized)this.$c.find(".button-playvideo").fadeOut(),this.$c.find("img").attr("id",
b),swfobject.embedSWF("/swf/kickplayer.swf?2",b,this.$c.width(),this.$c.height(),"9.0.115","/swf/expressInstall.swf",{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:c,skin:"/swf/kickskin.swf?2"},{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+b,"class":"ksr_player",name:"ksr_player_"+
b},function(b){var g;window.player_reference=b.ref;b.success?(d.jwplayer=jwplayer(b.ref),d.jwplayer.onReady(function(){d.$c.trigger("ksr_video:loaded")}),d.jwplayer.onPlay(function(){d.$c.trigger("ksr_video:playing")}),d.jwplayer.onComplete(function(){d.$c.trigger("ksr_video:ended")}),d.jwplayer.onBufferChange(function(a){a=a.duration*(a.bufferPercent/100);isNaN(a)||d.$c.trigger("ksr_video:buffer_change",[a])})):(g=d.$video,d.$c.empty().append(g),c&&a(function(){g[0].play()}),g.load(function(){d.$c.trigger("ksr_video:loaded")}),
g.bind("ended",function(){d.$c.trigger("ksr_video:ended")}),g.bind("play",function(){d.$c.trigger("ksr_video:playing")}))}),this.initialized=!0}})})(jQuery);
(function(a){function d(c,b){this.$elem=c;this.xhr=!1;this.paused=b.paused||!1;this.options=a.extend({},{threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,extra_params:{},url:!1},b);this.current_page=1;this.bind_events()}a.fn.mobius=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("mobius");b||(b=new d(a(this),c),a(this).data("mobius",b))})};a.extend(d.prototype,{bind_events:function(){var c=this;typeof this.options.trigger_next==="string"?(a(window).bind(this.options.trigger_next,
function(){c.check_for_more()}),c.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(b){b.preventDefault();a(this).addClass("loading_next");c.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(c,b){var d={};d[c]=b;a.extend(this.options.extra_params,d)},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){if(!this.paused){var c=a(window).scrollTop()+a(window).height(),b=this.$elem.offset().top,
d=this.$elem.height();c-b>d-this.options.threshold&&this.load_next()}},load_next:function(){this.load_page(this.current_page+1,this.options.load_next_after,!0)},load_page:function(c,b,d){var f=parseInt(c,10),g=this;if(!isNaN(f)){if(!b||!b.length)b=!1;if(!this.xhr)this.$elem.trigger("mobius:loading_page"),this.xhr=a.ajax({type:"get",dataType:"html",url:this.build_paged_url(f),success:function(c){g.xhr=!1;c=a("<div>"+c+"</div>").find(".mobius").children();if(c.length){if(b?b.after(c):g.options.prepend_next?
g.$elem.prepend(c):g.$elem.append(c),g.options.trigger_next.jquery&&g.options.trigger_next.removeClass("loading_next"),g.$elem.trigger("mobius:loaded_page",[f,c]),d||!b)g.current_page=f}else g.$elem.trigger("mobius:error",["No mobius found in page #"+f+"."])},error:function(){g.xhr=!1}})}},build_paged_url:function(c){var b=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),d=a.param(this.options.extra_params),f=/(.*)#$/;f.test(b)&&(b=f.exec(b)[1]);d&&(d=
"&"+d);if(this.options.url)b=this.options.url;return b.toString()+"?page="+c+d}})})(jQuery);
(function(a){function d(c,b){this.$elem=c;this.options=a.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:c.parent(),attach_to:"top",lock_to_bottom:!0},b);(!this.options.parent||!this.options.parent.length)&&a.console.log("WARNING: sticky bar has no parent");this.paused=!1;this.last_scroll_top=0;this.fixed=this.last_up=!1;this.original_top=c.offset().top;this.original_bottom=this.original_top+c.height();this.update_window_larger_then_elem();this.attach_to_top=
this.options.attach_to==="top";this.attach_to_bottom=!this.attach_to_top;this.bind_events();this.reposition()}a.fn.sticky_bar=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("mobius");b||(b=new d(a(this),c),a(this).data("stickybar",b))})};a.extend(d.prototype,{bind_events:function(){var c=this;a(window).resize(function(a){a.target===window&&c.update_window_larger_then_elem()});a(document).bind("shifted",function(){c.fixed=!1;c.$elem.css("position","static");c.$elem.css("top",
"auto");c.$elem.css("bottom","auto");c.original_top=c.$elem.offset().top;c.original_bottom=c.original_top+c.$elem.height();c.reposition()});a(window).bind(this.options.adjust_on,function(a){c.paused||c.reposition(a)});this.$elem.bind("sticky_bar:fix_to_bottom",function(){c.fixed=!0;c.$elem.css("position","fixed");c.$elem.css("top",-(c.$elem.height()-a(window).height()))});this.$elem.bind("sticky_bar:pause",function(){c.paused=!0});this.$elem.bind("sticky_bar:unpause",function(){c.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=
a(window).height()>this.$elem.height()},reposition:function(c){var b=a(window).scrollTop(),d=b+a(window).height(),f=this.$elem.offset().top,g=f+this.$elem.height(),h=this.options.parent;h=h.offset().top+h.outerHeight();c=c&&c.type==="scroll";var k=b>this.last_scroll_top?!1:!0,j=k!==this.last_up?!0:!1;if(this.attach_to_top&&b<this.original_top||this.attach_to_bottom&&d>this.original_bottom)this.fixed=!1,this.$elem.css("position","static"),this.$elem.css("top","auto"),this.$elem.css("bottom","auto");
else if(this.options.lock_to_bottom&&!this.window_larger_then_elem&&d>h)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",h-this.$elem.outerHeight());else if(this.options.lock_to_bottom&&this.window_larger_then_elem&&b+this.$elem.height()>h)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",h-this.$elem.outerHeight());else if(!j||!c){if(!this.fixed)if(this.attach_to_top)if(this.window_larger_then_elem||(!c||k)&&b<f)this.fixed=!0,this.$elem.css("position",
"fixed"),this.$elem.css("top",0);else{if((!c||!k)&&d>g)this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",-(this.$elem.height()-a(window).height()))}else if(this.window_larger_then_elem||(!c||!k)&&d>g)this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("bottom",0)}else if(!this.window_larger_then_elem)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",f),this.$elem.css("bottom","auto");this.was_fixed!==this.fixed&&this.$elem.trigger("sticky_bar:fixed_changed",
[this.fixed]);this.last_scroll_top=b;this.last_up=k}})})(jQuery);
(function(a){function d(a){window.history&&window.history.replaceState?window.history.replaceState(null,null,a):window.location.replace(a)}a.fn.persistent_paging=function(){return a(this).each(function(){function c(){var b=[];a.each(e,function(){b.push([this[0],this[2].offset().top,this[2]])});e=b}var b=a(this),e=[[1,0,b.find(".page")]],f=[],g=!1,h=b.data("mobius"),k=/^#p(\d*)/.exec(window.location.hash);k&&parseInt(k[1],10)!==1&&(b.one("mobius:loaded_page",function(b,c,d){a.scrollTo(d.offset().top+
70)}),h.load_page(parseInt(k[1],10)));b.bind("mobius:loaded_page",function(d,f,g){function k(){if(this[0]===v)return t=!0,!1}d=[];var t,v;e.push([f,!1,g]);c();for(v=1;v<=e[e.length-1][0];v+=1)t=!1,a.each(e,k),t||d.push(v);d.length?a.each(d,function(){var c=e[0],d=parseInt(this,10),f=a([]),g=[];g=a([]);var j=a([]);a.each(e,function(){this[0]>c[0]&&this[0]<d&&(c=this)});f=c[2].next(".missing");f.length?(g=f.data("missing_pages"),a.inArray(d,g)===-1&&(g.push(d),f.data("missing_pages",g))):(f=b.siblings(".missing").clone(),
g=f.find(".loading"),j=f.find(".load_more"),f.data("missing_pages",[d]),f.find("a").click(function(a){var c=f.data("missing_pages"),d=c.pop();a.preventDefault();c.length&&f.data("missing_pages",c);j.addClass("loading");h.load_page(d,f);b.one("mobius:loaded_page",function(){j.removeClass("loading")})}),c[2].after(f),g.hide(),f.show())}):b.find("div.missing").remove()});a(document).scroll(function(){var b=a(window).scrollTop();a.each(e,function(){b>this[1]&&(f=this)});f[0]!==g&&(d("#p"+f[0]),a(document).trigger("infinite_scroll:scrolled_to",
[f[0]]),g=f[0])})})}})(jQuery);
(function(a){function d(a,b){this.$elem=a;this.options=b;this.total_elements=a.find(b.items).length;a.serialScroll(b);this.bind_events()}a.fn.infinite_carousel=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("infinite_carousel");b||(b=new d(a(this),c),a(this).data("infinite_carousel",b))})};a.extend(d.prototype,{bind_events:function(){var a=this;this.$elem.bind("notify.serialScroll",function(b,d){a.total_elements=a.$elem.find(a.options.items).length+1;d+1>=a.total_elements-a.options.step&&
a.$elem.trigger("infinite_carousel:last_page")})}})})(jQuery);
(function(){$.fn.tabs=function(){return $(this).each(function(){var a=$(this);a.bind("activate",function(d,c){var b=$(c);b=$("#"+b.data("pane"));a.data("pane")&&a.data("pane").trigger("deactivated");a.data("pane",b.trigger("activated"))});a.children().bind("click",function(){$(this).parent().trigger("activate",$(this))})})};$.fn.panes=function(){var a=$(this);return a.each(function(){a.children().bind("activated",function(){$(this).show()}).bind("deactivated",function(){$(this).hide()})})}})();
(function(a){function d(c,b){this.$elem=c;this.val=0;this.options=a.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},b);this.val=this.$elem.attr("rel");this.keyframes=this.options.keyframes;this.framesets=this.options.framesets;var d;this.framesets||this.init_framesets();for(d=0;d<this.options.max_digits;d+=1)this.init_digit(d);this.write(this.val,!0)}a.fn.ticker=function(c){c=c||{};
return a(this).each(function(){var b=a(this).data("ticker");b||(b=new d(a(this),c),a(this).data("ticker",b))})};a.extend(d.prototype,{read:function(){return this.val},write:function(c,b){this.val=String(c||"");this.$elem.attr("rel",this.val);var d=(this.options.format_numbers?this.format_number(this.val):this.val).split(""),f=this.$elem.find(".ticker_digit"),g,h,k,j,q,s,u,t;for(t=0;t<d.length-f.length;t+=1)this.init_digit(t+f.length);f=this.$elem.find(".ticker_digit");for(t=0;t<f.length;t+=1){g=a(f[t]);
h=g.html();k=d[t]?String(d[t]):"";j=a.inArray(k,this.keyframes);q=this.framesets[j][0];s=a.inArray(g.html(),this.keyframes);u=[];g.html(k).data("tween_id",g.data("tween_id")+1);if(!k||k===h||b)u=u.concat(q);else for(;s!==j;)u=u.concat(this.framesets[s]),s+=1,s=s>=this.keyframes.length?1:s;this.tween(g.data("tween_id"),g,u)}},init_framesets:function(){var a,b;this.framesets=[];for(a=0;a<this.keyframes.length;a+=1){this.framesets.push([]);for(b=0;b<this.options.frame_count;b+=1)this.framesets[a].push(a*
this.options.frame_count*this.options.frame_step+b*this.options.frame_step)}},init_digit:function(c){c=a(this.$elem.find(".ticker_digit").get(c));c.length||(c=a('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem));c.data("tween_id",1)},format_number:function(a){return String(a).split("").reverse().join("").replace(/\d\d\d/gim,function(a){return a+","}).split("").reverse().join("").replace(/^,/,"")},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(a){a.remove();
this.pad_digits()},tween:function(a,b,d){if(d.length)if(b.data("tween_id")!==a)return!1;else{var f=this;setTimeout(function(){var g=d.shift();b.css({"background-position":"0px "+-1*g+"px"});f.tween(a,b,d)},this.options.frame_duration)}}})})(jQuery);
(function(a){function d(b,c,d){this.url=b;this.callback=c||function(){};this.options=a.extend({delay:3E4,on_error:function(){},on_complete:function(){}},d);this.running=this.xhr=!1;this.go()}var c;a.pollster=function(a,c,f){return new d(a,c,f)};window.Pollster=d;d.prototype.start=function(){var a=this;this.running=!0;c=setTimeout(function(){a.go()},this.options.delay)};d.prototype.stop=function(){this.running=!1;clearTimeout(c)};d.prototype.go=function(){var b=!1,c=this;this.xhr=a.ajax({url:this.url,
dataType:"json",type:"get",global:!1,success:function(a){(b=c.callback(a))?c.stop():c.start()},error:this.options.on_error,complete:this.options.on_complete})}})(jQuery);(function(a){a.fn.preload_background_image=function(){return this.each(function(){var d;var c=a(this).css("backgroundImage"),b=/[("]([^()"]+)[")]/;try{d=b.exec(c)[1]}catch(e){d=!1}if(d)(new Image).src=d})}})(jQuery);
(function(){window.shuffle=function(a){var d,c,b=a.length;if(b)for(;b;)b-=1,c=Math.floor(Math.random()*(b+1)),d=a[c],a[c]=a[b],a[b]=d;return a}})();
(function(a){a.support.fontFace=function(){var a,c=document,b=c.head||c.getElementsByTagName("head")[0]||docElement,e=c.createElement("style");c=c.implementation||{hasFeature:function(){return!1}};e.type="text/css";b.insertBefore(e,b.firstChild);a=e.sheet||e.styleSheet;return(c.hasFeature("CSS2","")?function(b){if(!a||!b)return!1;var c=!1;try{a.insertRule(b,0),c=!/unknown/i.test(a.cssRules[0].cssText),a.deleteRule(a.cssRules.length-1)}catch(e){}return c}:function(b){if(!a||!b)return!1;a.cssText=b;
return a.cssText.length!==0&&!/unknown/i.test(a.cssText)&&a.cssText.replace(/\r+|\n+/g,"").indexOf(b.split(" ")[0])===0})('@font-face { font-family: "font"; src: "font.ttf"; }')}})(jQuery);(function(a){a.support.JSON=function(){return typeof window.JSON!=="undefined"}})(jQuery);(function(a){a.support.localStorage=function(){return typeof window.localStorage!=="undefined"}})(jQuery);
(function(){var a={};window.render=function(d,c){var b=a[d]||function(a){return a},e=$.trim($("#template-"+d.replace("/","_")).html());return Mustache.render(e,b(c))};window.presenters=a})();
(function(a){window.XDomainRequest&&a.ajaxTransport(function(d){if(d.crossDomain&&d.async){if(d.timeout)d.xdrTimeout=d.timeout,delete d.timeout;var c;return{send:function(b,e){function f(b,d,f,j){c.onload=c.onerror=c.ontimeout=c.onprogress=a.noop;c=void 0;e(b,d,f,j)}c=new window.XDomainRequest;c.open(d.type,d.url);c.onload=function(){f(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)};c.onerror=function(){f(404,"Not Found")};c.onprogress=function(){};if(d.xdrTimeout)c.ontimeout=function(){f(0,
"timeout")},c.timeout=d.xdrTimeout;c.send(d.hasContent&&d.data||null)},abort:function(){if(c)c.onerror=a.noop(),c.abort()}}}})})(jQuery);
(function(){function a(a,b){var c,d;c=_(a).map(function(a,c){var e=!1;c.match(/^\!/)&&(e=!0,c=c.replace(/^\!/,""));_.isArray(a)||(a=[a]);a=_(a).map(function(a){return a+""});d=_(a).include(b[c]+"");return e?!d:d});return _(c).inject(function(a,b){return a||b},c[0])}function d(b,c){var d=_(b).map(function(b){return a(b,c)});return _(d).inject(function(a,b){return a&&b},d[0])}function c(a,b,e){$(a).find("."+b+e.id).each(function(a,b){var f,g;f="";var h=$(b);g=h.data("conditions");var j=h.attr("itemprop");
typeof j!=="undefined"?f=j.match(/\[(\w*)\]/)[1]:h.data("attr")&&(f=h.data("attr"));typeof g!=="undefined"?(typeof g==="string"&&(g=JSON.parse(g)),f=(g=d(g,e))?JSON.parse(h.data("render")):"",h.data("evaluation")!==g&&(h.html(f),h.data("evaluation",g),f.length&&c(h,"Project",e))):typeof f==="undefined"||typeof e[f]==="undefined"||(h.data("value",e[f]),h.attr("data-value",e[f]),h.attr("value",e[f]),f=(f=h.data("format"))&&typeof k[f]==="function"?k[f](h.data()):h.data("value"),h.html(f))})}function b(a){this.template=
a;this.conditions=[]}function e(a){var b;typeof a==="string"&&(b={},b[a]=!0,a=b);return a}var f={$:"jquery",_:"../vendor/underscore.js",formatters:"../onloads/initializers/formatting_helpers.js"},g={};if(typeof require!=="undefined")for(var h in f)f.hasOwnProperty(h)&&(this[h]=require(f[h]));this._.map();if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=g;exports.Schwamm=g}else this.Schwamm=g;var k={money:function(a){if(typeof a.precision==="undefined")a.precision=
0;return formatters.currency_symbol_mappings[a.currency]+this.number(a)},shorter_money:function(a){a.value<100?a.precision=2:(a.precision=0,a.value=Math.floor(a.value));return this.money(a)},number:function(a){return formatters.format_number(a.value,a.precision||0)},pluralize:function(a){return formatters.pluralize(a.word,a.value)},percent:function(a){a.value=parseFloat(a.value)/parseFloat(a.of)*100;return this.number(a)+"%"},time_ago_in_words:function(a){if(a.value){if(typeof a.value==="number"||
typeof a.value==="string"&&a.value.match(/^\d+$/))a.value=parseInt(a.value*1E3,10)}else return"?";var b,c;a=new Date(a.value);var d=Math.floor((new Date-a)/1E3);$.each(formatters.distance_date_intervals,function(a,c){b=c;if(c[0]>d)return!1});c={m:Math.round(d/60),h:Math.round(d/3600),d:Math.round(d/86400),t:a.toString("MMM d"),y:a.toString("MMM d, yyyy")};a=$.map(c,function(a,b){return b});a=RegExp("%(["+a.join("")+"])","g");a=b[1].replace(a,function(a,b){return c[b]});if(a.match(/NaN|undefined/))return"";
return a},distance_date:function(a){return this.time_ago_in_words(a)}};this.update_record=function(a,b){var d=$("."+a+b.id+"_cxt");_.each(["state","ended","is_starred"],function(c){var e;e=RegExp(a+"-"+c+"\\S+\\s?","g");e=d.attr("class").match(e).join(" ");c=a+"-"+c+"-"+b[c];d.removeClass(e);d.addClass(c)});c(document,a,b)};g.FormattingHelpers=k;g.presenter=function(a,b,c){var d=new Schnurrbart(a,b),e={},f={};if($.isArray(c))$.each(c,function(a,b){e[b]=b});else if(typeof c==="object")e=c;else return;
$.each(e,function(a,b){var c;$.isArray(b)||(b=[b]);c=d.hasOwnProperty(a)?a:"tag";f[a]=d[c].apply(d,b)});return f};Schnurrbart=function(a,b){this.model_name=a;this.proxy=b;this.class_name=a+this.proxy.id;this.constructor.schnurrbarts[this.class_name]=this};if(typeof exports!=="undefined")exports.Schnurrbart=Schnurrbart;Schnurrbart.schnurrbarts={};Schnurrbart.prototype.tag=function(a,b){b||(b={});var c;return b.format?this.format(a,b):(c=this.proxy[a],this.render_tag(a,c,b))};Schnurrbart.prototype.pluralize=
function(a,b){return this.format_on(b,{format:"pluralize",word:a})};Schnurrbart.prototype.format_on=function(a,b){b||(b={});b.attr=a;return this.format(null,b)};Schnurrbart.prototype.format=function(a,b){var c=a||b.attr;c&&(b=$.extend({value:this.proxy[c]},b));if($.inArray(b.format,formatters.currency_formats)>=0)b.currency=this.proxy.currency;c=this.formatting_helper(b);return this.render_tag(a,c,b)};Schnurrbart.prototype.render_tag=function(a,b,c,d){c||(c={});c=this.base_html_options(a,c);a=$("<data>");
a.attr(c);a.html(b);if(d)return a;return a[0].outerHTML};Schnurrbart.prototype.base_html_options=function(a,b){b||(b={});var c={"class":this.class_name,value:this.proxy[a]};$.extend(c,this.data_attributes(b));if(a)c.itemprop=this.itemprop(a);return c};Schnurrbart.prototype.itemprop=function(a){return this.model_name+"["+a+"]"};Schnurrbart.prototype.data_attributes=function(a){a||(a={});var b={};$.each(a,function(a,c){b["data-"+a]=c});return b};Schnurrbart.prototype.formatting_helper=function(a){return g.FormattingHelpers[a.format](a)};
Schnurrbart.prototype["if"]=function(a){return(new b(this))["if"](a)};Schnurrbart.prototype.if_not=function(a){return(new b(this)).if_not(a)};Schnurrbart.context_methods={Project:{state:["live","started","submitted","canceled","suspended","successful","failed","purged"],is_starred:[!0],ended:[!0]}};Schnurrbart.prototype.context_classes=function(){var a=this.constructor.context_methods[this.model_name],b=[],c=this;b.push(this.class_name+"_cxt");_.each(a,function(a,d){b.push(c.model_name+"-"+d.replace(/\W/g,
"")+"-"+c.proxy[d])});return b.join(" ")};b.prototype["if"]=function(a){this.condition("and",!0,a);return this};b.prototype.and=b.prototype["if"];b.prototype.if_not=function(a){this.condition("and",!1,a);return this};b.prototype.unless=b.prototype.if_not;b.prototype.and_not=b.prototype.if_not;b.prototype.or=function(a){this.condition("or",!0,a);return this};b.prototype.or_not=function(a){this.condition("or",!1,a);return this};b.prototype.then=function(){var a=this;return function(){return function(b){a.value=
b;return a.html()}}};b.prototype.condition=function(a,b,c){var d;_.isObject(c)||(d={},d[c]=!0,c=d);b===!1&&_.each(_(c).keys(),function(a){c["!"+a]=c[a];delete c[a]});a==="or"?(a=e(this.conditions[this.conditions.length-1]),c=e(c),this.conditions[this.conditions.length-1]=$.extend(!0,a,c)):a==="and"&&this.conditions.push(c);return this};b.prototype.evaluation=function(){if(typeof this.cached_evaluation==="undefined")this.cached_evaluation=d(this.conditions,this.template.proxy);return this.cached_evaluation};
b.prototype.content=function(){return this.evaluation()?this.value:""};b.prototype.html=function(){var a=$("<data>");a.attr(this.html_options());a.html(this.content());return a[0].outerHTML};b.prototype.html_options=function(){return{"class":this.template.class_name,"data-conditions":JSON.stringify(this.conditions),"data-render":JSON.stringify(this.value),"data-evaluation":d}}})();
var Kicksend={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],run:function(a){a.domains=
a.domains||Kicksend.mailcheck.defaultDomains;a.topLevelDomains=a.topLevelDomains||Kicksend.mailcheck.defaultTopLevelDomains;a.distanceFunction=a.distanceFunction||Kicksend.sift3Distance;a.ignoreTLDs=a.ignoreTLDs||!1;var d=Kicksend.mailcheck.suggest(encodeURI(a.email),a.domains,a.topLevelDomains,a.distanceFunction,a.ignoreTLDs);d?a.suggested&&a.suggested(d):a.empty&&a.empty()},suggest:function(a,d,c,b,e){a=a.toLowerCase();a=this.splitEmail(a);d=this.findClosestDomain(a.domain,d,b);var f;for(b=0;b<
this.whitelistRegexes.length;b+=1)if(f=this.whitelistRegexes[b],f.exec(a.domain))return!1;if(d){if(d!==a.domain)return{address:a.address,domain:d,full:a.address+"@"+d}}else if(!e&&(c=this.findClosestDomain(a.topLevelDomain,c),a.domain&&c&&c!==a.topLevelDomain))return e=a.domain,d=e.substring(0,e.lastIndexOf(a.topLevelDomain))+c,{address:a.address,domain:d,full:a.address+"@"+d};return!1},findClosestDomain:function(a,d,c){var b,e=99,f=null,g;if(!a||!d)return!1;if(!c)c=this.sift3Distance;for(g=0;g<d.length;g+=
1){if(a===d[g])return a;b=c(a,d[g]);b<e&&(e=b,f=d[g])}return e<=this.threshold&&f!==null?f:!1},sift3Distance:function(a,d){var c=0,b=0,e=0,f=0,g;if(a===null||a.length===0)return d===null||d.length===0?0:d.length;if(d===null||d.length===0)return a.length;for(;c+b<a.length&&c+e<d.length;){if(a.charAt(c+b)===d.charAt(c+e))f+=1;else for(g=e=b=0;g<5;g+=1){if(c+g<a.length&&a.charAt(c+g)===d.charAt(c)){b=g;break}if(c+g<d.length&&a.charAt(c)===d.charAt(c+g)){e=g;break}}c+=1}return(a.length+d.length)/2-f},
splitEmail:function(a){a=a.split("@");var d,c,b,e="";if(a.length<2)return!1;for(d=0;d<a.length;d+=1)if(a[d]==="")return!1;c=a.pop();b=c.split(".");if(b.length===0)return!1;else if(b.length===1)e=b[0];else{for(d=1;d<b.length;d+=1)e+=b[d]+".";b.length>=2&&(e=e.substring(0,e.length-1))}return{topLevelDomain:e,domain:c,address:a.join("@")}}}};
window.jQuery&&function(a){a.fn.mailcheck=function(a){var c=this,b,e;if(a.suggested)b=a.suggested,a.suggested=function(a){b(c,a)};if(a.empty)e=a.empty,a.empty=function(){e.call(null,c)};a.email=this.val();Kicksend.mailcheck.run(a)}}(jQuery);(function(){window.url_equals=function(a,d,c){a=URI(a).absoluteTo(window.location);d=URI(d).absoluteTo(window.location);c=c||{};c.ignore_query&&(a.search({}),d.search({}));return a.equals(d)}})();function Model(a){this.initialize(a)}
Model.class_properties=function(){return{find:function(a){return this.records[a]},records:{}}};Model.prototype.initialize=function(a){this.listeners={};this.listeners._global=[];this.data={};this.set(a);if(typeof this.on_initialize==="function")this.on_initialize();this.data.id&&(this.constructor.records[this.data.id]=this)};
Model.prototype.set=function(a,d){function c(a,b){var d={},e;for(e in b)if(b.hasOwnProperty(e))if(typeof b[e]==="object"&&b[e]!==null)d[e]=a?c(a[e],b[e]):b[e];else if(!a||a[e]!==b[e])d[e]=b[e];return d}function b(a,c){var d={},e=a.shift();d[e]=a.length?b(a,c):c;return d}var e,f;e=typeof a==="object"?a:typeof a==="string"?b(a.split("."),d):{};f=c(this.data,e);this.data=_.extend(this.data,e);this._broadcast(f);return this};
Model.prototype.get=function(a){if(typeof a==="string"){a=a.split(".");var d=this.data;_.each(a,function(a){d=d[a]});return _.clone(d)}else return _.clone(this.data)};Model.prototype.on_change=function(a,d){if(typeof a==="function")this.listeners._global.push(a);else return typeof this.listeners[a]==="undefined"&&(this.listeners[a]=[]),this.listeners[a].push(d),this};
Model.prototype._broadcast=function(a,d){var c,b=this;d=d||"";_.each(_.keys(a),function(c){typeof a[c]==="object"&&a[c]!==null&&b._broadcast(a[c],d+c+".");typeof b.listeners[d+c]!=="undefined"&&_.each(b.listeners[d+c],function(c){c.apply(b,[a])})});for(c=0;c<this.listeners._global.length;c+=1)this.listeners._global[c].apply(this,[a])};function extend(){function a(){this.initialize.apply(this,arguments)}_.extend(a.prototype,Model.prototype);_.extend(a,Model.class_properties());return a}
Model.extend=extend;var Project=Model.extend();window.Project=Project;Project.prototype.on_initialize=function(){this.on_change(function(){window.update_record("Project",this.data)})};var User=Model.extend();window.User=User;$(function(){if(typeof current_project==="string")window.current_project=new Project(JSON.parse(_.unescape(current_project)))});$(function(){if(typeof current_user==="string")window.current_user=new User(JSON.parse(_.unescape(current_user)))});
$(function(){$("li.menu-dropdown").live("mouseover",function(){$(this).find(".menu-submenu").show()});$("li.menu-dropdown").live("mouseout",function(){$(this).find(".menu-submenu").hide()});$(".hit-list li").live("click",function(){var a=$(this).find("a.target");if(a.length)window.location=a.attr("href")})});
$(function(){$(".modal_dialog").livequery(function(){var a=$(this),b=a.attr("id");$("a.link_to_"+b).live("click",function(b){a.modal_dialog({event:b});b.preventDefault()});a.closest(".pop_modal_on_load").length&&a.modal_dialog()});$("a.remote_modal_dialog").live("click",function(a){a.preventDefault();$(this).is(".disabled")||(a=$.open_remote_modal_dialog($(this).attr("href"),{title:$(this).attr("data-modal-title"),id:$(this).attr("data-modal-id"),ignore_parent:$(this).attr("data-ignore_parent")?!0:
!1,remote_modal_dialog_contents_loaded:function(a,c,d){a=a.find(".move_to_head");a.length&&($("head").append(a.children()),a.remove(),delete window.seen_remote_urls[d])},dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")}}),$(this).data("modal_dialog",a),a.$elem.bind("modal_dialog:remote_dialog_loaded",function(){try{typeof FB!=="undefined"&&FB.XFBML&&FB.XFBML.parse()}catch(a){$.console.log(a)}}))}).each(function(){var a=$(this);a.is(".pop_modal_on_load")&&
a.click()});$("a.modal_dialog_close").live("click",function(a){a.preventDefault();$(this).trigger("close.modal_dialog")});$(".modal_dialog .pagination a").live("click",function(a){var b=$(this).closest(".modal_dialog_body"),d=$(this);b.height(b.height());a.preventDefault();$.ajax({url:d.attr("href"),type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")},success:function(a){b.html(a);$.scrollTo(b)}})});var a=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/.exec(window.location.hash),
d=/^#remote_modal_dialog:(.*)$/.exec(window.location.hash);a&&(a=a[1],$("#"+a).modal_dialog(),window.location.replace("#"));d&&($("a.remote_modal_dialog").each(function(){url_equals(decodeURIComponent(d[1]),decodeURIComponent($(this).attr("href")))&&$(this).click()}),window.location.replace("#"))});$(".video-player:visible").livequery(function(){$(this).ksr_video()});$("a[data-ping]").live("click",function(){var a=$(this).attr("data-ping");a&&($(this).removeAttr("data-ping"),$.get(a))});
$(".ksr_page_timer").live("timer_added",function(){new window.ProjectTimer(this,window.ksr_page_clock)});$(".ksr_page_timer").livequery(function(){this.ksr_page_timer||$(this).trigger("timer_added")});function readCookie(a){a+="=";var d=document.cookie.split(";"),c,b;for(c=0;c<d.length;c+=1){for(b=d[c];b.charAt(0)===" ";)b=b.substring(1,b.length);if(b.indexOf(a)===0)return b.substring(a.length,b.length)}return null}window.readCookie=readCookie;window.destroy_cookie=function(a){ksr_page_clock.destroy_cookie(a)};
function showGrowlSection(){$("#growl_section").fadeIn("fast")}function hideGrowlSection(){$("#growl_section").fadeOut("fast")}$("#growl_section").bind("click",function(a){$(a.target).is($(this))&&$(this).fadeOut("fast")});function growl(a,d){$.each(a,function(a,b){typeof d==="undefined"&&(d={});if(a==="error")d.sticky=!0,$("#growl_section").addClass("sticky");$("#growl_section").jGrowl(b,$.extend(d,{theme:a,beforeOpen:function(){showGrowlSection()},close:function(){hideGrowlSection()}}))})}
window.growl=growl;$("span.character_counter").livequery(function(){var a=$(this),d=$(a.attr("rel"));d.live("keyup",function(){a.html(parseInt(d.attr("maxlength"),10)-d.val().length)})});$("form").livequery("submit",function(a){var d=$(this);d.attr("submitting")?a.preventDefault():d.attr("target")||($(window).unload(function(){d.removeAttr("submitting")}),d.attr("submitting","true"))});
$("a.tip").livequery(function(){var a,d=$(this);if(d.attr("title"))a=d.attr("title"),d.attr("title","");else if(d.attr("rel"))a=$(d.attr("rel")).html();else return;d.simpletip({content:a+"<span class='tip-nipple'></span>",position:"top",baseClass:"ksr-tip tooltip"})});
$("a.g-tip").livequery(function(){var a,d=$(this);if(d.attr("title"))a=d.attr("title"),d.attr("title","");else if(d.attr("rel"))a=$(d.attr("rel")).html();else return;d.simpletip({content:a+"<div class='tip-nipple'></span>",position:"bottom",baseClass:"graph-tip tooltip"})});$("input#share_a_link").live("click",function(){$("#share_a_link").focus().select()});
$(".keep-or-delete").livequery(function(){var a=$(this).closest("li"),d=$(this).find("a").show(),c=$(this).find(".checkbox").hide();d.bind("click",function(){d.attr("disabled")||(c.attr("checked",!1),a.hide(),a.trigger("nested_attributes_list:removed"))})});
$("a.add-another").livequery(function(){var a=$(this).show(),d=$(a.attr("rel")).hide();a.bind("click",function(c){var b=(new Date).getTime(),e=d.clone().attr("id","").show();e.find("input, textarea, select").each(function(a,c){c.name=c.name.replace(/new_[a-z_]*/,b)});e.find(".checkbox").attr("checked",!0);a.attr("data-target-selector")?$(a.attr("data-target-selector")).append(e):d.before(e);e.trigger("nested_attributes_list:added");c.preventDefault()})});
$("form.requires-confirmation").livequery("submit",function(a){var d=$(this);$(this).find("input.confirmation").is(":checked")||(setTimeout(function(){d.removeAttr("submitting")},100),growl({error:"Please accept the Guidelines."}),a.preventDefault())});$(".removeable .remove").live("click",function(){var a=$(this);(!a.data("confirm")||confirm(a.data("confirm")))&&$.post(a.attr("href"),{_method:"delete"},function(){a.parents(".removeable").fadeOut(400,function(){$(this).remove()})});return!1});
KsrJSON={get:function(a,d,c,b){if(c.hasClass("loading"))return!1;c.trigger("before_ksrjson",[c,b]);$.ajax({url:a,type:d||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){c.addClass("loading")},success:function(a){KsrJSON.parse_response(a,c)},complete:function(){c.removeClass("loading")}});return!1},enable_form:function(a,d){a.ajaxForm({url:a.attr("action"),data:{format:"json"},dataType:"json",beforeSubmit:function(){if(a.data("disabled"))return growl({error:"Sorry, still waiting for a response. Please try refreshing if this problem persists."}),
!1;if(a.find("input.confirmation"))return a.find("input.confirmation").attr("checked")},beforeSend:function(c){c.setRequestHeader("Accept","text/javascript, */*");d.addClass("loading");a.data("disabled",!0)},beforeSerialize:function(){a.trigger("ajaxForm:beforeSerialize")},success:function(c){KsrJSON.parse_response(c,d,a)},error:function(c){KsrJSON.parse_error(c,d,a)},complete:function(){d.removeClass("loading");a.data("disabled",!1)}})},parse_response:function(a,d,c){var b={open:function(){$(c).trigger("jGrowl.open_"+
a.status)},close:function(){$(c).trigger("jGrowl.close_"+a.status)}},e;d.trigger("ksr_json:complete",a);$.isArray(a.flash)&&$.isArray(a.flash[0])?growl($.map(a.flash,function(a){return a[a.length-1]}),b):growl(a.flash,b);a.page_load&&$.console.log(a.page_load);switch(parseInt(a.status,10)){case 200:case 406:b=$(a.data);a.data&&a.data.length>0&&(a.modal?(b=$.create_modal_dialog("",a.data),b.data("modal_dialog").open(),typeof FB!=="undefined"&&FB.XFBML.parse(b.find(".modal_dialog_body")[0])):(b.find("a.cancel").length>
0?(e=d.contents().detach(),b.find("a.cancel").one("click",function(){d.contents().remove();e.appendTo(d);return!1})):d.contents().remove(),d.html(b),d.trigger("size_change"),typeof FB!=="undefined"&&FB.XFBML.parse(d[0])));a.tooltips&&a.tooltips.length>0&&d.append(a.tooltips);$("meta[name='csrf-token']").attr("content",a.auth_token);break;case 204:d.remove();break;case 302:window.location.href=a.data.replace(/.json$/,"");break;case 303:d.load(a.data,function(){$("meta[name='csrf-token']").attr("content",
a.auth_token)});break;case 304:break;case 500:growl({error:"Sorry, something went wrong. We've been notified and are looking into it."});break;case 422:growl({error:"Sorry, something went wrong. Your form may have expired -- please refresh and try again?"});break;default:$.console.log(a.status)}return a},parse_error:function(a,d,c){KsrJSON.parse_response({flash:{},status:a.status,data:a.body},d,c)}};
window.match_protocol=function(a){var d=/^\w+:\/\//,c;if(d.test(a))c=window.location.protocol,a=a.replace(d,c+"//");return a};(function(){var a=$.ajax;$.ajax=function(d){if(d.url&&(!d.dataType||d.dataType!=="jsonp"))d.url=match_protocol(d.url);return a.call(this,d)}})();$(document).ajaxStart(function(){$("body").addClass("ajax")});$(document).ajaxStop(function(){$("body").removeClass("ajax")});$(document).ajaxSend(function(a,d,c){c.type!=="GET"&&d.setRequestHeader("X-CSRF-Token",$("meta[name='csrf-token']").attr("content"))});
$("form[data-ksrjson]").livequery(function(){var a=$([]);$(this).attr("data-target")?a=$($(this).attr("data-target")):$(this).closest(".ajax-container").length?a=$(this).closest(".ajax-container"):$(this).closest(".modal_dialog").length>0&&(a=$(this));a.length>0&&KsrJSON.enable_form($(this),a)});
$("a[data-ksrjson]").live("click",function(a){var d=$(this),c=$(d.attr("data-target"));a.preventDefault();c.length===0&&(c=d.closest(".ajax-container"));if(c.length===0)return!0;return KsrJSON.get(d.attr("href"),d.attr("data-ksrmethod"),c,this)});
$(".ajax-container .async-reload").livequery(function(){function a(){$.ajax({url:window.location.href,data:{format:"json"},dataType:"json",success:function(c){c=KsrJSON.parse_response(c,d);d.trigger("after_asyncreload");c.status===304&&setTimeout(a,1E3)}})}var d=$(this).closest(".ajax-container");a()});$(function(){$(".location_list .big_locations li").live("click",function(){window.location=$(this).find(".name a").attr("href")})});
$(".field.search.location-search").livequery(function(){var a=$(this);a.live("livesearch_selector:select",function(){$(this).siblings("span.input-tip").hide();$(this).parent().siblings("span.input-tip").hide();$(this).trigger("shifted")});a.live("livesearch_selector:unselect",function(){$(this).siblings("span.input-tip").show();$(this).parent().siblings("span.input-tip").show();$(this).trigger("shifted")});a.livesearch_selector({url:"/locations/find.js",cancel_copy:"",process_data:function(){return{q:this.$elem.val()}}})});
$("input.date").livequery(function(){$(this).datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},parse_callback:function(a){return Date.parse(a)},format_callback:function(a){return a&&a.toString("MM/dd/yyyy")||""}})});
$("input.datetime").livequery(function(){var a=$(this);a.datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:"},position:a.is(".position_calendar_below")?"bottom":"right",parse_callback:function(a){return Date.parse(a)},format_callback:function(a){return a&&a.toString("MM/dd/yyyy h:mm tt")||""}})});
(function(){var a=$("form ul.sortable, form ol.sortable, form tbody.sortable"),d=!1;a.find(".move").length&&(d=".move");a.find(".move").click(function(a){a.preventDefault()});a.sortable({containment:"document",axis:"y",handle:d,update:function(){a.find("input.position").each(function(a){$(this).val(a)})}});a.each(function(){var a=$(this);a.closest("form").submit(function(){a.find("input.position").each(function(a){$(this).val(a)})})})})();
$(function(){$(".mobius.click").livequery(function(){var a=$(this),d=a.parent().find("a.load_more");a.mobius({trigger_next:d,prepend_next:a.data("mobius_append")?!1:!0,url:a.data("mobius_url")||!1});a.data("mobius");a.bind("mobius:loaded_page",function(c,b,e){a.parent().find(".count .current").text(a.find("li.item").length);e.data("last_page")?d.parent().hide():d.parent().show()})});$(".mobius:not(.click)").livequery(function(){var a=$(this),d,c,b,e;a.find(".page").data("last_page")||(d=a.mobius({url:a.data("url"),
paused:a.is(".paused")}).data("mobius"),a.length&&(c=$(".mini_footer"),e=$("#footer-wrap"),e.mouseenter(function(){c.css({opacity:1})}),c.mouseleave(function(){c.css({opacity:0})}),a.bind("mobius:loaded_page",function(e,g,h){h.data("last_page")?(d.pause(),a.siblings(".load_more").hide(),b=c.clone(),c.remove()):(d.play(),a.siblings(".load_more").show(),$(document).append(b))})))})});
$(function(){function a(a){d.div?(d.receiveEvent("mouseout",null),d.reposition(a)):d.glue(a)}var d,c=!1;$(".zeroclipboard").live("zeroclipboard:initialize",function(){c||(ZeroClipboard.setMoviePath("/javascripts/vendor/zeroclipboard/ZeroClipboard10.swf"),d=new ZeroClipboard.Client,d.setHandCursor(!0),d.addEventListener("onComplete",function(a,c){$(document).trigger("zeroclipboard:click");var d=$(a.domElement),g;d.is(".clippy")&&d.data("text")+""===c&&(g=d.text(),d.text("Copied!"),setTimeout(function(){d.text(g)},
1E3))}),c=!0)}).live("mouseenter",function(){d.setText($(this).data("text"));a(this)}).live("reposition_clippy",function(){a(this)}).livequery(function(){$(this).trigger("zeroclipboard:initialize")});$(".zero_clipboard_wrapper").live("send_clippy_away",function(){$(this).css({top:"0",left:"-100000px"})});$(document).bind("tab",function(){$(".zero_clipboard_wrapper").trigger("send_clippy_away")})});
$(function(){$(".overlabels .field label.overlabel").livequery(function(){var a=$(this),d=a.siblings("input, textarea, .wym_box");d.length||(d=a.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea"));d.length?(d.is(".editor")&&(d.bind("wymeditor:doc_html_updated",function(c,b,d){$(d).text().length?a.hide():a.show()}),d.parent().find("iframe").live("focus",function(){a.addClass("field_focused")}).live("blur",function(){a.removeClass("field_focused")}),a.click(function(){var a=
$.wymeditors($(this).siblings(".wym_box").data("wym_index"));a.setFocusToNode($(a._doc).find("p:first, body")[0],!0)})),a.addClass("overlabel-apply"),d.val()&&a.hide(),d.focus(function(){this.value&&a.hide();a.addClass("field_focused")}).blur(function(){this.value||a.show();a.removeClass("field_focused")}).bind("keydown input change paste cut",function(){var c=this;setTimeout(function(){c.value?a.hide():a.show()},1)}),a.click(function(){d.attr("disabled")||d.focus()})):a.hide()})});
$(function(){function a(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Project Bar",a,b)}if(!$.support.JSON()||!$.support.localStorage())a("Unsupported Browser");else{var d=$("#project_bar"),c=localStorage.history;try{c=$.parseJSON(c),c.version<2&&function(){var a=[];try{localStorage.history_v1=localStorage.history}catch(b){}$.each(c.projects,function(){this.project?a.push(this):a.push({project:{id:this.id,creator:{name:this.byline},photo:{little:"http://s3.amazonaws.com/ksr/projects/"+
this.id+"/photo-little.jpg"},urls:{web:{project:this.path}},name:this.title},last_seen_on:this.last_seen_on})});c={projects:a,version:2}}()}catch(b){c={projects:[],version:2}}c===null&&(c={projects:[],version:2});typeof current_project!=="undefined"&&function(){if(current_project.get("id")){$.each(c.projects,function(a){var b=this.project;if(b&&b.urls.web.project&&url_equals(b.urls.web.project,current_project.get("urls").web.project)){b=c.projects;var d=b.slice(a+1||b.length);b.length=a<0?b.length+
a:a;b.push.apply(b,d)}});c.projects.push({last_seen_on:(new Date).toString(),project:current_project.data});c.length>200&&(a("Trimming History"),c=c.slice(-200));try{localStorage.history=JSON.stringify(c)}catch(b){}}}();d.length&&function(){function a(){if(j){var b=d.find("h1.next");d.find(".next, .prev").addClass("disabled").removeClass("enabled");q!==s&&d.find(".next").removeClass("disabled").addClass("enabled");q!==0&&d.find(".prev").removeClass("disabled").addClass("enabled");q===s?b.fadeIn():
b.fadeOut()}}var b=d.find("ol.projects"),g=b.parent(),h=b.find(".page:last ol"),k=!1,j=!1,q=0,s;c.projects&&c.projects.length>1&&($.each(c.projects.slice(0,c.projects.length-1).reverse(),function(){if(this!==window){var a=this.project,c=new Date(this.last_seen_on);if(a)a.image_prefix=b.children().length===1?"":"data-",a.seen_on_formatted=c.getMonth()+1+"/"+c.getDate()+"/"+c.getFullYear(),a=$(render("projects/_history_bar_project",a)),h.children().length>2&&(h=$('<li class="page"><ol></ol></li>'),
b.append(h),j=!0,h=h.find("ol")),h.append(a)}}),j&&d.find(".arrow").show(),d.show());g.serialScroll({items:"li.page",lazy:!0,lock:!1,cycle:!1,duration:500,easing:"easeOutExpo"});d.find(".arrow").live("click",function(a){a.preventDefault();k||(b.find("li img").each(function(){var a=$(this);a.data("src")&&a.attr("src",a.data("src"))}),k=!0)});d.find(".next:not(.disabled)").live("click",function(){g.trigger("next");q+=1;a()});d.find(".prev:not(.disabled)").live("click",function(){g.trigger("prev");q-=
1;a()});s=b.children("li.page:last").index();a()}()}});
$(document).ready(function(){if(typeof _gat!=="undefined"){var a,d,c=0;try{if(typeof window.JSON!=="undefined"&&typeof window.localStorage!=="undefined")try{a=JSON.parse(localStorage.history)}catch(b){}}catch(e){}if(a)c=a.projects.length;a=$("#projects_show").length>0?$("#about").attr("data-project-state"):"NA";d=$("#project_category").length>0?$("#project_category").attr("data-project-category"):"NA";try{window.pageTracker=_gat._createTracker(analytics_vars.google_analytics_id),pageTracker._setCustomVar(1,
"project-category",d,3),pageTracker._setCustomVar(2,"logged-in-user-pageviews",analytics_vars.logged_in,3),pageTracker._setCustomVar(3,"social-user",analytics_vars.social_user,3),pageTracker._setCustomVar(4,"repeat-project-viewer",c,1),pageTracker._setCustomVar(5,"project-state",a,3)}catch(f){}try{pageTracker._trackPageview()}catch(g){}}});var where;
jQuery(document).bind("livesearch:results",function(a,d){var c,b=$(a.target).val();c=d.projects?d.projects.length:d.length;where=$(a.target).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent(where,"Term",b,parseInt(c,10))});var searching;jQuery(document).bind("livesearch:searching",function(){searching=!0});jQuery(document).bind("livesearch:cancel",function(){searching&&(typeof pageTracker!=="undefined"&&pageTracker._trackEvent(where,"Cancels"),searching=!1)});
jQuery(document).ready(function(){var a;try{a=JSON.parse(localStorage.history)}catch(d){return}$("#project_bar").length>0&&typeof pageTracker!=="undefined"&&a&&a.projects.length>1&&($("#project_bar").livequery(function(){pageTracker._trackEvent("Project Bar","Show")}),$("#project_bar .next").bind("click",function(){pageTracker._trackEvent("Project Bar","Next")}),$("#project_bar .prev").bind("click",function(){pageTracker._trackEvent("Project Bar","Previous")}),$("#project_bar .minimize").bind("click",
function(){pageTracker._trackEvent("Project Bar","Minimized")}),$("#project_bar .maximize").bind("click",function(){pageTracker._trackEvent("Project Bar","Maximized")}))});jQuery(document).ready(function(){$(".home-editorial-title").bind("click",function(){var a=$(this).html();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Faux-Category on Homepage Clicks",a)})});
jQuery(document).ready(function(){$(".home-editorial-title").bind("click",function(){var a=$(this).html();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Faux-Category on Homepage Clicks",a)})});jQuery(document).ready(function(){$(".export").find("a").bind("click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Export Reward Report","Download Click")})});
jQuery(document).ready(function(){$("#results_properties").livequery(function(){var a=$(this).children("#number_of_results").text(),d=$(this).children("#term").text();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Search Results","Term",d,parseInt(a,10))})});
jQuery(document).ready(function(){$("#pledges_login_or_signup #growl_section .error").livequery(function(){var a=$(this).children(".message").html(),d=$(document).attr("URL");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Checkout Login Errors",a,d)});$("#checkout-signup .fieldset-errors").livequery(function(){var a=$(this).children("ul").children(),d=$(document).attr("URL");$.each(a,function(a,b){b=b.innerHTML;typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Checkout Signup Errors",
b,d)})});$("#sessions_new #growl_section .error").livequery(function(){var a=$(this).children(".message").html(),d=$(document).attr("URL");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Login Errors",a,d)});$("#new_user .fieldset-errors").livequery(function(){var a=$(this).children("ul").children(),d=$(document).attr("URL");$.each(a,function(a,b){b=b.innerHTML;typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Signup Errors",b,d)})})});
jQuery(document).ready(function(){$(".share-box").find("a").live("click",function(){var a=$(this).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing",a)});$("#checkout-project-share").find("a").live("click",function(){var a=$(this).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing",a)});$(document).bind("zeroclipboard:click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing","Copied Link")});
$(document).bind("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing","Facebook Like")})})});
$(function(){var a;$("#video-section object").livequery(function(){a=$(this)[0];$("#projects_show").size>0&&$("#button-back-this-proj").attr("href");$(document).attr("URL")});$("#video-section").live("click",function(){$("#button-back-this-proj").attr("href");$(document).attr("URL");if(a){var d=a;d.addModelListener("TIME","timeStats");d.addModelListener("STATE","getState")}});$(window).bind("beforeunload",function(){})});
jQuery(document).bind("modal_dialog:opened",function(a){a=$(a.target).find(".modal_dialog_head h4").text();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Modal Dialog","Opened",a)});jQuery(document).ready(function(){$(".faq-question a").click(function(){var a=$("body[id]").length?$("body").attr("id"):"No ID",d=$(this).closest(".faq"),c=$(this).find(".question").text();typeof pageTracker!=="undefined"&&!d.hasClass("expanded")&&pageTracker._trackEvent("FAQ","Expanded - "+a,c)})});
jQuery(document).ready(function(){$("a#edit_survey_response").live("click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Surveys","Click","Edit Survey Response")})});jQuery(document).ready(function(){$("ul#admin-menu > li > a").live("click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Admin","Nav Click",$(this).text())})});
jQuery(document).ready(function(){var a=0;$(".scissors").bind("click",function(){a<2?(typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Scissors","Clicks"),a+=1):typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Scissors","Chops")})});
jQuery(document).ready(function(){var a=1;$(document).bind("infinite_scroll:scrolled_to",function(d,c){if(c>a){var b=window.location.pathname+window.location.search+window.location.hash;typeof pageTracker!=="undefined"&&pageTracker._trackPageview(b);a=c}})});
$(function(){if(window.mixpanel_id){if($.support.localStorage()&&localStorage.mixpanel_debug==="true")window.mixpanel_debug=!0;mixpanel.init(window.mixpanel_id,{debug:window.mixpanel_debug});typeof analytics_vars!=="undefined"&&mixpanel.register({user_logged_in:analytics_vars.logged_in==="true"});mixpanel.track_pageview();var a;a=readCookie("user_analytics_properties");var d=decodeURIComponent(readCookie("event_queue")).split("&");a!==null&&(a=$.parseJSON(decodeURIComponent(a)),mixpanel.name_tag(a.user_uid),
mixpanel.register(a),window.destroy_cookie("user_analytics_properties"));$.each(d,function(a,b){var d=b.split("="),f=d[0].replace(/\+/g," ");f!==null&&typeof d[1]!=="undefined"&&(d=$.parseJSON(d[1].replace(/\+/g," ")),mixpanel.track(f,d))});window.destroy_cookie("event_queue");window.mixpanel_project=function(a){a=typeof a.get==="function"?a.get():a;var b=_.pick(a,["backers_count","country","currency","deadline","goal","id","is_backing","is_starred","last_update_published_at","launched_at","name",
"pledged","state","updates_count"]);b.category_name=a.category.name;if(a.rewards)b.rewards_count=a.rewards.count;return b}}});$(function(){var a=$(document).children();$.support.fontFace()||a.removeClass("fontface")});$(function(){$(".tipsy").tipsy({gravity:"s"});$(".tipsy_below").tipsy({gravity:"n",html:!0,live:!0,fade:!0});$(".tipsy_above").tipsy({gravity:"s",html:!0,live:!0,fade:!0})});
$(document).ready(function(){$(".sortable_table").tablesorter({sortInitialOrder:"desc",textExtraction:function(a){var d;d=$(a).closest("td").attr("data-table-value");return typeof d!=="undefined"?d:a.innerHTML.replace(/[,?!\s,%$]/g,"")}})});
(function(){$("a.facebook_login").live("click",function(a){var d=$(this);a.preventDefault();FB.usingButton=!0;FB.login(function(a){if(a.authResponse){var b=window,e;e=d.attr("href");a=$.param({fbsr:a.authResponse.signedRequest});e=e.indexOf("?")===-1?e+"?"+a:e+"&"+a;b.location=e}FB.usingButton=!1},{scope:"email,user_location,user_hometown,user_likes"})})})();
(function(){var a={_:"../../vendor/underscore.js"},d={};if(typeof require==="function")for(var c in a)a.hasOwnProperty(c)&&(this[c]=require(a[c]));if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=d;exports.formatters=d}else this.formatters=this.formatters||d;d=_.extend(this.formatters||{},{currency_symbol:function(a){return this.currency_symbol_mappings[a]},format_number:function(a,c,d,g){c=isNaN(c)?2:Math.abs(c);d=d||".";g=typeof g==="undefined"?
",":g;var h=a<0?"-":"",k=String(parseInt(a=Math.abs(a).toFixed(c),10)),j;j=(j=k.length)>3?j%3:0;return h+(j?k.substr(0,j)+g:"")+k.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+g)+(c?d+Math.abs(a-k).toFixed(c).slice(2):"")},pluralize:function(a,c){var d=a,g=["zombie","zombies","cow()","ki(i?)ne","move","moves","sex","sexes","child","children","man","men","person","people","database","databases","quiz","quizzes","matrix","matrices","(vert|ind)ex","(vert|ind)ices","(^ox)","(^ox)en","(alias|status)","(alias|status)es",
"(octop|vir)us","(octop|vir)i","(cris|ax|test)is","(cris|ax|test)es","shoe","shoes","o","oes","bus","buses","(m|l)ouse","(m|l)ice","(x|ch|ss|sh)","(x|ch|ss|sh)es","movie","movies","series","series","([^aeiouy]|qu)y","([^aeiouy]|qu)ies","([lr])f","([lr])ves","tive","tives","hive","hives","([^f])fe","([^f])ves","(analy|ba|diagno|parenthe|progno|synop|the)sis","(analy|ba|diagno|parenthe|progno|synop|the)ses","([ti])um","([ti])a","news","news","([^s])","()s"],h=_.map(g,function(a){return RegExp(a+"$",
"i")});_.each(h,function(h,j){if(a.match(h))return d=a.replace(h,function(a,b){var d=g[j+(c===1?0:1)-j%2];typeof b!=="undefined"&&(d=d.replace(/\(.*\)/,b));return d}),a.match(/^[A-Z][^A-Z]+$/)?d=d.replace(/^([a-z])/,function(a,b){return b.toUpperCase()}):a.match(/^[A-Z]+$/)&&(d=d.toUpperCase()),!1});return d}})})();window.Spinner=window.Spinner||{};window.Spinner.defaults={className:""};
(function(){window.presenters["projects/_baseball_card_tall"]=function(a){a.currency_symbol=window.formatters.currency_symbol(a.currency);a.percent_raised=a.pledged/a.goal*100;a.percent_raised_rounded=Math.round(a.percent_raised);a.percent_raised_to_100=a.percent_raised>100?100:a.percent_raised;a.formatted_money=window.formatters.format_number(a.pledged,0);a.javascript_deadline=a.deadline*1E3;a.formatted_deadline=(new Date(a.javascript_deadline)).toString("MMM d, yyyy");a.formatted_state_changed_at=
(new Date(a.state_changed_at*1E3)).toString("MMM d, yyyy");$.each(["live","successful","canceled","failed"],function(){var d=String(this);a[d+"?"]=a.state===d});a["live_or_successful?"]=a.state==="live"||a.state==="successful";return a}})();
(function(){window.presenters["projects/_leanback"]=function(a){var d=new Schnurrbart("Project",a);return _.extend({},a,{context_classes:d.context_classes(),if_starred:d["if"]("is_starred").then(),if_not_starred:d.if_not("is_starred").then(),javascript_deadline:a.deadline*1E3})}})();
(function(){window.presenters["projects/_verify_identity_questions"]=function(a){function d(a,b){var c;a.index=b;e=a["answer-type"]==="single"?"radio":"checkbox";for(c in a.choice)if(a.choice.hasOwnProperty(c))f=a.choice[c],f["question-id"]=a["question-id"],f.type=e,f.index=b;return a}a=a.questions;var c,b,e,f;if(a.question["question-id"])a.question=[d(a.question,0)];else for(c in a.question)a.question.hasOwnProperty(c)&&(b=a.question[c],a.question[c]=d(b,c));return a}})();
$(function(){function a(a){a.find("a.disabled").bind("click",function(a){a.preventDefault()})}function d(){f.find("th, tbody > tr:first > td").each(function(){})}function c(){h=setInterval(function(){$.ajax({url:j,global:!1,dataType:"json",success:function(a){a.uploaded?(clearInterval(h),k.find(".progress .bar").width("100%"),k.find(".progress .legend").html("100%"),window.location.reload()):typeof a.percent!=="undefined"&&(k.find(".progress .bar").width(a.percent+"%"),k.find(".progress .legend").html(a.percent+
"%"))}})},500)}function b(){k.removeClass("generated").addClass("generating");$.ajax({type:"get",url:j,data:"new=true",dataType:"json",success:function(){c()}})}var e=$("#backer_rewards_show, #backers_dropped"),f,g,h=null,k=$(".export",e),j=k.find("#generate_report").attr("data-generate_report_path");e.length&&(f=$(".mobius",e),g=f.find("thead"),a(e),d(),f.bind("mobius:loaded_page",function(b,c,e){b=g.css("position");f.find("th").css("width","auto");g.css("position","static");d();g.css("position",
b);a(e)}),$("#generate_report").live("click",function(a){a.preventDefault();mixpanel.track("Clicked Generate Backer Report");b()}),$("#download_notice_dialog .generate a").live("click",function(a){a.preventDefault();$("#download_notice_dialog").trigger("close");b()}),$("#download_notice_dialog .continue a").live("click",function(){$("#download_notice_dialog").trigger("close")}),k.hasClass("generating")&&c())});$(function(){$(".NS_backers__backing_row").length&&$(".backer_info").removeClass("hidden")});
$(function(){var a=$(".NS_backers__search_box"),d=$("form",a),c=$("#backer_search_term",d);a.length&&d.live("submit",function(b){c.val().length<3&&(c.addClass("error"),$(".error_msg",a).slideDown(200),b.preventDefault());$(this).removeAttr("submitting")})});$(function(){var a=$("body#backers_index");a.length&&!$(".mobius .page").data("last_page")&&(a=$(".mobius",a),a.persistent_paging())});
$(function(){var a=$("body#backers_search"),d=$(".mobius",a).data("mobius");a.length&&typeof d!=="undefined"&&d.add_param("term",$("#main").data("term"))});$(function(){var a=$(".NS_backing_notes__form");$(".submit",a).live("click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Backing Notes","Save",$("body").attr("id"))})});
$(function(){var a=$("body#blog_posts_category"),d;a.length&&(d=$("#sidebar",a),d.sticky_bar({parent:d.closest("#content")}),d=$(".mobius",a),$("div.load_more",a).show(),$("div.pagination",a).hide(),d.persistent_paging())});
$(function(){$("body#checkouts_interstitial").length&&($(document).bind("modal_dialog:opened",function(a){a=$(a.target).find(".modal_dialog_head h4").text();mixpanel.track("Opened Modal",{label:a})}),$(".amazon-payments-logo").live("click",function(){mixpanel.track("Clicked Amazon Payments Logo")}),$(".amazon_payments_footer").click(function(){location.href=$(".amazon-link").attr("href")}))});$(function(){var a=$("body#checkouts_thanks");a.length&&$(".short_url",a).click(function(){$(this).select()})});
$(function(){var a=$(".NS_comments__comment");a.length&&($(".comment-moderation, .backer_info",a).livequery(function(){$(this).removeClass("hidden")}),$(".comment a.report_spam").live("click",function(a){a.preventDefault();var c=$(this),b=this,e=c.closest(".comment");$.modal_confirm(function(){return KsrJSON.get(c.data("url"),"post",e.find(".ajax-container"),b)},{message:'<p>We review all reports with care, but please keep in mind that we only remove comments that violate the <a href="http://www.kickstarter.com/help/guidelines#community" title="Kickstarter Community Guidelines">Kickstarter Community Guidelines</a>. Critical comments are tough, but they don\'t always qualify as abusive or spam.</p>',
title:"Report this comment to Kickstarter",confirm_text:"Yes, report as spam"})}),$(".comment .spam_reported").live("ksr_json:complete",function(a,c){var b=$(this).closest(".comment"),e=b.find(".report_spam");e.hide();c.status===200&&!e.is(".admin")&&b.find(".body").hide()}))});
$(function(){$("form#new_comment").live("submit",function(a){a.preventDefault();var d=$(this),c=d.find("input.submit");c.hasClass("disabled")||(c.addClass("disabled"),c.val("Posting..."),$.ajax({type:d.attr("method"),url:d.attr("action"),dataType:"json",data:d.serialize(),success:function(a){var c=d.siblings(".list-comments"),f=d.closest("#comments"),g=f.find("header");growl(a.flash);a.html&&(d.each(function(){typeof this.reset!=="undefined"&&this.reset()}),c.length||(c=$('<ol class="list-comments mobius click"><li class="page" data-page_number="1" data-last_page="true"><ol class="comments"></ol></li></ol>'),
g.length?g.after(c):f.prepend(c)),$("body#proposals_show").length?c.append(a.html):c.find(".page ol.comments").prepend(a.html))},complete:function(){c.removeClass("disabled");c.val("Post Comment")}}))})});
$(function(){var a=$("#company_form");a.find('input[name="type"]').live("change",function(){var a=$(this).closest("form"),c=a.find("#business_id");a=a.find("#company_submit");$("#type_business").is(":checked")?($("#business_id_section").show(),a.addClass("disabled"),c.val("")):($("#business_id_section").hide(),a.removeClass("disabled"))});a.live("submit",function(a){$(this).is(".disabled")&&a.preventDefault()});a.find("#business_id").live("input cut paste keydown",function(){$(this).closest("form").find("#company_submit").addClass("disabled")});
a.find("#beneficiary_lookup_link").live("click",function(a){var c=$(this),b=$("#beneficiary_container"),e=$("#business_id"),f=$("#beneficiary_errors"),g=$("#beneficiary_lookup"),h=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();f.empty();g.empty();e.val()===""?f.html("Please enter a Companies House Number."):($(this).after(h),$.ajax({type:"get",url:c.attr("href"),dataType:"json",data:{business_id:e.val()},success:function(a){a.error!==
void 0?f.html(a.error):(g.html(a.data),c.closest("form").find("#company_submit").removeClass("disabled"))},beforeSend:function(){b.addClass("loading")},complete:function(){b.removeClass("loading");h.remove()}}))})});
$(function(){$("#beneficiary_container a.beneficiary_reset").live("click",function(a){var d=$(this),c=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});d.closest("#beneficiary_container").append(c);$.ajax({url:d.attr("href"),type:"DELETE",dataType:"html",success:function(a){d.closest("#account-setup-panel").html(a)},complete:function(){c.remove()}});a.preventDefault()})});
$(function(){function a(){var a=!0;$("#card_accountNumber").trigger("input");$("#card_accountNumber.valid").length?$("#card_accountNumber").closest("li").removeClass("invalid"):(a=!1,$("#card_accountNumber").closest("li").addClass("invalid"));$(".required :input:not(#card_accountNumber)").each(function(){var c=$(this);c.is("#billTo_state_default")||($.trim(c.val())?c.closest("li").removeClass("invalid"):(c.closest("li").addClass("invalid"),a=!1))});$("#card_cvNumber").each(function(){$.trim($(this).val()).match(/\d{3,4}/)===
null?($(this).closest("li").addClass("invalid"),a=!1):$(this).closest("li").removeClass("invalid")});$("#card_expirationMonth").each(function(){var c=$(this),d=$("#card_expirationYear"),g=c.closest("li");parseInt(d.val()+c.val(),10)<parseInt(g.data("min_date"),10)?(g.addClass("invalid"),a=!1):g.removeClass("invalid")});return a}var d=$("#credit_card_form"),c=$("#credit_card_form form");d.length&&(c.bind("submit",function(b){if(a()){var c=$("#saving-layer");c.show();setTimeout(function(){c.find(".modal_dialog_body").html("<h3>Well, this is embarrassing.</h3><p>Processing your pledge is taking longer than usual. If you'd like, you can refresh and try again.</p><p>Not to worry: you can only back a project once, so you will never be double-charged.</p>");
c.removeClass("spinning");$.ajax({url:"/client_error",type:"post",data:{error:"cybersource timeout",url:window.location.toString()}})},3E4)}else b.preventDefault()}),$("#billTo_country").live("change",function(){var a=$(this).val(),c=$("#billTo_state");a!=="US"&&a!=="CA"?(c.closest("li").hide().removeClass("required").find("select").attr("disabled",!0),c.siblings("#billTo_state_default").attr("disabled",!1)):(c.siblings("#billTo_state_default").attr("disabled",!0),c.closest("li").show().addClass("required").find("select").hide().attr("disabled",
!0),a==="US"?(c.closest("li").find("label").text("State"),c.show().attr("disabled",!1)):(c.closest("li").find("label").text("Province"),$("#billTo_state_ca").show().attr("disabled",!1)))}).trigger("change"),$("#card_accountNumber",d).bind("keyup input paste cut",function(){var a=$(this),c=a.val().replace(/[^0-9]/g,""),d=$("#card_cardType"),g;g="000";/^5[1-5]/.test(c)?g="002":/^4/.test(c)?g="001":/^3[47]/.test(c)&&(g="003");var h=$("ul#card_cardType_list");c=String(c);var k=0,j,q=c.length,s,u;if(q<
10)c=!1;else{for(s=q-1;s>=0;s-=1)j=String(c[s]),j=parseInt(j,10),u=q-1-s,k+=u%2===0?j:j>4?j*2%10+1:j*2;c=k%10===0?!0:!1}c?(a.addClass("valid"),a.closest("li").removeClass("invalid"),d.val(g),h.addClass("selected").children().removeClass("selected").filter("#cardType_"+g).addClass("selected")):(a.removeClass("valid"),h.removeClass("selected").children().removeClass("selected"))}),function(){var a=$(".no_stored_cards form"),c=$(".selected input.card_toggle");$("#credit_card_form .errored").length&&
(c=$("#new-card input.card_toggle"));c.length||(c=$("input.card_toggle:first"));$("input.card_toggle").live("change click",function(c){c.preventDefault();var d=$(this),e=$("#new_card_form"),k=$("input.card_toggle").not(d);k.prop("checked",!1);k.closest(".payment_option").removeClass("selected");d.closest(".payment_option").addClass("selected");d.closest("#new-card").length?(e.slideDown(400,"easeOutQuad"),a=e.find("form")):(e.slideUp(400,"easeOutQuad"),a=d.closest("form"));c.preventDefault()});$(".pledge-submit").live("click",
function(c){a.submit();c.preventDefault()});c.prop("checked",!0).trigger("change")}())});
$(".NS-curated_page_projects-new").livequery(function(){var a=$(this),d=a.find("form.curated_pages_form"),c=parseInt($("div.blurb .character_counter .number:first",a).text(),10);$(".blurb textarea",a).data("validations",[function(a){if(a.length<c&&a.length>0)return!0;return!1}]);$(".blurb",a).bind("field_invalid",function(){$(this).addClass("errored")});$(".blurb, .meta h1").live("field_valid",function(){$(this).removeClass("errored")});$("div.blurb",a).bind("keypress cut paste input",function(){var a=
$(this),d=a.find("textarea").val().length;d=c-d;a.find("textarea").validate();a.find(".character_counter .number").text(d)});a.find(".save").click(function(){$("div.blurb textarea").validate({valid:function(){var a=d.find(".buttons .loading").show();$.ajax({type:d.attr("method"),url:d.attr("action"),data:d.serialize(),dataType:"json",global:!1,success:function(c){d.trigger("close.modal_dialog");d.trigger("project_added_to_curated_page",[c]);a.hide()}})}})});a.find(".cancel").click(function(){$(this).trigger("close.modal_dialog")})});
$(function(){var a=$("#curated_pages_show"),d=$("form.curated_pages_form",a);d.length&&function(){function c(a){var b=a.siblings(".value"),c=a.children("span.add_prompt");if(!b.siblings("textarea:visible, input:visible").length)return $.trim(b.text())===""?(c.show(),a.addClass("empty")):(c.hide(),a.removeClass("empty")),a}function b(){var a=$("li.curated_page_project:visible:not(.new)");a=a.length-a.find("div.blurb.errored").length;if($.trim($("#curated_page_title:not(:visible)").val())==="")return!1;
if($.trim($("#curated_page_description:not(:visible)").val())==="")return!1;if(a<1)return!1;return!0}function e(){var a=$(".submit.launch, #add_shortcut_url");b()?a.removeAttr("disabled").removeClass("disabled"):a.attr("disabled",!0).addClass("disabled")}function f(a){var b=$("<div class='buttons'></div>"),c=a.val(),d=$('<div class="save button-positive">Save</div>'),e=$('<div class="cancel button-neutral">Cancel</div>'),f=$('<span class="loading icon-loading-small"></span>');d.click(function(){a.trigger("close")});
e.click(function(){a.val(c);a.trigger("close")});f.hide();b.append(d);b.append(e);b.append(f);return b}function g(){var a=$("form.curated_page_projects_order");a.find("input.project").remove();u=!1;j.find("input.id").each(function(){var b=parseInt($(this).val(),10);isNaN(b)?u=!0:a.append('<input type="hidden" class="project" value="'+b+'" name="order[]">')});a.sync_form()}function h(a){var b={};a.data("livesearch_result")?(b.html=a.data("livesearch_result").html,b.id=a.data("livesearch_result").id):
(b.html=a.data("html"),b.id=a.data("id"));b.card="<div class='project-card-wrap'>"+$(b.html).find("div.project-card-wrap").html()+"</div>";return b}var k=$("#main.published"),j=$("ul.project-card-list",a),q=$(".tools .delete").closest("form"),s=!!k.length,u=!1;k=$(".find_projects .project-results ul.result_list li",a);var t=$(".find_projects .project-results ul.result_list",a).clone(),v=$(".find_projects .project-results div.instructions",a).clone(),B=!!t.length,o;$("form.header_form").live("form_synced",
function(a,b){var d=$(this);b.curated_page&&b.curated_page.description&&(d=d.find(".description .value").html(b.curated_page.description),c(d.siblings(".edit_prompt")))});$("li.curated_page_project > form").live("form_synced",function(a,b){var d=$(this);b.curated_page_project&&b.curated_page_project.blurb&&(d=d.find(".blurb .value").html(b.curated_page_project.blurb),c(d.siblings(".edit_prompt")))});$(".value:not(.image), .edit_prompt",a).live("click",function(){function a(b){b.target!==c[0]&&!$(b.target).is("a.cancel, a.save")&&
$(document).unbind("click",a)}var b=$(this),c=$(this).siblings("input, textarea");c.is(":visible")||(c.show().focus(),c.parent().append(f(c)),setTimeout(function(){$(document).bind("click",a)},100),b.is(".empty")?b.find(".add_prompt").hide():b.hide(),b.siblings(".value").hide(),b.trigger("field_opened"))});$(".edit_prompt",d).each(function(){c($(this))});$("input:not(.not_edit_in_place), textarea",a).live("close",function(){function a(){e.show();s||d.show();b.siblings(".buttons").remove();b.hide();
b.trigger("field_closed")}var b=$(this),d=b.siblings(".edit_prompt"),e=b.siblings(".value"),f=!1;b.validate({invalid:function(){f=!0}});f||(b.is("textarea")?(b.siblings(".buttons").find(".loading").css("display","inline-block"),b.closest("form").sync_form({success:function(b){b.valid&&a()},complete:function(){b.siblings(".buttons").find(".loading").hide()}})):(e.text(b.val()),c(d),a(),b.closest("form").sync_form()))});$("input:not(.not_edit_in_place)",d).live("keydown",function(a){a.keyCode===13&&
(a.preventDefault(),$(this).trigger("close"));a.keyCode===27&&(a.preventDefault(),$(this).siblings(".buttons").find(".cancel").click())});$("li.curated_page_project .project",a).live("mouseenter mouseleave",function(a){var b=$(this).find(".move");a.type==="mouseenter"||a.type==="mouseover"?b.show():b.hide()});j.sortable({containment:"document",placeholder:"curated_page-placeholder",handle:".move",revert:300,tolerance:"pointer",items:"> li.curated_page_project:not(.new)",update:function(){g()}});$("li.curated_page_project a.remove").live("click",
function(a){a.preventDefault();var b=$(this);a=b.closest("form");var c,d,f=parseInt(a.find("input.project_id").val(),10);t.find("li").each(function(){$(this).attr("data-id")===f&&$(this).show()});a.sync_form({type:"delete",success:function(){d&&b.closest("li.curated_page_project").remove();c=!0}});b.closest("li.curated_page_project").fadeOut(function(){e();c&&$(this).remove();d=!0})});$(".blurb textarea, .meta .description textarea").livequery(function(){var a=$(this);a.data("validations",[function(b){if(b.length<
parseInt(a.data("maxlength"),10)&&b.length>0)return!0;return!1}])});$("#curated_page_title").data("validations",[function(a){if(a.length||!s)return!0;return!1}]);$(".blurb").live("field_opened",function(){$(this).find(".label").show();$(this).find(".character_counter").show()});$(".blurb").live("field_closed",function(){$(this).find(".label").hide();$(this).find(".character_counter").hide()});$(".meta .description").live("field_opened",function(){$(this).find(".character_counter").show()});$(".meta .description").live("field_closed",
function(){$(this).find(".character_counter").hide()});$(".blurb, .meta h1, .meta .description").live("field_invalid",function(){$(this).addClass("errored")});$(".blurb, .meta h1, .meta .description").live("field_valid",function(){$(this).removeClass("errored")});$("div.blurb, .meta .description").live("keypress cut paste input field_opened",function(a){var b=$(this),c=b.find("textarea").val().length;c=parseInt(b.find("textarea").data("maxlength"),10)-c;a.type!=="field_opened"&&b.find("textarea").validate();
b.find(".character_counter .number").text(c)});$("li.curated_page_project").live("form_synced",function(a,b){var c=$(this),d=c.find("form");b.valid&&(d.attr("action",b.url),d.attr("method","put"),d.find("#curated_page_project_id").val(b.curated_page_project.id),u&&g(),c.css("border","0"))});$(".image a.remove").live("click",function(a){a.preventDefault();var b=$(this);$.ajax({url:b.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(a){b.closest(".image").find("img").attr("src",
a)}})});$(".add_project",a).live("click",function(){$(this).closest("li.curated_page_project").find(".find_projects").toggle()});k.live("livesearch:soft_select livesearch:unselect",function(a){var b=$(this),c=$(this).closest("li.curated_page_project").find(".project");a.type==="livesearch:soft_select"?(a=h(b),a.card&&(a=$(a.card),c.children(".add_project").hide(),c.find(".project-card-wrap").remove(),c.append(a))):(c.find(".project-card-wrap").remove(),c.children(".add_project").show())});k.live("livesearch:selected",
function(a){a.preventDefault();var b=$(this),c=h(b);a=$('<li class="curated_page_project">'+c.html+"</li>");var d=b.closest("li.curated_page_project"),e;b.trigger("livesearch:unselect");t.find("li").each(function(){$(this).attr("data-id")===c.id&&$(this).hide()});B?(d.find("ul.result_list").replaceWith(t.clone()),d.find(".project-results > h2").text("My Backed Projects"),o.bind_results()):(d.find("ul.result_list").empty().before(v.clone()),d.find(".project-results > h2").text("Adding Projects"));
o.livesearch.last_search=!1;d.find("input.input-search").val("").blur();b=d.find("input.exclude");e="";$("ul.project-card-list > li.curated_page_project").each(function(){var a=$(this).find("input.project_id").val();a&&(e+=a+",")});e+=a.find("input.project_id").val();b.val(e);d.find(".find_projects").hide();d.before(a);a.find(".blurb .value").click()});$(".find_projects").live("livesearch:results",function(){$(this).find(".project-results > h2").text("Search Results");$(this).find(".project-results > .instructions").remove()});
$(".find_projects input.input-search").livequery(function(){var a=$(this),b=$(this).siblings("input.exclude"),c=a.siblings(".icon-search");o=a.livesearch_input_dropdown({url:a.data("livesearch-url"),serialize:a.add(b),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(a){return a.name}}).data("livesearch.input_dropdown");a.bind("livesearch:searching",function(){c.removeClass("icon-search").addClass("icon-loading-small")});a.bind("livesearch:results livesearch:ajax_error",
function(){c.removeClass("icon-loading-small").addClass("icon-search")})});$(document).bind("form_synced",e);e();s&&($("li.curated_page_project, .image.value").live({mouseenter:function(){$(this).find("a.remove").show()},mouseleave:function(){$(this).find("a.remove").hide()}}),$(".value, .value ~ textarea, .value ~ input").live({mouseenter:function(){$(this).siblings(".edit_prompt").show()},mouseleave:function(){$(this).siblings(".edit_prompt:not(.empty)").hide()}}));$("#new_root_slug .cancel").live("click",
function(a){a.preventDefault();$(this).trigger("close.modal_dialog")});$("#new_root_slug").live("submit",function(a){a.preventDefault();var b=$(this),c=b.find(".shortcut.url");c.addClass("processing");c.removeClass("invalid");c.find(".error_message").text("");$.ajax({url:b.attr("action"),type:b.attr("method"),data:b.serialize(),dataType:"json",success:function(a){c.removeClass("processing");if(a.valid){b.trigger("close.modal_dialog");var d=$(".tools .launch");d.length&&d.closest("form").submit();
$("#add_shortcut_url").replaceWith('<a class="button-negative shortcut_url" href="'+a.url+'">'+a.url+"</a>")}else b.removeAttr("submitting"),c.addClass("invalid"),c.find(".error_message").text(a.errors.slug[0])}})});q.confirm_submit({title:"Delete your Curated Page",copy:"Are you sure you want to delete your current Curated Page?",yes_copy:"Yes, Delete!",no_copy:"No Thanks!"})}()});$(function(){$("#location-search.NS-discover_sidebar").livequery(function(){$(this).livesearch_navigator({no_results_html:"Sorry, no projects there!"})})});
$(function(){var a=$("body#discover_list");a.length&&a.find("select.navigation_dropdown").bind("change",function(){$(this).closest("form").submit()})});
$(function(){function a(a){$("#sidebar .subcat-list").find("li").removeClass("current");c.find("a[data='"+a+"']").parent("li").addClass("current")}var d=$("#faqs_show"),c=$("#sidebar").find("a.current").siblings(".subcat-list"),b=!1;d.length&&($("h2.subcat a").live("click",function(){$.scrollTo("#header-wrap",800,{easing:"easeOutExpo"})}),$("#sidebar a").live("click",function(){var c=$(this).attr("data");b=!0;a(c);$.scrollTo("#"+c,800,{easing:"easeOutExpo",onAfter:function(){b=!1}})}),c.find("li").first().addClass("current"),
$(".list-faqs li").waypoint(function(){b||a($(this).attr("id"))}))});$(function(){$(".NS-features__toggle a").live("click",function(a){a.preventDefault();a=$(this);var d=a.closest(".NS-features__toggle"),c=d.hasClass("featured");$.ajax({type:c?"delete":"post",url:a.attr("href"),dataType:"json",success:function(a){a.featured?d.addClass("featured"):d.removeClass("featured");a.remove_featurings_path&&d.find(".featured a").attr("href",a.remove_featurings_path)}})})});
$(function(){$("#project-issues form").livequery(function(){var a=$(this),d=$(this).find("input.submit"),c=$(this).find(".footer");a.find(".tabs").tabs();a.find(".tabs > li").click(function(){$(this).find("input.radio").attr("checked",!0)});a.find(".panes").panes();a.find(".panes > .pane").bind("activated",function(){$(this).find("textarea,select,input").attr("disabled",!1);d.show();c.show()}).bind("deactivated",function(){$(this).find("textarea,select,input").attr("disabled",!0)}).trigger("deactivated").parent().show();
a.find(".tabs").trigger("activate",a.find("input:checked").closest("li"));a.find("#prohibited_link").click(function(a){a.stopPropagation();window.open($(this).attr("href"));return!1})})});
$(function(){var a=$(".NS-forms_categorization_field");a.length&&a.each(function(){function a(b){var c=$('<a class="remove" href="#">remove</a>'),d=b.find(".destroy");d.val()&&d.val()!=="false"&&b.hide();c.click(function(a){a.preventDefault();b.fadeOut(function(){d.val("1");d.length||b.remove()})});b.append(c)}var c=$(this),b=$(".new",c),e=b.find(".template"),f=$("ol.selected",c);f.children("li").each(function(){a($(this))});b.children("a").bind("click",function(b){b.preventDefault();var c=e.find("select"),
k=c.siblings(".position");b=$("<li></li>");var j=c.clone(),q,s;q=!!k.length;s=f.children("li").length;c=c.attr("name").replace("[template]","["+s+"]");s=q?k.attr("name").replace("[template]","["+s+"]"):!1;k=q?k.clone():$([]);j.attr("name",c);q&&k.attr("name",s);b.append(j);q&&b.append(k);a(b);f.append(b)})})});
$(function(){$(".friend_button.following").live("mouseenter",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).addClass("unfollow"),$(this).text("Unfollow"))}).live("mouseleave",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).removeClass("unfollow"),$(this).text("Following"))});$(".friend_button.follow").live("click",function(){$(this).text("Following")});$(".friend_button.following").live("click",function(){$(this).text("Follow")});$(".friend_button.blocked").live("mouseenter",
function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Unblock")}).live("mouseleave",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Blocked")});$(".friend_button.blocked").live("click",function(){$(this).removeClass("blocked");$(this).text("Follow")});$(".friend .block_user").live("click",function(){$(this).hide();$(this).parent().find(".friend_button").removeClass("follow").removeClass("following").addClass("blocking").text("Blocked")});
$("#unfollow a").live("click",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!1);$.ajax({url:d.attr("href"),dataType:"json",type:"POST"})})});$(function(){var a=$(".more_friend_backers");a.length&&$("a.load_more",a).livequery("click",function(a){a.preventDefault();a=$(this);a.closest(".more_friend_backers").find(".backer").show();a.remove();$(window).trigger("resize.modal_dialog")})});
$(function(){$("#friends_ticker_wrap").length&&($("#friends_ticker_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(".friend_button.follow").live("click",function(){$("#friends_ticker_wrap").is(":hidden")&&($("#friends_ticker_wrap").slideDown("fast"),setTimeout(function(){$(document).trigger("shifted")},100))}))});
$(function(){var a=$("#friends_find, #friends_index, #friends_projects, #friends_following, #friends_followers, #friends_blocked, #friends_opt_out"),d,c,b;a.length&&($(".friends.ajax-container").live("mobius:loaded_page",function(){$(document).trigger("shifted")}),b=[[0,40,80,120,160,200,240,280,320,360,400,440],[440,480,520,560,600,640,680,720,760,800,840],[840,880,920,960,1E3,1040,1080,1120,1160,1200,1240],[1240,1280,1320,1360,1400,1440,1480,1520,1560,1600,1640],[1640,1680,1720,1760,1800,1840,1880,
1920,1960,2E3],[2E3,2040,2080,2120,2160,2200,2240,2280,2320,2360,2400],[2440,2480,2520,2560,2600,2640,2680,2720,2760,2800],[2800,2840,2880,2920,2960,3E3,3040,3080,3120,3160,3200,3240],[3240,3280,3320,3360,3400,3440,3480,3520,3560,3600,3640],[3640,3680,3720,3760,3800,3840,3880,3920,3960,4E3,4040],[4040,4080,4120,4160,4200,4240,4280,4320,4360,4400,4440,4480],[4440,4480,4520,4560,4600,4640,4680,4720,4760,4800,4840,4880]],d=$("#friends_ticker .ticker.backed_projects",a).ticker({framesets:b}).data("ticker"),
c=$("#friends_ticker .ticker.followed_people",a).ticker({framesets:b}).data("ticker"),$(".spinner").livequery(function(){$(this).spin({lines:8,length:4,width:3,radius:5,speed:2,color:"#808080"})}),$(".friend.ajax-container").live("before_ksrjson",function(a,b,g){a=$(g);b=parseInt($(this).find(".follow_status").data("backed_projects"),10);a.hasClass("block_user")||(a.hasClass("follow")?(d.write(parseInt(d.read(),10)+b),c.write(parseInt(c.read(),10)+1)):a.hasClass("following")&&(d.write(parseInt(d.read(),
10)-b),c.write(parseInt(c.read(),10)-1)))}),$("form.edit_user input.checkbox").change(function(){$(this).closest("form").submit()}),$("form.edit_user").submit(function(a){$.ajax({type:this.method,url:this.action,data:$(this).serialize(),beforeSend:function(a){a.setRequestHeader("Accept","text/javascript");$("form.edit_user").removeClass("highlight").removeClass("animate")},error:function(){},success:function(){$("form.edit_user").addClass("highlight").addClass("animate")}});a.preventDefault()}))});
(function(){var a=$("body.faqs").find(window.location.hash),d=$("#term.help");a.length&&!a.find(".subcat").length&&a.animate({backgroundColor:"#f6f2ae"},{duration:2E3,complete:function(){$(this).animate({backgroundColor:"#ffffff"},{duration:2500})}});$("body.help #main_content form.search").livequery(function(){$(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})});$("#search .results li").live("livesearch:selected",function(a,b){if(b&&b[1])window.location.href=
b[1]});$("body.help form.search .submit").live("click",function(){$(this).closest("form").submit()});d.live("livesearch:reveal_results",function(){$(this).addClass("expanded");$(this).parents("#search").children(".submit").addClass("expanded")});d.live("livesearch:close_results",function(){$(this).removeClass("expanded");$(this).parents("#search").children(".submit").removeClass("expanded")});$("body.help").click(function(a){a=$(a.target);!a.is("#term")&&!a.closest("#search").length&&d.trigger("livesearch:close_results")});
d.bind("focus",function(){var a=d.data("livesearch");a&&a.search_xhr&&a.search_xhr.readyState===4&&d.trigger("livesearch:reveal_results")})})();
$(function(){$(".NS_help__project_guidelines a.more_link").live("click",function(a){$(this).toggleClass("expanded");a.preventDefault();a=$(this).parents("li").find(".more");a.is(":visible")?(a.hide(),typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Guidelines",$(this).text(),"Collapse")):(a.show(),typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Guidelines",$(this).text(),"Expand"))})});
$(function(){function a(a){a.find(".category_row").slideToggle("fast");a.find(".default_sort").toggleClass("headerSortUp");a.closest("table").toggleClass("collapsed");a.find(".arrow").toggleClass("flipped");a.hasClass("collapsed")?(a.find(".details").text("See Categories"),pageTracker._trackEvent("Help Stats","Collapsed",a.attr("name"))):(a.find(".details").text("Hide Categories"),pageTracker._trackEvent("Help Stats","Expanded",a.attr("name")))}var d=$("#help_stats"),c=$(".bubble");d.length&&($(".toggle_details").click(function(){var b=
$(this).closest("table");a(b)}),$("th").click(function(){var b=$(this).closest("table");b.hasClass("collapsed")&&a(b)}),$("td, th").hover(function(){var a=$(this).closest("table").find("th").eq($(this).index()),d=a.attr("data-header-explanation");a=a.html().replace("<br>"," ");if(typeof d!=="undefined"){c.find(".content").html("<span class='num date'>"+a+"</span>"+d);d=$(this);a=d.position();var f=d.closest("table").position(),g=c.width(),h=c.height(),k=parseInt(c.css("padding-right").replace("px",
""),10);c.css({left:f.left+a.left+d.width()/2-g-(k-1)+30,top:-(h+20)});c.find(".nipple").css({left:g+5,top:h+12,position:"absolute"});c.fadeIn("fast")}else c.fadeOut("fast")}),$("table").mouseleave(function(){c.fadeOut("fast")}))});
$(function(){$(".NS_jobs__why_work_at_kickstarter").length&&($("span.carousel").hover(function(){var a=$(this).attr("data"),d=$(this).attr("data_caption");a!==""&&(a==="video"?($(this).closest(".section").find(".video").delay(100).fadeIn(200),$(this).closest(".section").find("video")[0].play()):$(this).closest(".section").css({"background-image":"url("+a+")","-webkit-background-size":"cover"}),d!==""?$(this).closest(".section").find(".caption").text(d):$(this).closest(".section").find(".caption").text(""),
$(this).closest(".section").find("h2, p").css({visibility:"hidden"}),$(this).css({visibility:"visible"}),$(this).closest(".section").append("<a href='#close' class='close'>Close</a>"))},function(){var a=$(this).attr("data"),d=$(this).closest(".section").attr("data_caption");$(this).closest(".section").css({"background-image":"url("+$(this).closest(".section").attr("data")+")"});$(this).closest(".section").find("h2, p").css({visibility:""});$(this).css({visibility:""});d!==""?$(this).closest(".section").find(".caption").text(d):
$(this).closest(".section").find(".caption").text("");a==="video"&&($(this).closest(".section").find(".video").fadeOut(200),$(this).closest(".section").find("video")[0].pause());$(".close").remove()}),$(".section .close").live("click",function(a){$(this).css({"background-image":"url("+$(this).attr("data")+")"});a.preventDefault()}),$(".gallery_links .next").click(function(){$(".gallery_links ul").offset().left>0&&$(".gallery_links ul").animate({marginLeft:"-720px"},500,"easeOutExpo",function(){$(".gallery_links .prev").removeClass("disabled");
$(".gallery_links .next").addClass("disabled")})}),$(".gallery_links .prev").click(function(){$(".gallery_links ul").offset().left<0&&$(".gallery_links ul").animate({marginLeft:"0px"},500,"easeOutExpo",function(){$(".gallery_links .next").removeClass("disabled");$(".gallery_links .prev").addClass("disabled")})}),$(".gallery_links li").live("click",function(){var a=$(this).attr("data");$(".gallery_links li").removeClass("selected");$(this).addClass("selected");$(".galleries .video:not(#"+a+") .video-player").trigger("ksr_video:pause");
$(".galleries").find("#"+a).parent().animate({height:640},600,"easeOutExpo",function(){$(this).find(".gallery").fadeOut();$(".galleries").find("#"+a).fadeIn(function(){$(this).children(".video-player").ksr_video().trigger("ksr_video:play")});$.scrollTo($(this).parents(".section").find(".galleries"),{duration:1200,easing:"easeOutExpo"})})}),$(".galleries .close_link").click(function(a){$(".video-player").trigger("ksr_video:pause");$(".gallery_links li").removeClass("selected");$(this).parent().children(".gallery").fadeOut(500,
function(){$(this).parent(".galleries").animate({height:"0px"},500,"easeOutExpo")});a.preventDefault()}),function(a){$(a).each(function(){(new Image).src=this})}(["https://ksr-assets.s3.amazonaws.com/jobs_greatest_city_2_1600.jpg","https://ksr-assets.s3.amazonaws.com/jobs_its_fun_happy_hours_1600.jpg","https://ksr-assets.s3.amazonaws.com/jobs_its_fun_beach_1600.jpg","https://ksr-assets.s3.amazonaws.com/jobs_its_fun_workshops_1600.jpg","https://ksr-assets.s3.amazonaws.com/jobs_its_fun_movies_1600.jpg",
"https://ksr-assets.s3.amazonaws.com/jobs_its_fun_lunch_alt_1600.jpg"]))});$(function(){$("#jobs_show").length&&$("#sidebar").sticky_bar({parent:$("#jobs_show_wrap")})});
$(function(){function a(a){var b=$("#admin_wrap");g.offsetParent().scrollTop()===0?g.is(":hidden")?g.slideDown(function(){f.height(b.height())}):a===h&&g.slideUp(function(){f.height(b.height())}):g.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad",function(){g.is(":hidden")&&g.slideDown(function(){f.height(b.height())})});h=a}var d=$(".NS_layouts__admin_navigation"),c=$("a.open_panel",d),b=$("a.open_remote_panel",d),e=$("#admin_panel"),f=$("#admin-nav-prop"),g=$("#admin_panel_wrap"),h="local",
k=e.html();if(d.length){c.click(function(b){e.html(k);a("local");b.preventDefault()});if(window.location.hash==="#admin_panel")$.fx.off=!0,a("local"),$.fx.off=!1,window.location.hash="#";b.click(function(b){b.preventDefault();g.is(":visible")&&h==="remote"?a("remote"):(e.html('<h3 class="loading">Loading...</h3>'),$.ajax({type:"get",url:$(this).attr("href"),dataType:"html",success:function(b){e.html(b);a("remote")}}))})}});
$(function(){var a=$("#mega-footer-wrap");a.length&&function(){function d(a){a>9||(g.removeClass(e[f]),f+=1,f===e.length&&(f=0),g.addClass(e[f]),setTimeout(function(){d(a+1)},100))}var c=0,b=$("#mega-footer").width()/3,e=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],f=0,g=$("span.scissors",a);g.click(function(){c+=1;d(0);g.animate({marginLeft:b*c},1E3,function(){c===3&&(g.hide(),a.height(a.height()),a.addClass("gone"),$("html").addClass("gone"),$("#footer-wrap").hide(),a.find("#mega-footer-shadow").animate({marginTop:[a.height(),
"easeInOutExpo"],opacity:0},1E3))})})}()});
$(function(){$("#learn_more_panel").livequery(function(){function a(){$("#learn_more_dialog_content").removeClass("page0 page1 page2 page3").addClass("page"+b)}function d(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Homepage Events",a,b)}var c=$(this),b=0;c.closest(".modal_dialog").attr("id","learn_more_modal");c.serialScroll({items:".panel",lazy:!0,lock:!1,step:1,cycle:!1,duration:500,easing:"easeOutExpo"});a();c.find(".next").live("click",function(){c.trigger("next");b+=1;d("Learn more modal next");
a()});c.find(".prev").live("click",function(){c.trigger("prev");b-=1;d("Learn more modal previous");a()});c.closest(".modal_dialog").bind("modal_dialog:opened",function(){$.fx.off=!0;c.trigger("goto",[b]);$.fx.off=!1})})});
$(function(){function a(a){(q=a)?j.addClass("selecting"):(j.removeClass("selecting"),k.find("li.search_result").removeClass("selected"))}function d(){h.trigger("livesearch:cancel");h.val("");o.hide();v.hide();t.hide();g.slideUp(function(){j.empty();u.empty();t.empty()});$("body").removeClass("searching")}function c(){k.find("li.search_result").length<4?g.find(".arrow").addClass("disabled"):(g.find(".arrow").removeClass("disabled"),k.data("cur_page")===0&&k.find(".prev").addClass("disabled"),k.data("cur_page")===
k.data("last_page")&&k.find(".next").addClass("disabled"))}function b(a){a.preventDefault();f.removeAttr("submitting")}function e(a){a?f.unbind("submit",b):f.bind("submit",b)}if(typeof current_user!=="undefined")current_user.on_change("name",function(a){$("#menu-sub .user_context strong").text(a.name)});$("#menu-sub > .dropdown > a").click(function(a){a.preventDefault();var b=$(this).closest(".dropdown"),c=!0;b.is("#menu-sub-me")?b.trigger("user_dropdown:open"):b.addClass("selected");b.find("span.count").remove();
$(document).bind("click."+b.attr("id"),function(a){c?c=!1:$(a.target).parents(".dropdown-child").length||($(document).unbind("click."+b.attr("id")),b.removeClass("selected"))})});$(window).bind("keydown",function(a){!$(".NS-site_leanback").length&&a.keyCode===38&&window.scrollY===0&&$("a#leanback").click()});if(!($.browser.msie&&$.browser.version<=6||$("body.mobile").length)){var f=$("#header form.search"),g=$("#search_results-wrap"),h=f.find("input#term"),k=$("#search_results"),j=$("#search_results_panel"),
q=!1,s=h.siblings(".icon-search"),u=k.find("h2.header"),t=k.find("p.footer"),v=f.find(".icon-search-nipple"),B=k.find(".close"),o=f.find(".icon-search-clear"),n={UP:38,DOWN:40,LEFT:37,RIGHT:39,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};j.serialScroll({items:"li.search_result",lazy:!0,lock:!1,step:4,cycle:!1,duration:500,easing:"easeOutExpo"});g.find(".next:not(.disabled)").live("click",function(){j.trigger("next");k.data("cur_page",k.data("cur_page")+1);c();q&&a(!1)});
g.find(".prev:not(.disabled)").live("click",function(){j.trigger("prev");k.data("cur_page",k.data("cur_page")-1);c();q&&a(!1)});h.livesearch({file_extension:"json",process_data:function(){return{search:$("#search_variant_choice").val(),term:h.val().trim()}}}).data("livesearch");h.bind("livesearch:searching",function(){s.removeClass("icon-search").addClass("icon-loading-small");$("body").addClass("searching");e(!1)});h.bind("keypress cut paste input",function(a){a.keyCode!==13&&e(!1)});h.bind("livesearch:results livesearch:ajax_error",
function(){s.removeClass("icon-loading-small").addClass("icon-search");e(!0)});h.bind("livesearch:results",function(b,d){if(d.projects.length){var e=$("<ol></ol>");u.html(d.header);d.footer?(t.html(d.footer),t.show()):(t.empty(),t.hide());$.each(d.projects,function(a){var b="";a===0&&(b=" alpha");!d.see_more&&a===d.projects.length-1&&(b=" omega");e.append("<li class='search_result"+b+"'>"+this.card_html+"</li>")});d.see_more&&e.append("<li class='search_result see_more omega'>"+d.see_more+"</li>");
j.html(e);j.trigger("goto",[0]);k.data("cur_page",0);k.data("last_page",Math.floor((e.children().length-1)/4));c();a(!1);v.show();g.slideDown("fast");$("body").addClass("searching")}else $("body").removeClass("searching")});$(window).bind("scroll",function(){g.is(":visible")&&$(window).scrollTop()>k.offset().top+k.height()&&d()});$(document).click(function(a){$(a.target).closest("#search_results-wrap").length||d()});h.bind("keypress cut paste input",function(){this.value?o.show():(o.hide(),d())});
o.bind("click",function(){d();h.focus()});B.bind("click",d);k.find("li.search_result").live("select",function(){var b=$(this),d=k.find("li.search_result.selected").removeClass("selected");b.addClass("selected");a(!0);b.index()>d.index()&&b.index()%4===0?j.trigger("goto",[b.index()]):b.index()<d.index()&&d.index()%4===0&&j.trigger("goto",[d.index()-4]);k.data("cur_page",Math.floor(b.index()/4));c()});h.bind("keydown",function(b){var c=k.find("li.selected"),d=!!c.length;switch(b.keyCode){case n.UP:a(!1);
b.preventDefault();break;case n.DOWN:d||k.find("li.search_result:first").trigger("select");a(!0);b.preventDefault();break;case n.LEFT:if(!q)break;d?c.prev("li").trigger("select"):k.find("li.search_result:first").trigger("select");b.preventDefault();break;case n.RIGHT:if(!q)break;d?c.next("li").trigger("select"):k.find("li.search_result:last").trigger("select");b.preventDefault();break;case n.ENTER:if(!q)break;d=c.find("h2 strong a").attr("href");c.is(".see_more")&&(d=c.find("a.search-see-more").attr("href"));
if(!d)break;window.location=d;b.preventDefault();break;case n.ESC:a(!1),b.preventDefault()}})}});
$(function(){function a(){b.find("#menu-me-backed").length&&b.find(".dropdown-child").addClass("backer");b.find("#menu-me-created").length&&b.find(".dropdown-child").addClass("creator")}function d(c){var d=b.children("#menu-me-children");if($.support.localStorage())try{window.localStorage.user_dropdown_backer_creator_columns_html=c}catch(e){}d.children(".NS_layouts__user_dropdown_backer_creator_columns").remove();d.append(c);a()}function c(a){f||(f=$.ajax({url:b.data("user_dropdown_backer_creator_columns_path"),
type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")},success:function(a){d(a);e=!0},complete:function(){a&&a();f=!1}}))}var b=$(".NS_layouts__user_dropdown"),e=!1,f=!1;(function(){if($.support.localStorage()){var a=window.localStorage.user_dropdown_backer_creator_columns_html;a&&(d(a),e=!0)}})();a();$("#menu-sub-me").bind("user_dropdown:open",function(){var a=$(this);e?a.addClass("selected"):c(function(){a.addClass("selected")})});$("#menu-sub-me > a").one("click",
function(){c()});$(document).bind("user_dropdown:refresh_from_remote",function(){c()});$("body").is(".just_logged_out")&&delete localStorage.user_dropdown_backer_creator_columns_html});
(function(){function a(a,b){var c=a.add(b);c.siblings().removeClass("current_tab");c.addClass("current_tab");$(document).trigger("tab")}function d(a){if(typeof a!=="string")return"";return a.replace(/.$/,function(a){return a==="e"?"able":a+"able"})}function c(a){if(typeof a!=="string")return"";return a.replace(/.$/,function(a){return a==="e"?"ed":a+"ed"})}function b(a){if(typeof a!=="string")return"";return a.replace(/^./,function(a){return a.toUpperCase()})}$("body.admin").delegate(".tab","click",
function(){var b=$(this),c=b.attr("class").match(/tab_\d+/),d,h=b.find("a");c&&(d=$("."+c[0].replace(/tab/,"pane")));c&&d.length&&(h.length&&$.trim(d.html())===""?(b.addClass("submitting"),$.ajax({url:h.attr("href")+".js",type:"GET",complete:function(c){b.removeClass("submitting");d.html(c.responseText);a(b,d)}})):a(b,d))});$("body.admin").delegate(".tab_label a","click",function(a){a.preventDefault()});$("body.admin").delegate(".expand, .collapse","click",function(a){a.preventDefault();$(this).add($(this).siblings(".expand, .collapse, .expandable")).toggle()});
$("body.admin").delegate(".batch_action .select_all","click",function(a){a.preventDefault();a=$(this);var b=a.siblings("form").attr("action"),c=a.closest(".batch_action");b=c.parent().find('form[action="'+b+'"] input.checkbox:not([disabled])');var h=c.data("type");c=c.data("action");b.length?a.text()==="Select all"?(b.attr("checked",!0),a.text("Deselect all")):(b.attr("checked",!1),a.text("Select all")):growl({error:"No "+d(c)+" "+h+" here."})});$("body.admin").delegate(".batch_action input.submit",
"click",function(a){a.preventDefault();a=$(this);var d=a.closest("form").attr("action");a=a.closest(".batch_action");var g=a.parent().find('form[action="'+d+'"] input.checkbox:checked'),h=g.map(function(a,b){var c;c=b.id;c=typeof c!=="string"?"":(c=c.match(/\d+/))?c[0]:null;return c}).get(),k=a.data("type"),j=a.data("action"),q=k.replace(/s$/,""),s={};g.length?(s[k]=h,$.modal_confirm(function(){$.ajax({type:"PUT",url:d,data:s,success:function(){g.each(function(){var a=$(this);a.attr({checked:!1,disabled:!0});
a.closest("."+q).addClass(c(j)).find(".status").html(c(j))});growl({success:"KILLING IT"})},error:function(){growl({error:"There was a problem "+j+"ing one or more of those "+k+". Please refresh the page and try again."})}})},{message:"",confirm_text:b(j)+" "+h.length+" "+formatters.pluralize(k,h.length)+"?"})):growl({error:"No "+k+" selected to "+j+"."})})})();
$(function(){function a(a){a=a||$(".mobius");a.each(function(){var a=$(this).data("mobius");if(a)for(var b in a.clear_extra_params(),c)c.hasOwnProperty(b)&&a.add_param(b,c[b])})}var d=$("body.profile");if(d.length){$("body#users_show").length&&(history!==void 0&&history.pushState(null,null,window.location.pathname),$("#animated_pie",d).spriteshow({number:63,play_delay:40,pause_when_behind_by:0,play_once:!0,sprite_orientation:"horizontal"}),$("#animated_pie").bind("spriteshow:index",function(a,c){c===
43&&($("#category_circle").fadeIn(100),$("#animated_pie").fadeOut(1E3));c===0&&$(this).fadeOut()}));var c=URI().query(!0);$("#small_circle").bind("navigate",function(a,e){d.is("#users_show")?(c=URI(e).query(!0),$.ajax({url:e,type:"get",success:function(a){a=$(a).find("#main");$("#main").replaceWith(a)}})):window.location=e});a();$(".mobius").livequery(function(){a($(this))})}});
$(function(){$(document).bind("project_added_to_curated_page",function(a,c){var b=$("#add_to_curated_page_widget .button-curate");b.addClass("on");b.attr("href",c.edit_url)});var a={};$(".ksr_page_timer[data-dynamic]").livequery(function(){function d(a){var b;typeof a!=="object"&&(a=JSON.parse(a));if(b=Project.find(a.project.id))b.set(a.project),a.poll_interval&&f(a.poll_interval)}var c=$(this),b=parseInt(c.data("dynamic"),10),e=c.data("poll_url"),f;if(e&&!(typeof b!=="number"||isNaN(b)))f=function(b){a[e]=
setTimeout(function(){a[e]=$.ajax({url:e,success:d})},b*1E3)},f(b)},function(){var d=a[$(this).data("poll_url")];typeof d==="number"?clearTimeout(d):typeof d.abort==="function"&&d.abort()})});$(function(){$(".threads .thread").livequery(function(){var a=$(this).find("a");$(this).bind("click",function(){location.href=a.attr("href")});$(this).css("cursor","pointer")})});
$(function(){$("li.message a.report-spam").live("click",function(a){a.preventDefault();a=$(this);$.post($(this).attr("href"),null,null,"json");a.replaceWith("Thanks, we'll check it out")});$("#reply").live("click",function(a){a.preventDefault();a=$("#reply-container");a.is(":visible")?a.slideUp(400,"easeOutQuad"):a.slideDown(400,"easeOutQuad",function(){$(this).find("#message_body").focus()})});var a=window.location.hash,d=$("#reply-container");typeof a!=="undefined"&&a==="#reply_open"&&(d.show(),
d.find("#message_body").focus());$("form#new_message").live("submit",function(a){a.preventDefault();var b=$(this);b.hasClass("disabled")||$.ajax({type:b.attr("method"),url:b.attr("action"),dataType:"json",data:b.serialize(),success:function(a){a.error?b.find("textarea").closest("fieldset").addClass("field_with_errors"):KsrJSON.parse_response(a,b.closest(".ajax-container"))},complete:function(){b.removeClass("disabled")}})});$("#mark_as_spam_dialog a.spam").live("click",function(a){a.preventDefault();
a=$(this);$.post($(this).attr("href"),null,null,"json");$(this).trigger("close.modal_dialog");growl({success:"Thanks, we'll check it out"});$('a[href^="/messages/'+a.attr("id")+'/report"]').replaceWith("Thanks for reporting this. We'll check it out")})});
(function(a){a(".message").delegate(".report-spam a","click",function(d){d.preventDefault();var c=a(this),b=this,e=c.closest(".message"),f=a('<p class="flagged_message"><em class="spam_reported"></em></p>');a.modal_confirm(function(){e.find(".body").before(f);return KsrJSON.get(c.data("url"),"post",f.find("em"),b)},{message:e.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})});a(".message").delegate(".spam_reported","ksr_json:complete",function(d,c){var b=a(this).closest(".message"),
e=b.find(".report-spam");e.hide();c.status===200&&!e.is(".admin")&&b.find(".body").hide()})})(jQuery);
$(function(){function a(c){var b=c.data("frame")||0,d=c.data("timeout");c.data("animating")&&(c.find("img").hide(),c.find("img").eq(b).show(),c.data("frame",b<2?b+1:0),d&&clearTimeout(d),d=setTimeout(function(){a(c)},200),c.data("timeout",d))}var d=$("body#newsletters_index");d.length&&d.find("li.newsletter-item").livequery("mouseenter",function(){$(this).data("animating",!0);a($(this))}).livequery("mouseleave",function(){$(this).data("animating",!1)})});
$(function(){$("ol.admin-notes").find("form").live("submit",function(){var a=$("#admin-menu .note_count"),d;if(d=a.text().match(/^(\d+)/))d=parseInt(d[1],10),a.text(d+1+" notes")})});
$(function(){function a(){c.scrollTop()<b.position().top+b.height()-c.height()-e.height()?$(".checkout_actions").addClass("shadow"):$(".checkout_actions").removeClass("shadow")}var d=$(".checkout_actions_wrap"),c=$(window),b=$("#main"),e=$(".checkout_actions_prop");d.length&&(a(),$(window).scroll(function(){a()}),$(window).resize(function(){a()}),$(document).bind("shifted",function(){a()}))});
$(function(){function a(a){return isNaN(a)?"$0.00":"$"+window.formatters.format_number(a*exchange_rate,a*exchange_rate<2?2:0)}typeof exchange_rate!=="undefined"&&$(".pledges__checkout_amount input#backing_amount").livequery(function(){function d(){c.val()?(e.text(a(parseFloat(c.val()))),b.show(),b.addClass("show")):(b.hide(),b.removeClass("show"))}var c=$(this),b=c.closest(".pledges__checkout_amount").find(".fx-estimate"),e=b.find("span");c.bind("input cut paste keyup",function(){d()});d()})});
$(function(){var a=$(".pledges__checkout_faqs");a.length&&($(".faq-question a",a).live("click",function(a){var c=$(this).closest(".faq");c.toggleClass("expanded");mixpanel.track("Toggled Pledge Checkout FAQ",{pledge_faq_question:c.find(".question").text()});a.preventDefault()}),$("body#pledges_edit").length&&setTimeout(function(){$(".faqs li#change_my_pledge_amount").addClass("expanded");$(".faqs li#change_my_reward_selection").addClass("expanded");$(".faqs li#cancel_my_pledge").length&&$(".faqs li#cancel_my_pledge").addClass("expanded")},
800))});
$(function(){var a=$(".pledges__checkout_rewards");$(".pledges__checkout_rewards .toggle_reward_description").live("click",function(){$(this).closest(".description.short").hide();$(this).parent().parent().find(".description.full").show();return!1});a.length&&($(".reward input.radio",a).live("change",function(){var d=$(this);d=d.parent().offset().top+d.parent().outerHeight();var c=$(".checkout_actions_wrap").offset().top,b=$(".reward input.radio:checked").closest(".reward");$(".reward",a).removeClass("selected");b.addClass("selected");
$(".checkout_actions").hasClass("animated")||($(".checkout_actions_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(".checkout_actions").addClass("animated"));c<d&&$(window).scrollTop(window.pageYOffset+d-c)}),$(".reward input.radio:checked").trigger("change"),$(".checkout_rewards .reward:not(.disabled)").mouseenter(function(){$(this).addClass("hovering")}).mouseleave(function(){$(this).removeClass("hovering")}).live("click",function(){$(this).children("input.radio").attr("checked","checked").trigger("change")}))});
$(function(){function a(a){var b=a.closest("form").find(d);a=a.find(".shipping_option");var e=b.find(".shipping_setting");b=b.find(".shipping_message");a.length?(b.html(a.clone()),e.attr("disabled",!1),e.val()==="1"&&b.addClass("backer_domestic")):(b.empty(),e.attr("disabled",!0))}var d=".NS_pledges__checkout_shipping";$(d).find(".no-js input").attr("disabled",!0);$(".pledges__checkout_rewards .reward input.radio").live("change",function(){var c=$(".reward input.radio:checked").closest(".reward");
a(c)});a($(".reward input.radio:checked").closest(".reward"));$(".modal_dialog:visible "+d).livequery(function(){a($(this).closest(".modal_dialog").find(".reward.shipping.visible"))});$(d+" .shipping_message a").live("click",function(a){var b=$(this),e=b.closest(d).find(".shipping_setting"),f=b.closest(".shipping_message");b=b.closest("form").find(".pledges__checkout_rewards");a.preventDefault();a=b.hasClass("modal")?b.find(".reward.visible"):b.find(".reward.selected");e.val()==="1"?(f.removeClass("backer_domestic"),
e.val("0"),mixpanel.track("Domestic Shipping Toggle",{toggled_to:"international",shipping_applicable:a.data("shipping_applicable"),pledge_context:$("body").attr("id"),project_country:current_project.data.country})):(f.addClass("backer_domestic"),e.val("1"),mixpanel.track("Domestic Shipping Toggle",{toggled_to:"domestic",shipping_applicable:a.data("shipping_applicable"),pledge_context:$("body").attr("id"),project_country:current_project.data.country}))})});
$(".pledges__checkout_summary").each(function(){var a=$(this);$(".toggle_reward_description",a).live("click",function(a){$(this).closest(".description.short").hide();$(this).parent().parent().find(".description.full").show();a.preventDefault()})});
$(function(){$(".NS_pledges__no_ship").livequery(function(){var a=$(this),d=$("form.NS_pledges__form, form.manage_pledge"),c=d.find(".fields_and_submit"),b=d.closest(".modal_dialog"),e=b.data("modal_dialog");a.find("a.override").click(function(a){a.preventDefault();$(this).trigger("close");d.data("override",!0);d.removeAttr("submitting");d.find(".shipping_option.domestic input[type=hidden]").val("1");d.submit()});a.find("a.button-positive").click(function(d){d.preventDefault();$(this).trigger("close");
e&&(a.hide(),c.show(),b.find("h1").show())})})});
$(function(){var a=$("body#pledges_edit"),d=$("form.manage_pledge",a),c=$(".radio:checked").attr("id");a.length&&d.length&&(d.live("submit",function(a){var c=$("body#pledges_edit form input.radio:checked"),d=parseFloat(c.attr("alt"));c=c.attr("alt");var g=$("body#pledges_edit form input#backing_amount").val();d===0?$("#confirm-adjust-reward-amount").html("No reward"):$("#confirm-adjust-reward-amount").html("Reward: "+c);$("#confirm-adjust-pledge-amount").html("Pledge: "+formatters.currency_symbol(current_project.get("currency"))+
g);$("#confirm-adjust-pledge").modal_dialog();a.preventDefault()}),mixpanel.track("Edit Pledge Page"),$(".faq-question a",a).live("click",function(){var a=$(this).closest(".faq");mixpanel.track("Toggled Pledge Edit FAQ",{pledge_faq_question:a.find(".question").text()})}),$(".flash-error").livequery(function(){var a,c=parseInt($(".text#backing_amount").attr("value").replace(/,/,""),10);a=typeof $(".radio:checked").attr("alt")!=="undefined"?parseInt($(".radio:checked").attr("alt").replace(/,/,""),10):
null;mixpanel.track("Errored Pledge Selection",{pledge_tier_amount:parseInt(a,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(c,10)})}),$(".text#backing_amount").blur(function(){var a,c=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);a=typeof $(".radio:checked").attr("alt")!=="undefined"?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null;mixpanel.track("Modified Pledge Amount",{pledge_tier_amount:a,pledge_input_amount:parseInt(c,
10)})}),$(".amzn-payments").live("click",function(){mixpanel.track("Clicked Amazon Payments Logo")}),$(".pledges__checkout_rewards .checkout_rewards .radio").change("click",function(){var a=$(this).attr("id");a!==c&&mixpanel.track("Selected Reward Tier",{pledge_amount_selected:parseInt($(this).attr("alt").replace(/[^0-9\.]/,""),10),shipping_applicable:$(this).closest(".reward").data("shipping_applicable"),pledge_context:$("body").attr("id"),project_country:current_project.data.country});c=a}),$("body#pledges_edit .confirm-yes").live("click",
function(){d.removeAttr("submitting");d.die("submit");d.submit();return!1}),$("a.cancel").live("click",function(a){a.preventDefault();$(this).trigger("close.modal_dialog")}),$(document).bind("before_close.modal_dialog",function(){d.removeAttr("submitting")}))});
$(function(){var a=$("body#pledges_new"),d=$(".radio:checked").attr("id");a.length&&($("a.show_all_rewards").click(function(a){$(this).parents(".checkout_rewards").find("li:hidden").show();$(this).parents(".checkout_rewards").removeClass("clicked_reward");$(this).parents(".show_all").hide();a.preventDefault();$(document).trigger("shifted");mixpanel.track("Expanded Rewards")}),$(".flash-error").livequery(function(){var a,b=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);
a=typeof $(".radio:checked").attr("alt")!=="undefined"?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null;mixpanel.track("Errored Pledge Selection",{pledge_tier_amount:parseInt(a,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(b,10)})}),$(".text#backing_amount").blur(function(){var a,b=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);a=typeof $(".radio:checked").attr("alt")!=="undefined"?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,
""),10):null;mixpanel.track("Modified Pledge Amount",{pledge_tier_amount:a,pledge_input_amount:parseInt(b,10)})}),$(".amzn-payments").live("click",function(){mixpanel.track("Clicked Amazon Payments Logo")}),$(".pledges__checkout_rewards .checkout_rewards .radio").change("click",function(a){var b=$(this).attr("id");b!==d&&mixpanel.track("Selected Reward Tier",{pledge_amount_selected:parseInt($(a.target).attr("alt").replace(/[^0-9\.]/,""),10),shipping_applicable:$(this).closest(".reward").data("shipping_applicable"),
pledge_context:$("body").attr("id"),project_country:current_project.data.country});d=b}),location.search.indexOf("edit_from_interstitial=shipping")!==-1?mixpanel.track("Clicked Edit Shipping",{shipping_applicable:$(".radio:checked").parent().data("shipping_applicable"),project_country:current_project.get("country")}):location.search.indexOf("edit_from_interstitial=amount")!==-1&&mixpanel.track("Clicked Edit Amount",{shipping_applicable:$(".radio:checked").parent().data("shipping_applicable"),project_country:current_project.get("country")}))});
$(function(){$("#posts_preview").length&&$("#creator_admin_bar").sticky_bar().bind("sticky_bar:fixed_changed",function(a,d){d?($("#post-publisher-wrap").css({position:"fixed",marginTop:"-1px",top:"60px"}),$("#content").css("marginTop","60px")):($("#post-publisher-wrap").css({position:"static",marginTop:"0px"}),$("#content").css("marginTop","0px"))})});
(function(){$("body.is_creator").length&&($("#creator_admin_bar").sticky_bar(),$("#creator_admin_bar .icon-close").click(function(){$("#creator_admin_bar").animate({bottom:"-60px"},300,"easeOutExpo",function(){$("#creator_admin_bar_tab").animate({bottom:"-10px"})});$("#footer-wrap").css({paddingBottom:"0px"})}),$("#creator_admin_bar_tab").click(function(){$(this).animate({bottom:"-70px"},300,"easeOutExpo",function(){$("#creator_admin_bar").animate({bottom:"0px"})});$("#footer-wrap").css({paddingBottom:"60px"})}))})(jQuery);
$(function(){var a=$(".NS-projects__admin_keyboard_control");a.length&&$(document).bind("keydown",function(d){if(d.ctrlKey){var c=a.find("#project_moderated_state"),b=a.find("form"),e="";switch(d.which){case 82:e="recommended";break;case 80:e="promising";break;case 65:e="acceptable";break;case 84:e="tolerated";break;case 66:e="buried";break;default:return}c.val(e);$.ajax({url:b.attr("action"),type:b.attr("method"),dataType:"json",data:b.serialize(),success:function(){growl({info:e})}});$("#admin-nav-wrap span.moderation_status").text(e.substring(0,
3))}})});$(function(){var a=$(".NS_projects__edit_submission");a.length&&$("a.reply",a).live("click",function(a){var c=$(".NS_projects__edit_submission .reply_container form");a.preventDefault();c.is(":visible")?c.slideUp(300,"easeOutQuad"):c.slideDown(300,"easeOutQuad",function(){$(this).find("textarea").focus()});return!1})});
$(function(){function a(){$("ul.faqs li.faq:not(.deleted) input.position").each(function(a,c){$(c).val(a+1)})}var d=$("#projects_show"),c=$([]);if(d.length){if(window.location.pathname.match(/\/faqs$/))window.location.hash="project-faqs";c=$("#faq-template").children().clone();$(".faq-question a",d).live("click",function(a){a.preventDefault();$(this).closest(".faq").toggleClass("expanded")});$("form .link_to_new_question",d).live("click",function(){var b=c.clone(!0,!0),d=(new Date).getTime();b.find("input,textarea,select").each(function(a,
b){var c=$(b);c.attr("id",c.attr("id").replace(/new_project_faq/,d)).attr("name",c.attr("name").replace(/new_project_faq/,d));c.is(".delete")&&c.val(0)});b.removeClass("hidden").appendTo("#project-faqs ul.faqs");a();return!1});$(".faq .basic_editor",d).live("wymeditor:doc_html_updated",function(){$.wymeditors($(this).data("wym_index")).update()}).live("wymeditor:iframe_loaded",function(){$(this).closest(".faq.loading_wym").removeClass("loading_wym")});$(".faq .delete",d).live("click",function(a){a.preventDefault();
a=$(this).closest("li.faq");a.find("input.delete").val(1);a.addClass("deleted").fadeOut("slow");return!1});$("#project-faqs ul.faqs",d).sortable({containment:"#projects_show",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"li.faq",start:function(a,c){$(".project-faq-placeholder").css("height",c.item.height()+"px");c.item.addClass("reordering")},stop:function(a,c){c.item.removeClass("reordering")},update:a})}});
$(function(){var a=$(".share-container a.facebook");a.click(function(d){window.open(a.attr("href"),"Facebook","width=600px,height=450px");d.preventDefault()})});$(function(){$("#rightcol").delegate("#what-you-get:not(.clickable) a.NS-projects-reward, #what-you-get.backing a.NS-projects-reward","click",function(a){a.preventDefault();a.stopPropagation()});$("#rightcol").delegate("#what-you-get a.NS-projects-reward","click",function(a){current_project.get("state")!=="live"&&(a.preventDefault(),a.stopPropagation())})});
$(function(){function a(a){b.length?(b.get(0)!==d.get(0)&&d.remove(),b.show()):b=d;b.find(".flash-error").remove();a&&b.prepend('<div class="flash-error">'+a+"</div>");d=b;c=!0}var d,c,b=$([]);$(".projects__verify_identity").livequery(function(){d=$(this).find("form");d.prop("onsubmit",null);c=!0;b=$([])});$(".projects__verify_identity form").live("submit.kba",function(e){e.preventDefault();var f=$(this),g,h=!1,k;f.find(":input:not(.optional)").each(function(){var a=$(this);$.trim($(this).val())?
a.removeClass("errored"):(a.addClass("errored"),h=!0)});h||(k=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"}),f.after(k),$.ajax({url:f.attr("action"),type:f.attr("method"),data:f.serialize(),dataType:"json",complete:function(){k.remove()},success:function(h){h.questions?(h.questions.form_url=h.location,h.questions.client_token=f.find("input#client").val(),g=$(render("projects/_verify_identity_questions",h)),c?(b=f.hide(),c=!1,f.after(g)):f.replaceWith(g),
d=g,d.find("div.questions").serialScroll({items:"li.question",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"}).bind("notify.serialScroll",function(a,b){var c=$(this).find("li.question").eq(b).outerHeight();$(this).height(c)}).trigger("notify",[0]),d.find("a.next").bind("click",function(a){var b=$(this);b.closest("li.question").find(":checked").length&&(b.is(".submit")?b.submit():d.find("div.questions").trigger("next"));a.preventDefault()}),d.find("a.next:last").each(function(){$(this).text("Submit").addClass("submit");
e.preventDefault()})):h.retry===!1&&h.html?f.closest("#account-setup-panel").html(h.html).trigger("project_edit:update_completion"):a(h.error||"")}}))})});
$(function(){function a(a){window.top.postMessage(JSON.stringify($.extend({account_panel:!0,completed:$(".needs_verification").length===0,height:c.height()+20},a)),"*")}var d=$("body.projects_account"),c=$("#projects_account");d.length&&(c.bind("resize ksr_json:complete project_edit:update_completion",function(){a()}),$(".needs_verification").livequery(function(){a()},function(){a()}),c.bind("project_edit:update_preview",function(){a({update_preview:!0})}),c.find("a.zendesk").live("click",function(){a({open_zendesk:!0})}),
setTimeout(a,500))});$(function(){$("#country-select").livequery(function(){var a=$(this);a.find("a.button-positive").bind("click",function(d){a.find("form").submit();d.preventDefault()});a.find("select#country").bind("change",function(){a.attr("class",$(this).val().toLowerCase())}).trigger("change")})});
$(function(){$("body#projects_dashboard").length&&(function(){function a(){var a=$("#stats-funding-graph .graph");c=[];d=[{data:funding_graph_data,color:"#55a4f2",points:{show:!0,fill:!0},lines:{show:!0,fill:0.35},hoverable:!0,yaxis:1},{data:funding_graph_options.goal_line_data,color:"rgba(135,196,66,1)",points:{show:!1,fill:!1},lines:{show:!0,lineWidth:1},shadowSize:0,hoverable:!1},{data:[0,0],yaxis:2}];c={xaxis:{mode:"time"},yaxis:{min:0,max:funding_graph_options.max_y,tickFormatter:function(a,
b){var c=funding_graph_options.currency_symbol+window.formatters.format_number(a.toFixed(b.tickDecimals),0);a===funding_graph_options.goal&&(c="<span class='goal_style'>"+c+"</span>");return c}},y2axis:{min:0,max:funding_graph_options.percent_y,tickFormatter:function(a,b){var c=window.formatters.format_number(a.toFixed(b.tickDecimals)*100,0)+"%";a===1&&(c="<span class='goal_style'>"+c+"</span>");return c}},grid:{show:!0,hoverable:!0,tickColor:"rgba(128,152,176,0.3)",borderWidth:0.5,borderColor:"#ccc",
color:"#ccc",mouseActiveRadius:15,markings:function(a){var b=[],c=a.yaxis.ticks[1].v,d;for(d=a.yaxis.min;d<a.yaxis.max;d+=c*2)b.push({yaxis:{from:d,to:d+c},color:"#fff"});return b}}};$.plot(a,d,c);$("#stats-funding-graph .graph").bind("plothover",function(a,c,d){if(d){var e=funding_graph_data[d.dataIndex][3],j;if(j=e?e.date_label:null)a=funding_graph_data[d.dataIndex][1],c=e.backers_count,e=e.percent_raised,b.find(".content").html("<span class='num date'>"+j+"</span><span class='num'>"+funding_graph_options.currency_symbol+
window.formatters.format_number(a,0)+"</span> raised<br/><span class='num'>"+e+"%</span> funded<br/><span class='num'>"+window.formatters.format_number(c,0)+"</span> backers"),a=b.width(),c=b.height(),j=parseInt(b.css("padding-right").replace("px",""),10),b.css({left:d.pageX-a/2-(j-1),top:d.pageY-c-35}),b.find(".nipple").css({left:a/2+5,top:c+12,position:"absolute"}),b.fadeIn("fast")}})}if($("#stats-funding-graph .graph_container").length){var d,c,b=$("#stats-funding-graph .bubble");window.pluralize=
function(a,b){return a===1?b:b+"s"};(function(){a();$("#stats-funding-graph .bubble").mouseenter(function(){b.fadeOut("fast")});$("#stats-funding-graph .graph_container").mouseleave(function(){b.fadeOut("fast")})})()}}(jQuery),function(){if($("#stats-pledge-distribution-graph .graph_container").length){var a=$("#stats-pledge-distribution-graph .bubble");(function(){var d=[{data:reward_distribution_data,color:"#b8dc90"}],c={bars:{show:!0,align:"center"},xaxis:{ticks:reward_distribution_options.tick_labels,
autoscaleMargin:0.02},yaxis:{min:0},grid:{hoverable:!0,borderWidth:0.5,borderColor:"#fff",color:"#999"}},b;b=$("#stats-pledge-distribution-graph .graph");b.unbind("plothover");$.plot(b,d,c);b.bind("plothover",function(b,c,d){var h,k,j;d&&(b=d.datapoint[1],h=reward_distribution_data[d.dataIndex][3],c=reward_distribution_data[d.dataIndex][4],k=window.formatters.format_number(Math.round(b/reward_distribution_options.backers_count*100),0),j=window.formatters.format_number(Math.round(c/reward_distribution_options.money_raised*
100),0),k<1&&(k=" < 1"),j<1&&(j=" < 1"),h=h===0?"<span class='num'>No Reward Chosen</span>":"<span class='num'>"+funding_graph_options.currency_symbol+h+"</span> Reward",a.find(".content").html(h+"<br/><span class='num'>"+window.formatters.format_number(b,0)+"</span> "+pluralize(b,"Backer")+" ("+k+"% of backers) <br/><span class='num'>"+funding_graph_options.currency_symbol+window.formatters.format_number(c,0)+"</span> Pledged ("+j+"% of money raised)"),b=a.width(),c=a.height(),k=parseInt(a.css("padding-right").replace("px",
""),10),a.css({left:d.pageX-b/2-(k-1),top:d.pageY-c-35}),a.find(".nipple").css({left:b/2+5,top:c+12,position:"absolute"}),a.fadeIn("fast"))});$("#stats-pledge-distribution-graph .bubble").mouseenter(function(){a.fadeOut("fast")});$("#stats-pledge-distribution-graph .graph_container").mouseleave(function(){a.fadeOut("fast")})})()}}(jQuery),function(){var a=$("#projects_dashboard #activity").find(".mobius").data("mobius");a.current_page=0;$("#projects_dashboard .activity-filters a").live("click",function(d){var c=
$(this);c.closest(".activity-filters").find("a").removeClass("current");c.addClass("current");$.ajax({type:"get",dataType:"html",url:c.attr("href"),success:function(b){b=$(b).find(".mobius").children();$("#activity .mobius").html(b).trigger("mobius:loaded_page",[1,b]);a.clear_extra_params();a.add_param("cat",c.data("filter"));a.current_page=1}});d.preventDefault()})}(),function(){if($("#stats-referrer-type-pie .graph_container").length){var a={series:{pie:{show:!0,radius:1,label:{radius:0.5,formatter:function(a,
c){return'<div class = "pieLabel" >'+a+"<br/><b>"+Math.round(c.percent)+"%</b></div>"}}}},legend:{show:!0,labelBoxBorderColor:"white",labelFormatter:function(a,c){return'<div class = "pieLabel" style = "color:'+c.color+'" >'+a+": <b>"+Math.round(c.percent)+"%</b></div>"},container:$("#stats-referrer-type-pie .pie_label_container")}},d=[{label:"via Kickstarter",data:parseInt(referrer_type_data.internal,10),color:"#B8DC90"},{label:"via External",data:parseInt(referrer_type_data.external,10),color:"#999"}],
c=$("#stats-referrer-type-pie .pledges .graph");$.plot(c,d,a)}}(jQuery),function(){if($("#stats-video .graph_container").length){var a={series:{bars:{show:!0,barWidth:0.85,horizontal:!0}},xaxis:{min:0,max:Math.max(parseInt(video_stats_data.internal_starts,10),parseInt(video_stats_data.external_starts,10))*1.05,tickFormatter:function(a){return window.formatters.format_number(a,0)}},yaxis:{show:!1,min:-0.15,max:2},legend:{show:!0,labelBoxBorderColor:"white",noColumns:2,labelFormatter:function(a,c){return'<div class = "label_text" style = "color:'+
c.color+'" >'+a+": "+window.formatters.format_number(c.data[0][0],0)+"</b></div>"},container:$("#stats-video .label_container")},grid:{show:!0,tickColor:"rgba(128,152,176,0.3)",borderWidth:0.5,borderColor:"#ccc",color:"#ccc"}},d=[{label:"Kickstarter",data:[[parseInt(video_stats_data.internal_starts,10),1]],color:"#91C2F2"},{label:"Off-site",data:[[parseInt(video_stats_data.external_starts,10),0]],color:"#ec9b23"}],c=$("#stats-video .video_plays .graph");$.plot(c,d,a)}}(jQuery))});
$(function(){function a(){B=function(){}}function d(a){var b=a.find(":input.required"),c=!0,d=!1;if($("body").is(".rejected, .appealed")&&!a.children().length)return!0;b.each(function(){$(this).val()||(c=!1)});a.find(".NS-assets_form.required:not(.has_file)").length&&(c=!1);if(a.is("#the-basics-panel")&&(d=$("#project_goal").val(),!d||!d.match(/[1-9]/)))c=!1;a.is("#rewards-panel")&&(a.find(".reward .summary").length||(c=!1));a.is("#account-setup-panel")&&(c=a.data("completed"));a.is("#submission-panel")&&
(c=!!a.find(".accepted").length);return c}function c(){var a=!0;$("#steps-nav a").each(function(){var b=$(this),c=$(b.attr("href")+"-panel");d(c)?b.addClass("completed").removeClass("errored"):(b.removeClass("completed"),a=!1)});a?($("#project-edit-nav .submit a").addClass("enabled"),$("#project-edit-nav .launch a").addClass("enabled")):($("#project-edit-nav .submit a").removeClass("enabled"),$("#project-edit-nav .launch a").removeClass("enabled"))}function b(a,b){typeof pageTracker!=="undefined"&&
pageTracker._trackEvent("Project Edit",a,b)}function e(){var a=$("#forms .flash-error");$("#steps-nav a").removeClass("errored");if(a.length)return a.find("li").each(function(){b("Validation Error",$(this).text())}),a.closest("li.panel").each(function(){var a=$(this).data("panel_id");$('#steps-nav a[href="#'+a+'"]').addClass("errored")}),!0;return!1}function f(a){var b=!1;s.find("input.photo, input.video, input.avatar").each(function(){$(this).data("uploading")&&(b=!0)});b?(u.modal_dialog(),u.one("abandon",
function(){a();$("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel")})):a();return b}function g(){var a=$("#project-edit-nav .preview a").attr("href");a&&$.ajax({type:"get",url:a,dataType:"json",success:function(a){k.find("#preview .project-content").html(a.content);k.find("#preview #project-header").html(a.running_board);k.find("#project-card-preview").html(a.card);k.find("#submission-sidebar-help").html(a.submission_sidebar)}})}function h(a){if(!a.is(".disabled")){var b=
a.text();a.addClass("disabled");$.ajax({url:a.attr("href"),type:"put",dataType:"json",success:function(b){b.share_token?(a.closest("#share_preview_container").removeClass("no_token").addClass("has_token"),$("#sharing_enabled input.url").val(b.url)):a.closest("#share_preview_container").removeClass("has_token").addClass("no_token")},complete:function(){a.removeClass("disabled");a.text(b)}})}}var k=$("#projects_edit"),j,q,s,u=$("#confirm-abandon-upload"),t=$("#country",k).val(),v=0,B=function(){};window.change_facebook_timeout=
function(a){v=a};k.length&&($(window).bind("message",function(a){try{var b=JSON.parse(a.originalEvent.data),d=$("#account-setup-panel").data("completed");b.account_panel&&($("#account-setup-panel").data("completed",b.completed),$("#account-setup-panel iframe").height(b.height));b.completed!==d&&c();b.update_preview&&$(window).trigger("project_edit:update_preview");b.open_zendesk&&Zenbox.render()}catch(e){}}),function(){function d(a){window.history&&window.history.replaceState?window.history.replaceState(null,
null,a):window.location.replace(a)}function g(b){if($(".form-tools").is(":visible"))return f(function(){H.modal_dialog();H.unbind("saving").one("saving",function(){B=function(){b();H.unbind("canceling");a()}});H.unbind("canceling").one("canceling",function(){b();H.unbind("canceling");a()})}),!0;return!1}function h(a){var b=k.find("#steps-nav > li:eq("+a+") > a"),c=$("#running-board > .help-panels");if(!b.is(".disabled")){if(g(function(){h(a)}))return!1;s=$("ol.form-panels li.panel:eq("+a+")");s.trigger("resize");
s.is("#submission-panel")&&function(){var a=s.find(".read_messages_path").text();a&&$.ajax({type:"put",url:a})}();$(window).scrollTop()>75&&$(window).scrollTop(60);l.trigger("goto",[a]);M.show();J.show();K.hide();$("#project-edit-nav a").removeClass("selected").removeClass("selected_last");b.addClass("selected");a===0&&J.hide();a===D-1&&(M.hide(),K.show());c.height(c.height());c.children(".panel").hide();$("#"+s.data("panel_id")+"-help").fadeIn();c.css("height","auto");$("#sidebar > .sidebar-help-panels > .panel").hide();
$("#"+s.data("panel_id")+"-sidebar-help").fadeIn();k.find(".tools").show();d("#"+s.data("panel_id"));q=a;$("body").removeClass("confirm_preview");return!0}}function j(a,b){if(g(function(){j(a,b)}))return!1;var c=$(".content-toggle > "+a.data("for")),d=$("#project-edit-nav a.selected");if(c.is(":visible"))c.css("height","100%"),c.css("min-height","0%"),c.animate({height:"0%"},function(){c.hide()}),h($("#steps-nav li:has(a.selected_last)").index());else if(!b||b())c.css("height","0%"),c.css("min-height",
"0%"),c.show(),c.animate({height:"100%"},function(){c.css("height","auto");c.css("min-height","100%")}),k.find(".tools").hide(),$(window).scrollTop()>75&&$(window).scrollTop(60),s.find("textarea.intermediate_editor, textarea.editor").each(function(){var a=$.wymeditors($(this).data("wym_index"));a&&$("object",a._doc).hide()}),a.addClass("selected"),d.is(".tab")||d.addClass("selected_last").removeClass("selected");return!0}var t=k.find("#main"),l=t.find(".window"),q=0,D=t.find("ol.form-panels li.panel").length,
M=k.find("li.next"),J=k.find("li.back"),K=k.find("li#submit_for_review"),H=$("#confirm-abandon");s=$("ol.form-panels li.panel:eq("+q+")");H.find(".save a").live("click",function(a){a.preventDefault();$(".tools-panels .save a").click();H.trigger("saving");H.trigger("close")});H.find(".cancel a").live("click",function(a){a.preventDefault();$(".tools-panels .cancel a").click();H.trigger("canceling");H.trigger("close")});H.bind("closed.modal_dialog",function(){H.unbind("canceling");H.unbind("saving")});
u.find(".save a").live("click",function(a){a.preventDefault();u.unbind("abandon");u.trigger("close");b("Finish Upload","From Modal")});u.find(".cancel a").live("click",function(a){a.preventDefault();u.trigger("abandon");u.trigger("close");b("Cancel Upload & Continue","From Modal")});u.bind("closed.modal_dialog",function(){u.unbind("abandon")});l.serialScroll({items:"li.panel",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"});l.live("shifted",function(){$(".form-panels .panel:first").resize()});
$("#main li.panel").livequery(function(){$(this).bind("resize",function(){var a=$(window).height()-60-80-$("#running-board-wrap").height();s.height()>a?l.height(s.height()):l.height(a);$(window).trigger("shifted")})});M.find("a").click(function(a){a.preventDefault();h(q+1);b("Next","From Toolbar")});J.find("a").click(function(a){a.preventDefault();h(q-1);b("Back","From Toolbar")});$("#project-edit-nav a").click(function(a){a.preventDefault();var c=$(this);a=c.parent("li").index();if(!c.is(".disabled"))if(k.find(".content.tabbed").slideUp(),
s.find("textarea.intermediate_editor, textarea.editor").each(function(){var a=$.wymeditors($(this).data("wym_index"));a&&$("object",a._doc).show()}),$("#project-edit-nav .tab.selected").removeClass("selected"),c.is(".tab"))j(c),c.hasClass("selected")?b("Preview","Standard"):b("Unpreview","");else if(c.is(".view_project")){if(!g(function(){window.location.href=c.attr("href")}))window.location.href=c.attr("href");b("View Project","")}else h(a),b("Change Panel",$.trim(c.text()))});$("#amz_banner .account_setup").live("click",
function(a){a.preventDefault();a=$("#account-setup-panel").index();h(a);b("Visit Account from Amazon verification banner","")});$("#submit_for_review a").live("click",function(a){a.preventDefault();var c=$(this),d=$("#saving-layer");d.show();$.ajax({url:c.attr("href"),type:"get",dataType:"json",success:function(a){a.ok?j(c,function(){$("body").addClass("confirm_preview");b("Preview","Pre-Submit");return!0}):($.each(a,function(a,b){if(b){var c=$("#"+a.replace(/_/g,"-")).html(b);window.FB&&window.FB.XFBML&&
setTimeout(function(){FB.XFBML.parse(c[0])},v)}}),e()&&h($(".flash-error:first").closest(".panel").index()))},complete:function(){d.hide()}})});$("#submit_edit a").live("click",function(a){a.preventDefault();a=$(this);j(a);b("Pre-Submit Preview Edit","")});jQuery.fx.off=!0;$("body").is(".submitted")&&$.browser.msie&&$.browser.version<9?$("#steps-nav a[href=#submission]").click():window.location.hash?$("#steps-nav a[href="+window.location.hash+"]").click():$("body").is(".submitted")?$("#steps-nav a[href=#submission]").click():
$("#steps-nav a[href=#the-basics]").click();jQuery.fx.off=!1;$("#loading").hide();$("#logo a, #menu-sub a, a.exit-link").bind("click",function(a){a.preventDefault();var c=$(this);if(!g(function(){window.location.href=c.attr("href")}))window.location.href=c.attr("href");b("External Link",$.trim(c.text()))});$("#submit_confirmation > form").live("submit",function(a){a.preventDefault();a=$(this);var c=$("#saving-layer");c.show();b("Pre-Submit Preview Submit","");$.ajax({url:a.attr("action"),type:"post",
dataType:"json",data:a.serialize(),success:function(a){a.redirect_to?url_equals(window.location,a.redirect_to)?window.location.reload(!0):window.location=a.redirect_to:($.each(a,function(a,b){if(b){var c=$("#"+a.replace(/_/g,"-")).html(b);window.FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(c[0])},v)}}),e()&&h($(".flash-error:first").closest(".panel").index()),c.hide())},error:function(){c.hide()}})});$("div#forms form.edit_submission").live("submit",function(a){a.preventDefault();a=$(this);
var b=$("#saving-layer");$.trim(a.find("textarea").val()).length?(a.trigger("close"),b.show(),$.ajax({url:a.attr("action"),type:"post",dataType:"json",data:a.serialize(),success:function(a){$("#submission-panel").html(a.panel);$("#submission-sidebar-help .appeal").remove()},complete:function(){b.hide()}})):growl({error:"Message is blank"})});$("#launch_confirmation > form").live("submit",function(a){$(this).find("input.confirmation").is(":checked")||($(this).removeAttr("submitting"),growl({error:"Please accept the Kickstarter Project Guidelines."}),
a.preventDefault())});window.ksr_before_unload=function(a){g(a)||a()};$.rails.beforeSubmit=function(a){return!g(function(){a()})};c();e()&&h($(".flash-error:first").closest(".panel").index())}(),function(){function a(b){b=b.clone();b.find("object.swfupload").remove();b.find(".location-search .field-selected").remove();return b}var b={};k.find("form").each(function(){var c=$(this);b[c.closest(".panel").data("panel_id")]=a(c)});$.fn.restore_form=function(){var d=$(this),f=d.closest(".panel").data("panel_id"),
g=b[f],h;h=d.find(".NS-assets_form:first");h.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel");h=h.clone();h.find("object").remove();g.find(".NS-assets_form:first").replaceWith(h);d.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy");d.replaceWith(g);window.FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(g[0])},v);g.trigger("form_restored");b[f]=a(g);c();e()};$.fn.update_form_cache=function(){var c=$(this),d=c.closest(".panel").data("panel_id");
b[d]=a(c)}}(),$(window).bind("project_edit:update_preview",g),$(".edit_project input.photo, .edit_project input.video, .edit_project input.avatar").livequery(function(){var a="image",b=$(this),d=b.parent(),e=d.parent(),f=function(){},h={};b.is(".video")&&(a="video",f=function(){g()});$.extend(h,{type:a,after_encode:f});b.ksr_file_upload(h);b.bind("file_queued",function(){e.removeClass("has_file");d.addClass("in_progress")});b.bind("file_added",function(){e.addClass("has_file");e.closest(".grey-field").removeClass("error");
d.removeClass("in_progress");a==="video"&&e.addClass("encoding");e.find("input.photo, input.video, input.avatar").trigger("resize");g();c()});b.bind("error",function(){d.removeClass("in_progress")})}),$("body#projects_edit .NS-assets_form a.remove").live("click",function(a){a.preventDefault();a=$(this).attr("href");var b=$(this).closest(".NS-assets_form");$.ajax({url:a,type:"delete",success:function(){b.removeClass("has_file");b.find("input.photo, input.video, input.avatar").trigger("resize");g()},
error:function(){growl({error:"Could not delete this file."})}})}),$("body#projects_edit .NS-assets_form a.retry_upload").live("click",function(a){a.preventDefault();a=$(this).closest(".NS-assets_form");a.removeClass("has_file encoding");a.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel").trigger("resize")}),k.find("form.edit_project").live("submit",function(b){b.preventDefault();var d=$(this),g=k.find(".tools li.save"),h=k.find(".tools li.cancel"),j=$("#saving-layer");
f(function(){g.addClass("disabled").find("a").text("Saving...");h.addClass("disabled");j.show();$.ajax({type:d.attr("method"),url:d.attr("action"),dataType:"json",data:d.serialize(),global:!1,success:function(b){var f=g.closest(".tools"),h=$(b.panel);d.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy");d.replaceWith(h);window.FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(h[0])},v);b.errored?($("#steps-nav a.selected").removeClass("completed"),
d.trigger("shifted"),f.trigger("errored"),e(),a()):($("#steps-nav a.selected").removeClass("errored"),h.update_form_cache(),typeof current_user!=="undefined"&&h.find("#project_creator_name").length&&current_user.set("name",h.find("#project_creator_name").val()),f.find(".form-navigator").show(),f.find(".form-tools").hide(),k.find("#preview .project-content").html(b.content),b.launch&&$("#launch").html(b.launch),k.find("#preview #project-header").html(b.running_board),k.find("#project-card-preview").html(b.card),
k.find("#submission-sidebar-help").html(b.submission_sidebar),b.category?(k.find("#forms").attr("data-category_id",b.category.id),k.find("#category_name_guidelines").text(b.category.name)):k.find("#forms").attr("data-category_id",""),B(),c())},error:function(){d.trigger("ajax_error")},complete:function(a){g.removeClass("disabled").find("a").text("Save");h.removeClass("disabled");j.hide();d.trigger("ajax_complete",[a])}})})}),function(){var a=k.find(".tools"),c=a.find(".form-navigator"),d=a.find(".form-tools");
$("form.edit_project").live("change keyup cut paste input dirty wymeditor:doc_html_updated",function(a){$(a.target).is(".do_not_dirty")&&a.type!=="dirty"||(c.hide(),d.show())});d.find(".save a").click(function(a){a.preventDefault();$("#confirm-abandon").is(":visible")?b("Save","From Modal"):b("Save","From Toolbar");$(this).closest("li.save").is(".disabled")||s.find("form").submit()});d.find(".cancel a").click(function(c){c.preventDefault();f(function(){$("#confirm-abandon").is(":visible")?b("Discard",
"From Modal"):b("Discard","From Toolbar");s.find("form").restore_form();a.find(".form-navigator").show();a.find(".form-tools").hide()})})}(),function(){function a(c){var e;$.each(d,function(a){c.attr("id")===a&&(e=b.find(String(this)),e.text(c.val()))})}var b=k.find("#sidebar"),c=$("#the-basics-panel form"),d={project_name:".project-card h2 > strong > a",project_blurb:".project-card p"};$(window).bind("form_restored",function(c){c=$(c.target);var d=c.find(".field.location-search input.text").val();
c.closest("#the-basics-panel").length&&(c.find(":input").each(function(){a($(this))}),b.find("ul.project-meta > li > a > span.location-name").text(d))});c.find(":input").live("keyup input cut paste change",function(b){a($(b.target))});$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:select",function(a,c){b.find("ul.project-meta > li > a > span.location-name").text(c)});$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:unselect",
function(){b.find("ul.project-meta > li > a > span.location-name").text("")});c.find(".project-image").live("file_added",function(a,c){b.find(".project-thumbnail img").attr("src",c.image_src)})}(),function(){function a(b){$("#duration_duration, #duration_deadline").each(function(){var a=$(this),e=a.is(":checked");a.is("#duration_duration")?e&&(b||(d=!0,$("#project_duration").focus()),$.browser.msie?$("#project-duration-calendar").hide():$("#project-duration-calendar").slideUp(200),$("#project_deadline").val("")):
a.is("#duration_deadline")&&e&&($("#project_duration").val(""),$.browser.msie?$("#project-duration-calendar").show():$("#project-duration-calendar").slideDown(200),c&&$("#project-duration-calendar input.input-calendar-date").val(c._copy_date_with_time(c.selected_date,c.time).toString("yyyy-MM-dd HH:mm:ss")))})}var b=$("#the-basics-panel .funding-duration"),c,d=!1;$("#project-duration-calendar").find("div.calendar").livequery(function(){var b,d=$("#project-duration-calendar input.input-calendar-date");
$(this).bind("calendar_date_picker:date_selected",function(a,b){d.val(b.toString("yyyy-MM-dd HH:mm:ss"));d.trigger("change")});b=d.val()!==""?Date.parse(d.val()):(30).days().fromNow();c=$(this).calendar_date_picker({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:",selected_date:b}).data("calendar_date_picker");a(!0)});$("#project_duration").live("focus",function(){d?d=!1:($("#duration_duration").prop("checked",!0),a())});b.find("input.radio").live("change click",a);
b.find("em.rec").live("click",function(){$(this).closest("li").find("input.text").focus()})}(),k.find("#project-edit-nav-wrap").sticky_bar({parent:$("body"),lock_to_bottom:!1}),$(".panel label.primary.help").live("click",function(){var a=$(this).closest(".grey-field").find(".field-help-2"),c=$.trim($(this).text());a.is(":visible")?(a.slideUp(300,"easeOutQuad",function(){$(this).trigger("shifted")}),b("Help Icon Collapse",c)):(a.slideDown(300,"easeOutQuad",function(){$(this).trigger("shifted")}),b("Help Icon Expand",
c))}),function(){function a(b){var d=b.siblings(".warning");(b=c.exec(b.val()))?(d.html('<p class="first">Reward warning: <span class="bad_word">'+b[0]+'</span></p><p>Please make sure you are not offering raffles, discounts, coupons, cash-value gift cards, alcohol, financial returns, or investments. What else is prohibited? See our <a class="link_to_prohibited_projects_dialog" href="#">list of prohibited items and subject matter</a>.</p>'),d.slideDown()):d.slideUp();d.trigger("shifted")}var b=$(".fields.rewards",
k),c=/(?:(%)|\b(raffle|raffled|raffling|coupon|coupons|discount|discounts|discounted|reduced|percent|investor|investors|investment|invested|investments|investing|stake|stakes|sweepstake|sweepstakes|financial|equity|lottery|lotteries|gift certificate|gift card|wine|beer|alcohol|champagne|cocktail)\b)/i;$("textarea",b[0]).each(function(){a($(this))});$(".fields.rewards textarea").live("keyup paste cut",function(){a($(this))})}(),j=$($("#faq-template").html()),q=function(){$(this).closest("ul").find("> li:not(.deleted)").each(function(a,
b){$(b).find("input.position").val(a+1)})},$(".link_to_new_question").live("click",function(){var a=j.clone(!0,!0),b=(new Date).getTime();a.find("input,textarea,select").each(function(a,c){c.disabled=!1;c.id=c.id.replace(/new_project_faq/,b);c.name=c.name.replace(/new_project_faq/,b)});a.appendTo("#project-faqs > ul").find(".question input").trigger("focus");q.call(a);return!1}),$(".faq .delete",k).live("click",function(){var a=$(this).closest("li.faq");a.addClass("deleted").find("input.position").val("").andSelf().find("input.delete").val("1");
q.call(a);a.fadeOut("slow");return!1}),$("#project-faqs > ul",k).sortable({containment:"#projects_edit",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"> li.faq",start:function(a,b){$(".project-faq-placeholder").css("height",b.item.height()+"px");$(document.body).addClass("disable_text_selection");b.item.addClass("reordering")},stop:function(a,b){b.item.removeClass("reordering");$(document.body).removeClass("disable_text_selection")},update:q}),function(){function a(b,
d){d=d||1;!f&&d<=100&&(f=!0,d+=1,setTimeout(function(){$.get("/profile/phone_number/poll_verification",{call_token:b,country:t},function(e){f=!1;e.html!==void 0?($("#phone_fields").html(e.html),c()):a(b,d)})},2E3))}function b(){$("#phone_fields .verification_error",k).html("").addClass("hide");$(".field_with_errors",k).children().unwrap()}function d(c){if(c.type==="keypress"&&c.which!==13)return!0;var e=$("#phone_fields",k).find("input.radio[name=verify]:checked").val(),f=$("#phone_number",k),g=$("#phone_fields",
k);if(e!=="sms"&&e!=="call")return!1;$.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:e,number:f.val(),country:t},success:function(c){b();c.error!==void 0?(f.wrap('<div class="field_with_errors" />').focus(),g.find(".phone_section .verification_error").html(c.error).removeClass("hide").trigger("shifted")):(e==="call"?(g.find(".verify-phone strong").html(c.call_token),a(c.call_token)):g.find(".sms_token").val(""),g.find(".highlight strong").html(c.number+
".").andSelf().find(".phone_section, .options_section").addClass("hide").andSelf().find(e==="sms"?".sms_section":".call_section").removeClass("hide").trigger("shifted"))},beforeSend:function(){g.addClass("loading").trigger("shifted")},complete:function(){g.removeClass("loading").trigger("shifted")}});return!1}function e(a){if(a.type==="keypress"&&a.which!==13)return!0;var d=$("#phone_fields"),f=d.find("#sms_token");$.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{sms_token:f.val(),
country:t},success:function(a){b();a.error!==void 0?(f.wrap('<div class="field_with_errors" />').focus(),d.find(".sms_section .verification_error").html(a.error).removeClass("hide").trigger("shifted")):a.html!==void 0&&(d.replaceWith(a.html),c())},beforeSend:function(){d.addClass("loading")},complete:function(){d.removeClass("loading")}});return!1}var f=!1;$("#phone_fields .cancel",k).live("click",function(){$("#phone_fields").find(".call_section, .sms_section").addClass("hide").andSelf().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")});
$("#send_verification, #resend_call_token, #resend_sms_token").live("click",d);$("#phone_fields #phone_number").live("keypress",d);$("#phone_fields #verify_sms_code").live("click",e);$("#phone_fields #sms_token").live("keypress",e);$("#phone_fields #change_number").live("click",function(){$.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(a){a.html!==void 0&&$("#phone_fields").replaceWith(a.html)}});return!1})}(),$("ol.verification_steps a.continue").live("click",
function(a){a.preventDefault();var d=$("ol.verification_steps li.verify"),e=$(this),f=e.text();d.hasClass("loading")||(b("Amazon Verification Status Check",e.text()),$.ajax({type:"get",url:e.attr("href")+".json",dataType:"json",success:function(a){switch(a.amazon_kyc){case "":case "pending_user_action":case "invalid_account_state":d.find(".pending_user_action_msg .same_status").slideDown();break;case "pending_review":!d.hasClass("pending_user_action")&&!d.hasClass("invalid_account_state")&&d.find(".pending_review_msg .same_status").slideDown();
break;case "active":$("#account-setup-panel").find(".flash-error").remove(),d.closest(".grey-field").removeClass("error"),d.closest(".verification_steps").removeClass("needs_verification")}d.hasClass(a.amazon_kyc)||b("Amazon Verification Post-check Status Transition","From: "+d.attr("class")+" To: "+a.amazon_kyc);d.removeClass("active closed pending_user_action pending_review invalid_account_state no_status").addClass(a.amazon_kyc).trigger("shifted");c()},beforeSend:function(){d.addClass("loading");
e.html("Verifying...")},complete:function(){d.removeClass("loading");e.html(f)}}))}),$("form#bank_account_form").live("submit",function(a){var b=$("#bank_account_container",k),c=$("#bank_errors",k),d=$("#iban",k),e=$(this),f=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();d.val()===""?c.html("IBAN is required.").removeClass("hide"):(e.after(f),$.ajax({type:"post",url:e.attr("action"),dataType:"json",data:{iban:d.val()},success:function(a){a.error!==
void 0?(d.wrap('<div class="field_with_errors" />').focus(),c.html(a.error).removeClass("hide")):b.closest("#account-setup-panel").html(a.data)},beforeSend:function(){b.addClass("loading")},complete:function(){b.removeClass("loading");f.remove()}}))}),$("form#company_form").live("submit",function(a){var b=$("#company_form",k).find("input.radio[name=type]:checked").val(),c=$("#company_form",k),d=$("#business_id",k),e=$("#beneficiary_container",k),f=$("#beneficiary_errors",k),g=$('<div class="spinner" />').spin({lines:8,
length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();b!=="individual"&&b!=="business"||(b==="business"&&d.val()===""?f.html("Please enter a Companies House Number.").removeClass("hide"):(c.after(g),$.ajax({type:"post",url:c.attr("action"),dataType:"json",data:{type:b,business_id:d.val()},success:function(a){a.error!==void 0?(d.wrap('<div class="field_with_errors" />').focus(),f.html(a.error).removeClass("hide")):e.closest("#account-setup-panel").html(a.data)},beforeSend:function(){e.addClass("loading")},
complete:function(){e.removeClass("loading");g.remove()}})))}),$("li.reward .summary",k).livequery(function(){$(this).show().siblings(".backer_rewards_fields").hide()}),$("li.reward .limit_label input[type=checkbox]",k).live("change click",function(){var a=$(this),b=a.parent("label").siblings("input.text");a.is(":checked")?b.closest(".limit").addClass("limit_set").end().focus():b.closest(".limit").removeClass("limit_set").end().val("")}),$("li.reward .sold_out_label",k).live("click",function(a){a.preventDefault();
a=$(this).siblings(".sold_out_checkbox");var c=$(this).parent(".limit"),d=c.find("input.text"),e=c.find(".limit_checkbox");a.is(":checked")?(a.prop("checked",!1),e.prop("checked",!1),d.val("").removeAttr("disabled"),c.removeClass("marked_sold_out limit_set"),b("Sold out unmarked","")):(a.prop("checked",!0),d.attr("disabled","disabled"),c.addClass("marked_sold_out"),b("Sold out marked",""));$(this).trigger("dirty")}),$("li.reward .summary .edit",k).live("click",function(){$(this).parents(".summary").hide().siblings(".fields").show().trigger("shifted");
b("Edit Reward","")}),$("li.reward",k).live("nested_attributes_list:added",function(){$(this).trigger("shifted").trigger("dirty")}),$("li.reward",k).live("nested_attributes_list:removed",function(){$(this).trigger("shifted").trigger("dirty")}),$("li.reward .shipping select",k).live("change",function(){var a=$(this).val(),b=$(this).closest(".shipping").find(".shipping_amount");a==="international"?(b.removeClass("hidden"),b.find("input.text")):(b.addClass("hidden").removeClass("cost_added"),b.find("input.text").val(window.formatters.currency_symbol(current_project.get("currency"))+
"0"),b.find(".add_cost_checkbox").prop("checked",!1))}),$("li.reward .shipping_amount input[type=checkbox]",k).live("change click",function(){var a=$(this),b=$(this).closest(".shipping_amount"),c=b.find("input.text");a.is(":checked")?b.addClass("cost_added"):(c.val(window.formatters.currency_symbol(current_project.get("currency"))+"0"),b.removeClass("cost_added"))}),function(){function a(){$("ol.rewards > li:visible",k).each(function(a,b){$(b).find("span.reward_num").html(a+1)})}$("ol.rewards",k).livequery(a);
$("li.reward",k).live("nested_attributes_list:added",a);$("li.reward",k).live("nested_attributes_list:removed",a)}(),$("body#projects_edit #preview a#enable_sharing").live("click",function(a){var c=$(this);a.preventDefault();b("Share Link Click","Enable Share Link");h(c)}),$("body#projects_edit #preview a#disable_sharing").live("click",function(a){var c=$(this);a.preventDefault();b("Share Link Click","Disable Share Link");h(c)}),$("body#projects_edit #preview #sharing_enabled .url").live("click",
function(a){this.focus();this.select();a.preventDefault();b("Share Link Click","Select Share Link")}),$("body#projects_edit #preview #running-board-wrap, body#projects_edit #preview .project-content").live("click",function(a){a=$(a.target);b("Project Preview Click",$.trim(a.text()).substring(0,100))}),$("body#projects_edit #sidebar .project-card-wrap").live("click",function(a){a.preventDefault();b("Baseball Card Preview Click",$.trim($(a.target).text()))}),$("body#projects_edit .faq-question a").live("click",
function(){$(this).closest(".faq").toggleClass("expanded");return!1}),$.support.localStorage&&(localStorage.banner_amz_setup_hide||$("#amz_banner").removeClass("hidden"),$("#amz_banner .dismiss").click(function(a){a.preventDefault();try{localStorage.banner_amz_setup_hide=!0}catch(c){}$("#amz_banner").fadeOut(function(){$("#amz_banner").addClass("hidden")});b("Dismiss Amazon verification banner","")})))});
$(function(){var a=$("#projects_guidelines"),d=$("#project-edit-nav",a),c=$("#continue input[type=checkbox]",a),b=$("#continue a.start",a);a.length&&($(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),d.find("#steps-nav .first a").addClass("selected"),d.find("a").click(function(a){a.preventDefault()}),c.bind("change",function(){$(this).is(":checked")?$(this).siblings("label").addClass("selected").removeClass("unselected"):$(this).siblings("label").addClass("unselected").removeClass("selected");
c.not(":checked").length===0?b.removeClass("disabled"):b.addClass("disabled")}),b.bind("click",function(){return c.not(":checked").length===0?($("#saving-layer").show(),!0):(typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Guidelines","Disabled Continue Click",""),!1)}))});
$(function(){function a(){b=setInterval(function(){$.ajax({url:g,global:!1,dataType:"json",success:function(a){a=a.backer_report;"state"in a&&(a.state==="completed"?(clearInterval(b),e.find(".progress .bar").width("100%"),e.find(".progress .legend").html("100%"),a=URI().removeQuery("failed"),window.location.replace(a.href())):a.state==="failed"?(clearInterval(b),a=URI().addQuery("failed",!0),window.location.replace(a.href())):typeof a.percent!=="undefined"&&(e.find(".progress .bar").width(a.percent+
"%"),e.find(".progress .legend").html(a.percent+"%")))}})},1E3)}function d(){e.find(".progress .bar").width("0%");e.find(".progress .legend").html("0%");e.removeClass("completed").addClass("processing");$.ajax({type:"post",url:f,data:"new=true",dataType:"json",success:function(b){e.find("#processing_report_disabled").replaceWith(b.data);g=e.find("#processing_report_disabled").attr("data-poll_url");a()}})}var c=$("#projects_rewards"),b=null,e=$(".generate-reports",c),f=e.find("#create_backer_report_link").attr("data-project_backer_report_path"),
g=e.find("#processing_report_disabled").attr("data-poll_url");c.length&&(function(a){a.find("a.disabled").bind("click",function(a){a.preventDefault()})}(c),$("#create_backer_report_link").live("click",function(a){a.preventDefault();mixpanel.track("Clicked Generate All Backer Reports");d()}),$("#download_notice_dialog .generate a").live("click",function(a){a.preventDefault();$("#download_notice_dialog").trigger("close");d()}),$("#download_notice_dialog .continue a").live("click",function(){$("#download_notice_dialog").trigger("close")}),
e.hasClass("processing")&&a())});
$(function(){var a=$("#projects_show"),d=0,c=$(".friend_namepile");a.length&&($("#verifying-pledge.modal_dialog .remote_modal_dialog",a).click(function(){$(this).parents("div#verifying-pledge").trigger("close.modal_dialog")}),c.length>0&&(d=parseInt(c.attr("data-friend-count"),10)),mixpanel.track("Project Page",{page_type:"Project",project_name:$.trim($("#title").text()),project_state:$("#about").attr("data-project-state"),project_pid:$("h1#name").attr("data-project-pid"),project_category:$.trim($("#project-metadata .category").text()),
project_parent_category:$("#project-metadata .category").attr("data-project-parent-category"),project_location:$.trim($("#project-metadata .location").text()),project_backers_count:parseInt($("#backers_count").attr("data-backers-count"),10),project_pledged:parseInt($("#pledged").attr("data-pledged"),10),project_percent_raised:parseFloat($("#pledged").attr("data-percent-raised")),project_duration:parseFloat($("#project_duration_data").attr("data-duration")),project_hours_remaining:parseFloat($("#project_duration_data").attr("data-hours-remaining")),
project_reward_count:parseInt($("#what-you-get").attr("data-reward-count"),10),project_update_count:parseInt($("#updates_count").attr("data-updates-count"),10),project_comments_count:parseInt($("#comments_count").attr("data-comments-count"),10),project_has_video:$("#video-section").attr("data-has-video")==="true",project_country:window.current_project.get().country,ref_tag:$("#pledged").attr("data-ref-tag"),user_is_backer:$("#subtitle .backing").length>0,user_is_project_creator:$("#creator_admin_bar").attr("data-is-creator")===
"true",user_saw_friends:d>0,user_friends_seen:d}),location.hash&&setTimeout(function(){$(location.hash).find(".faq-question a").click()},500),$("#subtitle .creator").click(function(){mixpanel.track("Creator Bio Modal",{page_type:"Project",source:"Subtitle"})}),$("#creator-details .more").click(function(){mixpanel.track("Creator Bio Modal",{page_type:"Project",source:"Details Box"})}),$(".modal_dialog:visible li.pledge_field input.text").livequery(function(){mixpanel.track("Reward Checkout Modal",
{page_type:"Project",reward_value:parseInt($(this).attr("value"),10),shipping_applicable:$(this).closest("form.NS_pledges__form").find(".reward.visible").data("shipping_applicable"),pledge_context:$("body").attr("id"),project_country:current_project.data.country});$(".text#backing_amount").blur(function(){var a=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);mixpanel.track("Modified Pledge Amount",{pledge_tier_amount:void 0,pledge_input_amount:parseInt(a,10)})});typeof pageTracker!==
"undefined"&&pageTracker._trackEvent("Project Show","Reward Checkout Modal Open")}),a.bind("modal_dialog:opened",function(){$("video").length&&window.Touch&&($("#video-section",a).css("visibility","hidden"),$("video")[0].pause())}),a.bind("close.modal_dialog",function(){$("#video-section",a).css("visibility","visible")}))});
$(function(){var a=$("#projects_start"),d=$("#sidebar .player_controls"),c=!1;a.length&&($("#sidebar .project-image",a).spriteshow({index_control:$("#project-dots ol"),controls:d,effect:"fade",should_autoadvance_callback:function(){return!c},play_delay:5E3}),$("#sidebar").bind("spriteshow:index",function(a,c){var d=$("#sidebar ul.data > li.project"),g=d.filter(".selected"),h=d.filter("#project-"+c);g[0]!==h[0]&&(g.fadeOut(),h.show(),d.removeClass("selected"),h.addClass("selected"))}),$("#sidebar").hover(function(){d.stop(!0,
!0).fadeIn();c=!0},function(){d.stop(!0,!0).fadeOut();c=!1}),$("#started_projects a").click(function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Proposal/Project Start","Started Project Click","")}),$("#started_projects").length&&typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Proposal/Project Start","Has Started Projects",$("#started_projects li").length.toString()))});
$(function(){var a=$(".refund_checkouts_form");a.length&&(a.find("select#refund_checkout_amount").live("change",function(){var a=$(this),c=a.closest("li").find(".refund_amount_wrapper"),b=c.find("input#refund_checkout_amount"),e=!1;a.val()===""?(c.addClass("partial"),e=!0):c.removeClass("partial");b.prop("disabled",!b.is(":visible"));e&&b.focus()}).trigger("change"),$.inArray($("input#refund_checkout_amount").val(),[$("select#refund_checkout_amount").val(),""])===-1&&a.find("select#refund_checkout_amount").val("").trigger("change"))});
$(function(){var a=$("#stored_card_form"),d=a.find(".selected input.card_toggle");a.length&&(d.length||(d=$("input.card_toggle:first")),$("input.card_toggle").live("change click",function(a){a.preventDefault();var b=$(this);$("input.card_toggle").not(b).closest(".payment_option").removeClass("selected");b.closest(".payment_option").addClass("selected");a.preventDefault()}),d.prop("checked",!0).trigger("change"))});
$(function(){var a=$("body.refund_checkouts_new_card #credit_card_form form"),d=$("#saving-layer");$("body").append(d);a.live("submit",function(){d.show();setTimeout(function(){d.find(".modal_dialog_body").html("<h3>Well, this is embarrassing.</h3><p>Processing your pledge is taking longer than usual. If you'd like, you can refresh and try again.</p><p>Not to worry: you can only back a project once, so you will never be double-charged.</p>");d.removeClass("spinning")},12E4)})});
$(function(){function a(a){c.find("li").removeClass("current");c.find("li[data='"+a+"']").addClass("current")}var d=$("#school_index"),c=$(".help-kickstarter_school"),b=!1;d.length&&(c.find("a").bind("click",function(){var c=$(this).parent("li").attr("data");b=!0;a(c);$.scrollTo("#"+c,800,{easing:"easeOutExpo",onAfter:function(){b=!1}})}),$("#main .section").waypoint(function(){if(!b)a($(this).attr("id")),window.location.hash=$(this).attr("id")}))});
$(function(){var a=$("body.help"),d=$("#sidebar",a),c=$("#search",a);a.length&&(c.hover(function(){$(this).addClass("hover")},function(){c.removeClass("hover")}),d.sticky_bar({parent:d.closest("#content")}),$(".submit").click(function(){$("#content-wrap form.search").submit()}))});
$(function(){function a(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Homepage Events",a,b)}function d(a,b){g.scrollTo(a,b,{axis:"y",easing:"easeOutExpo"});g.find("object.ksr_player").each(function(){jwplayer(this).stop()});g.find("video").hide();a.find("video").show();$("#categories .nav li").removeClass("selected").eq(a.index()).addClass("selected");g.children().removeClass("selected").eq(a.index()).addClass("selected")}function c(a,b){a.urls.web.project=a.urls.web.project+"?ref="+
b;return $('<div class="project">'+render("projects/_baseball_card_tall",a)+"</div>")}function b(a,b){var d=c(a,b);if(!d.length)return d;d.find(".friend_project_context").remove();d.append($("<div />",{"class":"friend_project_context"}).append($("<div />",{"class":"friend_facepile"})).append($("<p />",{"class":"friend_namepile"})));try{return $.each(a.friends,function(b){b<2&&(d.find(".friend_facepile").append($("<a />",{href:this.urls.web.user,"class":"avatar_link"}).append($("<img/>",{alt:this.name,
"class":"avatar_img",height:"40",width:"40",src:this.avatar.thumb}))),d.find(".friend_namepile").append($("<a />",{href:this.urls.web.user}).text(this.name)),b===0&&a.friends.length===2?d.find(".friend_namepile").append(" and "):b<a.friends.length-1&&d.find(".friend_namepile").append(", "))}),a.friends.length>2?d.find(".friend_namepile").append("and ").append($("<a/>",{href:a.urls.web.project+"#modal_dialog:more_friend_backers_"+a.id}).text(a.friends.length-2+" more ")).append(" "+(a.friends.length===
3?"person":"people")+" you follow "+(a.friends.length===3?"is a backer":"are backers")+"."):d.find(".friend_namepile").append(a.friends.length===1?" is a backer.":" are backers."),d}catch(e){return $.console.log(e),$([])}}var e=$("body#site_index"),f,g,h,k,j=$([]),q=$("body").is(".mobile");e.length&&(f=new ProjectTimer($("#video-player .video-details .time-left")[0],window.ksr_page_clock),g=$("#project-slide"),h=$("#running-board-wrap").height(),k=$("#notifications").height(),$("#project-grid div, #video-player .video-details").hover(function(){$(this).addClass("hover")},
function(){$(this).removeClass("hover")}),$("#project-grid div.project").click(function(){$("#project-grid").css("display")!=="none"&&a("Project Grid","Click");var b=$(this),c=$(this).data("expand_path"),d=$("#running-board-wrap #video-player"),e=d.find(".video-details"),h=$("#content-wrap").height()+$("#bottom-area").height()+$("#mega-footer-wrap").height()+$("#footer-wrap").height();g.find("object.ksr_player").each(function(){jwplayer(this).stop()});$("#project-grid, #hero").fadeOut("fast");d.addClass("loading");
d.removeClass("error");d.find(".video").html("");$.ajax({url:c,type:"get",dataType:"jsonp",success:function(a){a.currency_symbol=window.formatters.currency_symbol(a.currency);e.find("h3 a").text(a.name);e.find("h3 a").attr("href",a.urls.web.project+"?ref=home_leanback");e.find(".creator span").text(a.creator.name);e.children(".editorial").text(a.blurb);e.find(".location .text").text(a.location.name);e.children(".location").attr("href",a.location.urls.web.discover+"?ref=home_leanback");e.find(".category .text").text(a.category.name);
e.children(".category").attr("href",a.category.urls.web.discover+"?ref=home_leanback");e.find(".percent-funded .num").text(Math.round(a.pledged/a.goal*100)+"%");e.find(".total-pledged .num").text(a.currency_symbol+window.formatters.format_number(a.pledged,0));e.find(".time-left").attr("data-end_time",a.deadline*1E3);f.attach();e.children(".explore").attr("href",a.urls.web.project+"?ref=home_leanback");j=b;a.video?function(){var b=$("<img>").attr({src:a.video.frame,width:560,height:420}),c=$("<video>").attr({width:"560px",
height:"420px",controls:"true",src:a.video.high||a.video.base,poster:a.video.frame}).append(b);b=$("<div>").attr({"class":"video-player autoplay","data-video":a.video.high||a.video.base,"data-video-tracker-url":a.urls.web.project+"/video/plays","data-image":a.video.frame,"data-video_tag_markup":c.wrap("div").parent().html().replace(/"/g,"'")}).append(b);d.find(".video").html(b)}():d.find(".video").html('<img src="'+a.photo.full+'">')},error:function(){d.addClass("error")},complete:function(){d.removeClass("loading");
d.children(".container, #overlay-close").fadeIn()}});$("#notifications").animate({opacity:"0",height:"0px"});$("#about-kickstarter-overlay").fadeIn();$("#running-board-wrap, #video-player").animate({height:"520px"},400);$("#content-wrap-overlay").fadeIn();$("#content-wrap-overlay").height(h);$(".NS_layouts__admin_navigation").length&&$("#content-wrap-overlay").css({top:"611px"})}),$("#running-board-wrap #video-player").find("a.next, a.previous").live("click",function(b){b.preventDefault();$(this).is(".next")?
(a("Project Grid","Next"),b=j.next(),b.length||(b=j.closest(".grid").children(":first"))):(a("Project Grid","Previous"),b=j.prev(),b.length||(b=j.closest(".grid").children(":last")));b.click()}),$("#overlay-close, #content-wrap-overlay").click(function(){a("Project Grid","Close");$("#running-board-wrap #video-player .container").is(":visible")&&($("#content-wrap-overlay").fadeOut(),$("#running-board-wrap, #video-player").animate({height:h},300,function(){$("#project-grid, #hero").fadeIn();$("#about-kickstarter-overlay").fadeOut();
$("#running-board-wrap #video-player .video").html("");$("#notifications").animate({opacity:"1.0",height:k})}))}),$("#categories .nav li a.link").click(function(b){a("Category select",$(this).text());$.browser.msie&&$.browser.version<8||(d(g.find(".project").eq($(this).parent().index()),350),b.preventDefault())}),$.browser.msie&&$.browser.version<8||(g.find(".project").show(),d(g.find(".project.potd"),0)),function(){function b(){d.find(".next, .previous").addClass("disabled").removeClass("enabled");
(f===-1||e<f)&&d.find(".next").removeClass("disabled").addClass("enabled");e!==0&&d.find(".previous").removeClass("disabled").addClass("enabled");d.find(".slider").trigger("goto",[e*4])}var d=$("#location-projects"),e=0,f=-1,g=d.data("infinite_url");d.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});d.bind("infinite_carousel:last_page",function(){g&&$.ajax({url:g,type:"get",dataType:"jsonp",success:function(a){var e=
d.find(".project-list");(g=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1);$.each(a.projects,function(){var a=this,b=!0;e.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_location"))return b=!1});b&&e.append(c(a,"home_location"))});b()}})});d.find(".previous:not(.disabled)").live("click",function(){a("Location Module","Previous");e-=1;b()});d.find(".next:not(.disabled)").live("click",function(){a("Location Module","Next");e+=1;b()});b();$("#set-location").livequery(function(){var a=
$(this);a.livesearch_pretty_input_dropdown({ignore_history:!0});a.bind("livesearch:selected",function(h,j){var k=$("#location-projects .slider");g=j[3];a.trigger("livesearch:close_results");d.find(".slider").trigger("goto",[0]);e=0;b();$("#set-location").fadeOut(function(){$("#your-location").fadeIn()});k.addClass("loading");$.ajax({type:"get",dataType:"jsonp",url:g,success:function(a){var b=d.find(".project-list");b.empty();a.projects.length?(b.parent().removeClass("empty"),$.each(a.projects,function(){b.append(c(this,
"home_location"))}),(g=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1)):b.parent().addClass("empty");a.projects.length<5&&d.find(".next, .previous").addClass("disabled").removeClass("enabled");$("#location-projects .title-card h2").attr("class",a.location.country.toLowerCase()+" "+a.location.state.toLowerCase());d.find("h2 a.location-name").text(a.location.name).attr("href",a.location.urls.web.discover+"?ref=home_popular");$("#location-projects .title-card .see-all a").attr("href",
a.location.urls.web.discover+"?ref=home_popular")},error:function(){growl({error:"Could not find that location?"})},complete:function(){k.removeClass("loading")}})})});$("#location-projects .not-here").click(function(b){a("Location Module","Change city");$("#set-location").fadeIn();$("#set-location input.input-search").focus();$("#location-projects").css({overflow:"visible"});q&&$("#project-slide li:not(.selected) video").fadeOut();b.preventDefault()});$("#set-location input.input-search").blur(function(){$("#set-location").fadeOut();
$("#location-projects .not-here").fadeIn();$("#location-projects").css({overflow:"hidden"});q&&$("#project-slide .project-video video").fadeIn()})}(),$("#trending-projects").each(function(){function b(){d.find(".next, .previous").addClass("disabled").removeClass("enabled");(f===-1||e<f)&&d.find(".next").removeClass("disabled").addClass("enabled");e!==0&&d.find(".previous").removeClass("disabled").addClass("enabled");d.find(".slider").trigger("goto",[e*4])}var d=$(this),e=0,f=-1,g=d.data("infinite_url");
d.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});d.bind("infinite_carousel:last_page",function(){g&&$.ajax({url:g,type:"get",dataType:"jsonp",success:function(a){var e=d.find(".project-list"),h=shuffle(a.projects);(g=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1);$.each(h,function(){var a=this,b=!0;e.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_popular"))return b=
!1});b&&e.append(c(a,"home_popular"))});b()}})});d.find(".previous:not(.disabled)").live("click",function(){a("Popular Module","Previous");e-=1;b()});d.find(".next:not(.disabled)").live("click",function(){a("Popular Module","Next");e+=1;b()});b()}),$("#social-projects .slider").each(function(){function c(){e.find(".next, .previous").addClass("disabled").removeClass("enabled");(h===-1||g<h)&&e.find(".next").removeClass("disabled").addClass("enabled");g!==0&&e.find(".previous").removeClass("disabled").addClass("enabled");
e.find(".slider").trigger("goto",[g*4])}function d(a){f&&$.ajax({url:f.indexOf("?")===-1?f+"?"+("oauth_token="+window.api_oauth_token):f+"&"+("oauth_token="+window.api_oauth_token),type:"get",dataType:"jsonp",success:function(d){var g=e.find(".project-list");(f=d.urls.api.more_projects)||(h=Math.ceil(d.projects.length/4)-1);e.find(".slider").removeClass("loading");a&&!d.projects.length&&(e.find(".slider").addClass("no-projects"),e.find(".next, .previous").addClass("disabled").removeClass("enabled"));
$.each(d.projects,function(){var a=this,c=!0;g.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_location"))return c=!1});c&&g.append(b(a,"home_social"))});c()}})}var e=$(this).closest("#social-projects"),f=e.data("infinite_url"),g=0,h=-1,j=!1;e.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});e.bind("infinite_carousel:last_page",d);$(window).bind("scroll",function(){!j&&
window.scrollY+$(window).height()*1.5>e.offset().top&&(a("Social Module","Load"),d(!0),j=!0,e.find("p.no-content").hide(),e.find(".slider").show())});e.find(".previous").bind("click",function(){a("Social Module","Previous");$(this).is(".disabled")||(g-=1,c())});e.find(".next").bind("click",function(){a("Social Module","Next");$(this).is(".disabled")||(g+=1,c())});c()}),$("#curated-pages .slider").each(function(){function b(){c.find(".next, .previous").addClass("disabled").removeClass("enabled");d<
Math.ceil(e/8)-1&&c.find(".next").removeClass("disabled").addClass("enabled");d!==0&&c.find(".previous").removeClass("disabled").addClass("enabled")}var c=$(this).closest("#curated-pages"),d=0,e=$("#curated-pages .project-list li").size();c.serialScroll({target:".slider",items:"li",axis:"x",duration:500,force:!0,lazy:!0,easing:"easeOutExpo",cycle:!1,step:8});c.find(".previous").bind("click",function(){a("Curated Module","Previous");$(this).is(".disabled")||(c.find(".slider").trigger("prev"),d-=1,
b())});c.find(".next").bind("click",function(){a("Curated Module","Next");$(this).is(".disabled")||(c.find(".slider").trigger("next"),d+=1,b())});b()}),$(".facebook_connect_wrap .big").click(function(){a("Social Module","Facebook connect")}),$(".project-image .video-player").click(function(){$(this).parent().siblings(".project-badge").fadeOut("slow")}),$("#location-projects").length||$("#content-wrap").addClass("no-location"))});
$(function(){function a(){$(document).width()<1600?$(".video video, .video img").css({height:650,width:"auto"}):$(".video video, .video img").css({height:"auto",width:$(document).width()})}$("#jobs_index, .NS_jobs__why_work_at_kickstarter").length&&($("#openings_small .button").live("click",function(){$.scrollTo($($(this).attr("href")),{duration:2E3,easing:"easeOutExpo"})}),$(document).scroll(function(){$(window).scrollTop()>660?$("#hero video")[0].pause():$("#hero video")[0].play()}),$(window).resize(function(){a()}),
a())});
$(function(){function a(){$(".NS-site_leanback").length||(c=$('<div class="NS-site_leanback loading"></div>'),$("body").prepend(c),c.height($(window).height()),$.ajax({url:"/leanback",type:"get",dataType:"json",success:function(a){c.removeClass("loading");d(_.shuffle(a))},error:function(){c.remove()}}))}function d(a){function d(){return c.find("video").get(0)}function f(){return c.find(".title_card")}function g(){D=d().paused;s();$("#leanback_intro_overlay").fadeIn()}function h(a){var b=$("#leanback_intro_overlay");if(b.is(":visible"))b.fadeOut(),
a&&q(),localStorage.leanback_seen_intro="true"}function k(){d().paused||(f().fadeOut(),c.find(".controls").fadeOut())}function j(){z&&clearTimeout(z);z=setTimeout(function(){k()},3E3);f().is(":hidden")&&(f().fadeIn(),c.find(".controls").fadeIn())}function q(a){l&&$(d()).parent().show();d().play();a||k();$("#play_button").removeClass("play").addClass("pause");mixpanel.track("Leanback Play",mixpanel_project(current_project))}function s(){d().pause();j();$("#play_button").removeClass("pause").addClass("play");
mixpanel.track("Leanback Pause",mixpanel_project(current_project))}function u(){d().paused?q():s()}function t(){var a=$("#main_content"),b=$("body").is("#projects_show");b||$("body").attr({id:"projects_show",className:"project projects"});$.ajax({url:URI().suffix("json").toString(),dataType:b?"json":"html",type:"get",success:function(c){b?($(".NS-project_-running_board").replaceWith(c.running_board),$(".NS-projects-content").replaceWith(c.content)):a.length&&a.replaceWith(c)}})}function v(){$(d()).bind("ended",
function(){n(!0)})}function B(f,h){var k,n=(k=d())?k.paused:!1;Project.find(f.id)&&(f=Project.find(f.id).get());$(d()).remove();$("#video-section .video-player").remove();c.html(render("projects/_leanback",_.extend(f,{not_mobile:!l,logged_in:typeof current_user!=="undefined"})));k=$(d());$("#video-section .video-player").trigger("ksr_video:pause");k.parent().addClass("leanback_loading").bind("load",function(){$(this).removeClass("leanback_loading")});v();window.current_project=new Project(f);p();
url_equals(document.location.toString(),f.urls.web.project,{ignore_query:!0})||(J=!0,history.pushState(f,f.name,f.urls.web.project));t();document.title=f.name+" by "+f.creator.name;E===0&&$("a.prev_project").hide();E===a.length-1&&$("a.next_project").hide();j();localStorage.leanback_seen_intro||g();l?k.parent().hide():(h||localStorage.leanback_seen_intro&&!n)&&q(!0)}function o(){E!==0&&(E-=1,B(a[E]),mixpanel.track("Leanback Previous",mixpanel_project(a[E])))}function n(c){E<a.length-1&&(E+=1,B(a[E],
c),mixpanel.track("Leanback Next",mixpanel_project(a[E])))}function p(){c.show();$("body").css("overflow","hidden").height($(window).height());$.scrollTo(0,500,{easing:"easeOutExpo"});mixpanel.track("Leanback Up",mixpanel_project(current_project));var a=$("#video-section .video-player"),b,f;a.length?(b=a.data("ksr_video"),f=b.current_position(),b=b.playing()):f=0;if(f)d().currentTime=f;a.trigger("ksr_video:pause");b&&q()}function A(){$("body").css("overflow","visible").height("auto");$.scrollTo($("#running-board-wrap").offset().top,
500,{easing:"easeOutExpo",onAfter:function(){c.hide();$.scrollTo($("#running-board-wrap").offset().top)}});mixpanel.track("Leanback Down",mixpanel_project(current_project));$("#video-section .video-player").trigger("ksr_video:seek",[d().currentTime,d().paused]);d().pause()}if(a.length||current_project){var z,l=$("body.mobile").length,E=0,D=!1,M=document.location.toString(),J=!1;localStorage.leanback_seen="true";var K={x:0,y:0};c.bind("mousemove",function(a){a={x:a.pageX,y:a.pageY};Math.abs(a.x-K.x)+
Math.abs(a.y-K.y)>20&&(j(),K=a)});$(window).bind("keydown",function(a){var b={UP:38,DOWN:40,LEFT:37,RIGHT:39,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,SPACE:32,BACKSPACE:8};switch(a.keyCode){case b.SPACE:c.is(":visible")&&(h(),u(),a.preventDefault());break;case b.LEFT:c.is(":visible")&&(o(),a.preventDefault());break;case b.RIGHT:c.is(":visible")&&(h(!0),n(),a.preventDefault());break;case b.UP:!c.is(":visible")&&!$(a.target).is(":input")&&window.scrollY<$("#running-board-wrap").offset().top+
10&&(p(),a.preventDefault());break;case b.DOWN:c.is(":visible")&&(A(),a.preventDefault());break;case b.ESC:window.location=M}});$("a.prev_project").live("click",function(a){o();a.preventDefault()});$("a.next_project").live("click",function(a){n();a.preventDefault()});$(".remind a").live("click",function(a){var b=!!$(this).closest(".follow").length;current_project.set("is_starred",b);mixpanel.track("Leanback Starred",mixpanel_project(current_project));$.ajax({url:$(this).attr("href"),type:"post",dataType:"json"});
a.preventDefault()});c.bind("click touchstart",function(a){$(a.target).closest("a").length||(h(),u(),a.preventDefault())});$("#leanback_tab").show().bind("click touchstart",function(){p()});c.bind("swiperight",function(){o()}).bind("swipeleft",function(){n()}).bind("swipeup",function(){A()});$(".explore").live("click",function(a){A();a.preventDefault()});$("#leanback_intro_overlay .button, #leanback_intro_overlay #leanback_intro_overlay_close").live("click",function(a){h(!localStorage.leanback_seen_intro||
!D);a.preventDefault()});$("#leanback_intro_overlay .button").live("click",function(a){u();a.preventDefault()});$("#leanback_help_overlay #help_overlay_close").live("click",function(a){h(!localStorage.leanback_seen_intro||!D);a.preventDefault()});$("a#leanback_help").live("click",function(a){g();a.preventDefault()});$("#leanback_close").live("click",function(a){A();a.preventDefault()});$(".project_title").live("click",function(a){A();a.preventDefault()});$(window).bind("resize",function(){var a=$(window).height();
$("body").height(a);c.height(a);c.find("video").height(a)});$(window).bind("popstate",function(a){a=a.originalEvent.state;J&&(a?B(a):url_equals(window.location.toString(),M)&&location.reload())});(function(){$("#creator_admin_bar, .NS_layouts__admin_navigation, body > .sticky_placeholder").remove();typeof current_project!=="undefined"&&(a=_.reject(a,function(a){return a.id===current_project.get("id")}),a.unshift(current_project.get()));_.reject(a,function(a){return!a.video});B(a[0])})()}}var c=$([]);
if($("body").is(".leanback")&&(localStorage.leanback_seen==="true"&&$("#leanback_tab").show().bind("click touchstart",function(){a()}),$(window).bind("keydown",function(b){b.keyCode===38&&$(".NS-site_leanback").length===0&&!$(b.target).is(":input")&&window.scrollY<$("#running-board-wrap").height()&&a()}),window.location.hash==="#leanback"))window.location.hash="#",a()});
$(function(){$("body#site_press").length&&($(".read_more").live("click",function(a){$(".more").toggle();$(".read_more").toggle();a.preventDefault()}),$(".faq a").live("click",function(a){$(this).parent(".faq").toggleClass("expanded");a.preventDefault()}))});$(function(){$("body#site_privacy form.select_country").live("change",function(){$(this).submit()})});
$(function(){function a(){c.find("video").each(function(){$(window).width()<=$(this).position().left||$(this).position().left+$(this).width()<0?$(this)[0].pause():$(this)[0].play()});c.find("video:last-child").position().left<=$(window).width()?$("#home_button").fadeIn():$("#home_button").fadeOut()}var d=$("body#site_team"),c=$("#video_header");d.length&&(c.kinetic({maxvelocity:120}),$("#home_button").click(function(){$("#video_header").scrollTo(0,0,{duration:2E3,easing:"easeOutExpo"})}),$(window).resize(function(){a()}),
c.scroll(function(){a()}),a())});$(function(){$("body#site_tou form.select_country").live("change",function(){$(this).submit()})});
$(function(){var a=$(".NS_survey_questions__address");a.length&&(a.find(".country.domestic_backing select").change(function(){var a=$(this).val(),c=$(this).siblings(".domestic_backing_message"),b=$(this).closest(".country").data("project_country");b==="US"&&a!=="USA"?(c.removeClass("hidden"),mixpanel.track("Domestic Message Displayed",{shipping_applicable:"international",survey_context:$("body").attr("id")})):b==="GB"&&a!=="United Kingdom"?(c.removeClass("hidden"),mixpanel.track("Domestic Message Displayed",
{shipping_applicable:"international",survey_context:$("body").attr("id")})):c.addClass("hidden")}),a.find(".country .country_prop").click(function(){$(this).closest(".country").find(".domestic_backing_message").toggle();mixpanel.track("Domestic Message Displayed",{shipping_applicable:"domestic",survey_context:$("body").attr("id")})}),a.find(".country.domestic_backing select").trigger("change"),a.find(".domestic_backing").length&&mixpanel.track("Survey Address for Domestic Backing",{shipping_applicable:a.find(".intl_shipping").length?
"international":"domestic",survey_context:$("body").attr("id")}))});
$(function(){var a=$("body#survey_responses_confirm_address"),d=$("input.radio#suggested_address");a.length&&($(".address_col input.radio",a).live("change",function(){var a=$(this);$(this).closest(".addresses").find(".address_col").each(function(){var a=$(this);a.find("input.radio").is(":checked")?a.find("input[type=hidden]").attr("disabled",!1):a.find("input[type=hidden]").attr("disabled",!0)});a.attr("id")==="entered_address"?mixpanel.track("Address Entered Selected"):a.attr("id")==="suggested_address"&&
mixpanel.track("Suggested Address Selected")}),d&&d.click(),$(".addresses.no_suggestion").length?mixpanel.track("Confirm your Address Page"):mixpanel.track("Select an Address Page"))});$(function(){var a=$("body#survey_responses_edit_address");a.length&&(a.find(".back").click(function(a){a.preventDefault();window.history.go(-1)}),mixpanel.track("Edit Address Page"))});
$(function(){var a=$("body#survey_responses_new"),d=a.find("input:hidden#dirty");a.length&&(a.find("input:text").live("keydown",function(a){a.which===13&&a.preventDefault()}),a.find(".address input:text").live("focus",function(){$(this).closest(".address").removeClass("hide_overlabels")}),d.val()==="0"?d.val("1"):mixpanel.track("Back to Survey Response Page"),mixpanel.track("Survey Response Page"))});
$(function(){function a(){var a=f.find("input.keep_box:checked").closest("li.question:not(.template)");b.empty();a.each(function(){b.append($(this).find("div.preview").children().clone())});b.find("input, textarea, select").attr("disabled",!0)}function d(b){b=$(b);var c=b.val(),d=b.closest("li.question").find(".preview");b.is("#survey_intro")?d.find(".survey_intro").text(c):b.is(".question_choice")?d.find(".choice label").eq(b.closest("li.field").index()).text(c):c?d.find("li > label").text(c):d.find("li > label").text("Question");
a()}var c=$("body#surveys_form"),b=$("#preview",c),e=$("form#new_survey",c),f=$("ul.questions",c);$(".leftcol .textarea:visible, .leftcol .text:visible",c).each(function(){d(this)});$("body#surveys_form .leftcol .checkbox").live("change click",function(){a()});$("body#surveys_form .leftcol #survey_intro_keep").live("change click",function(){$("#survey_intro").attr("disabled",!$(this).is(":checked"))});$("body#surveys_form .leftcol .text, body#surveys_form .leftcol .textarea").live("keyup cut paste",
function(){d(this)});$("a.add_question, a.add_choices_question",c).click(function(a){a.preventDefault();a=$("ul.questions");var b=$(this).hasClass("add_question")?"other":"choices";b=a.children(".template."+b).clone();var c=a.find("li.question").length+1;b.css("display","block");b.removeClass("template");a.append(b);b.find("input.checkbox").attr("checked",!0).trigger("change");b.find("input, textarea").each(function(){var a=$(this);a.attr("id",a.attr("id")+"_"+c);a.attr("name",a.attr("name").replace("[template]",
"["+c+"]"))});b.find("label").each(function(){var a=$(this);a.attr("for",a.attr("for")+"_"+c)})});$(".add_question_choice",c).live("click",function(b){b.preventDefault();var c=$(this).closest("li.question");b=c.find("ol.choice_fields").find("li:last");b=b.clone().insertAfter(b);c=c.find(".preview").find(".choice").last();c=c.clone().insertAfter(c);b.find("label.overlabel .count").text(function(a,b){return parseInt(b,10)+1});b.find(".delete").show().andSelf().find("input").val("").focus();c.val("").find("label").html("").andSelf().find("input.radio").val("");
a()});$(".choice_fields li .delete",c).live("click",function(b){b.preventDefault();b=$(this).closest("li.field");var c=b.closest("li.question").find(".preview"),d=b.parent().children();c.find(".choice").eq(b.index()).remove();b.remove();d.filter(":visible").each(function(a){$(this).find("label.overlabel .count").text(a+1)});a()});e.confirm_submit({copy:"You can only send a survey once per reward tier, so make sure to ask for all the info you need to deliver this reward.",title:"Please Confirm",yes_copy:"Send Survey Now",
no_copy:"Edit Survey"})});
$(function(){function a(){var a=$("#forgot-password");a.removeClass("current");a.siblings("#login, #verify").addClass("current");$(".modal_dialog #facebook, .modal_dialog #verify").show()}$("#login-signup a.switch").live("click",function(a){a.preventDefault();a=$(this).closest(".current");a.removeClass("current");a.siblings("#login, #signup").addClass("current")});$("#login-signup a.link_to_forgot-password-dialog").live("click",function(c){c.preventDefault();c=$(this).closest(".current");c.is("#verify")||
c.removeClass("current");$("#login-signup #forgot-password").addClass("current");$(".modal_dialog #facebook, .modal_dialog #verify").hide();$(document).one("closed.modal_dialog",a);$("form#reset").live("jGrowl.close_200",function(){$(".modal_dialog").trigger("close.modal_dialog")})});$("#forgot-password #reset").live("form-submit-notify",a);var d=$("#user_sessions_new, #users_new");d.length&&($(".current",d).find("input:visible:first").focus(),$("#user_send_newsletters").change(function(){$(this).is(":checked")?
mixpanel.track("Checked Newsletter"):mixpanel.track("Unchecked Newsletter")}),$(".fieldset-errors").livequery(function(){if($.trim($(".fieldset-errors").text())!==""){var a=$(".fieldset-errors h2").text(),b=$(".fieldset-errors li").text();mixpanel.track("Errored User Signup",{error_type:a,error_text:b})}}),$("input",d).focus(function(){$("#login, #signup").removeClass("current");$(this).closest("#login, #signup").addClass("current")}))});
$(function(){$("#new_user").find("input#user_email").live("blur",function(){$(this).mailcheck({suggested:function(a,d){var c=$('<div class="mailcheck_suggestion">Did you mean <a href="#">'+d.full+"</a>?</div>");a.siblings(".mailcheck_suggestion").remove();c.find("a").bind("click",function(b){b.preventDefault();a.val(d.full)});a.before(c);c.slideDown();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Signup Errors","Invalid domain or TLD detected",a.val())},ignoreTLDs:!0})})});
$(function(){var a=$(".NS_users__profile"),d={x:-1,y:-1},c=$("#small_circle");a.length&&($("#profile_tools .share").click(function(a){$("#profile_tools .share_hover").toggle();a.preventDefault()}),$("a.twitter").click(function(a){window.open($(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes");a.preventDefault()}),$("a.facebook").click(function(a){window.open($(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes");
a.preventDefault()}),$(document).mousemove(function(a){d={x:a.pageX,y:a.pageY}}),function(){var a=$("#hover_label");$.plot(c,circle_data,{series:{pie:{show:!0,stroke:{width:2,color:"rgb(230,230,230)"},label:{show:!1}}},grid:{hoverable:!0,clickable:!0},legend:{show:!1}});c.bind("plothover",function(c,f,g){if(g)c=g.series.label,g=circle_data[g.seriesIndex].projects_backed,a.html(g>0?c+" <span id='count'>("+g+")</span>":"<span class='empty'>"+c+"</span>"),a.css({visibility:"visible",top:d.y-a.height()+
"px",left:d.x-a.width()/2+"px",padding:"1px 4px"})});c.bind("mouseout",function(){a.empty();a.css("visibility","hidden")});c.bind("plotclick",function(a,b,d){if(d)(a=circle_data[d.seriesIndex].path)&&typeof a==="string"&&c.trigger("navigate",a)})}())});
$(function(){$(".NS-users_updates_notifications fieldset legend.toggle input.checkbox").live("change",function(){var a=$(this).closest("fieldset");$(this).is(":checked")?(a.find(".inner input").removeAttr("disabled"),a.find(".inner label").removeClass("disabled")):(a.find(".inner input").attr("disabled",!0),a.find(".inner label").addClass("disabled"))})});
$(function(){$(".NS-users-_urls_fields").livequery(function(){var a=$(this),d=$("div.new.template",a);d.find("a.add").click(function(c){c.preventDefault();c=d.find("input.text");var b=d.clone(),e=b.find(".remove input.checkbox"),f;c.val()===""?b.remove():(b.removeClass("template"),b.addClass("field-selected"),b.find("a.add").remove(),b.find("span.value").text(c.val()),c.trigger("dirty"),e.attr("checked",!0),c.val(""),f=(new Date).getTime(),b.find("input,textarea,select").each(function(a,b){b.name=
b.name.replace(/new_[a-z_]*/,f)}),$("div.urls",a).append(b),b.trigger("shifted"))});$(".url .remove a",a).live("click",function(a){a.preventDefault();a=$(this);var b=a.closest("div.url");a.siblings(".checkbox")[0].checked=!1;b.trigger("dirty");b.trigger("shifted");b.hide()});d.find("input.text").bind("keypress",function(a){if((a.keyCode||a.which)===13)a.preventDefault(),d.find("a.add").click()})})});
$(function(){var a=$("#users_edit_account"),d=$("form.edit_user",a),c=!1,b=$("#form_password_modal_dialog",a);a.length&&(a.find("a.change_password_toggle").bind("click",function(b){b.preventDefault();b=$("li.change_password",a);c?(b.fadeOut(),b.find("input").val(""),c=!1):(b.fadeIn(),b.first().find("input").focus(),c=!0)}),d.bind("submit",function(a){b.length&&(a.preventDefault(),b.modal_dialog())}),b.find("form").submit(function(a){a.preventDefault();$(this).find("input").each(function(){var a=$(this);
$("#"+a.attr("id"),d).val(a.val())});d.unbind("submit");d.submit()}))});$(function(){$("#unwatch a").live("click",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!1);$.ajax({url:d.attr("href"),dataType:"json",type:"POST"})})});
$(function(){$("#watch a").live("click",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!0);$.ajax({url:d.attr("href"),dataType:"json",type:"POST",success:function(a){if(a.modal){var b=$.create_modal_dialog("",a.data);b.data("modal_dialog").open();typeof FB!=="undefined"&&FB.XFBML.parse(b.find(".modal_dialog_body")[0]);current_project.set("is_starred",!1)}a.flash&&growl(_.map(a.flash,function(a){return a[a.length-1]}))}})})});
$(function(){$(".widget_show").livequery(function(){function a(a,c){var d=render("widgets/_video_embed_code",{width:a,height:c,path:f});e.find("input#width").val(a);e.find("input#height").val(c);b.find("textarea").val(d)}var d=$(this),c=d.find(".size form"),b=d.find(".video .code"),e=c.find(".custom"),f=b.data("path");a(480,360);c.find("input.radio").bind("change",function(){var d=$("input.radio:checked"),e=d.closest("label");c.find("label").removeClass("selected");e.addClass("selected");a(e.data("width"),
e.data("height"));b.find("textarea").select();d.is("#widget-size_size-custom")&&e.find("input.text").val("").eq(0).select()});e.find("input").bind("keyup input cut paste",function(b){b=$(b.target);var c=4/3,d=e.find("input#width").val(),f=e.find("input#height").val();b.is("#width")?f=Math.ceil(d/c):d=Math.ceil(f*c);a(d,f)})})});
$(function(){var a=$("body.discover"),d,c=$(".mobius",a);a.length&&c.length&&(d=$("#sidebar",a),d.sticky_bar({parent:d.closest("#content")}),$("div.load_more",a).show(),$("div.pagination",a).hide(),c.persistent_paging())});$(function(){$(".activity_mini_comment .excerpt a").live("click",function(a){a.preventDefault();a=$(this).parents("blockquote.excerpt");var d=a.siblings("blockquote.everything");a.hide();d.css("display","inline")})});
$(function(){var a=$(".NS-admin_submissions__edit"),d=$("form.moderator");a.length&&($(".NS-admin_submissions__edit a.change_response").live("click",function(){$(".NS-admin_submissions__edit .responded_to").slideToggle()}),$(".NS-admin_submissions__edit a.claim").live("click",function(a){a.preventDefault();d.find("select#submission_user_id").val($(this).data("admin_id"));d.submit()}),d.live("change",function(){$(this).submit()}),d.live("submit",function(a){var b=$(this),d=b.find(".saving").show();
$.ajax({url:b.attr("action"),type:b.attr("method"),data:b.serialize(),dataType:"json",success:function(a){a.ok?a.moderator_is_me?$(".moderator_only, a.claim").addClass("me"):$(".moderator_only, a.claim").removeClass("me"):growl({error:"Moderator change didn't take :-("})},error:function(){growl({error:"Moderator change didn't take :-("})},complete:function(){d.hide()}});a.preventDefault()}),$(".NS-admin_submissions__edit .state_tools").livequery(function(){var a=$(this),b=a.find("a.reply"),d=a.find("a.accept"),
f=a.find("a.reject"),g=a.siblings("select"),h=a.closest("form"),k={reply:"",accept:d.next(".macro").val(),reject:f.next(".macro").val()},j="reply";a.find("a").click(function(b){var d=$(this);h.find("input.submit").val(d.text());a.find("a").removeClass("selected");d.addClass("selected");k[j]=h.find("textarea.submission_message").val();b.preventDefault()});b.click(function(){g.val("pending");h.find("textarea.submission_message").val(k.reply).focus();j="reply"});d.click(function(){g.val("accepted");
h.find("textarea.submission_message").val(k.accept).focus();j="accept"});f.click(function(){g.val("rejected");h.find("textarea.submission_message").val(k.reject).focus();j="reject"})}))});
$(function(){$("form.NS-admin_projects__edit").live("submit",function(a){var d=$(this),c=d.find(".submit");c.val("Saving");$.ajax({url:d.attr("action"),type:d.attr("method"),dataType:"json",data:d.serialize(),success:function(){c.val("Saved");setTimeout(function(){c.val("Save")},1E3)}});$("#admin-nav-wrap span.moderation_status").text($("select",this).val().substring(0,3));a.preventDefault()}).live("change",function(){$(this).submit()})});
$(function(){function a(a,b){var d=c.find("div.selected"),h=a.clone();b!==!1&&(b=!0);h.find("input:checkbox").remove();b&&h.hide();a.addClass("selected");d.append(h);b&&h.fadeIn()}function d(a){var b=c.find("div.selected").find("label[data-label_id="+a.data("label_id")+"]");a.removeClass("selected");b.fadeOut(function(){b.remove()})}var c=$(".NS-admin_projects_labels"),b;c.livequery(function(){c=$(this);c.find("label").each(function(){var b=$(this),c,d=0,h=0;c=parseInt($.trim($(this).text()),36).toString(16);
if(c.length>=6)c=c.slice(0,6);else{h=6-c.length;for(d=0;d<h;d+=1)c+=c.charAt(d)}d=$.trim($(this).text()).length%6;c=c.substr(d,c.length-d)+c.substr(0,d);c=c.split("");c[0]>"c"&&(c[0]="c");c[2]>"c"&&(c[2]="c");c[4]>"c"&&(c[4]="c");c=c.join("");b.css({backgroundColor:"#"+c,color:"white"});b.find("input.checkbox:checked").length&&a(b,!1)})});$("input.checkbox",c).live("change",function(){var c=$(this),f=c.closest("label"),g=c.closest("form");c.is(":checked")?a(f):d(f);b&&b.abort();b=$.ajax({url:g.attr("action"),
type:g.attr("method"),dataType:"json",data:g.serialize()})});$("div.selected label",c).live("click",function(){c.find("div.unselected").find("label[data-label_id="+$(this).data("label_id")+"]").find("input.checkbox").click()})});var jwplayer=function(a){if(jwplayer.api)return jwplayer.api.selectPlayer(a)},$jw=jwplayer;jwplayer.version="5.7.1794";jwplayer.vid=document.createElement("video");jwplayer.audio=document.createElement("audio");jwplayer.source=document.createElement("source");
(function(a){a.utils=function(){};a.utils.typeOf=function(a){var c=typeof a;c==="object"&&(a?a instanceof Array&&(c="array"):c="null");return c};a.utils.extend=function(){var d=a.utils.extend.arguments;if(d.length>1){for(var c=1;c<d.length;c++)for(var b in d[c])d[0][b]=d[c][b];return d[0]}return null};a.utils.clone=function(){var d,c=a.utils.clone.arguments;if(c.length==1)switch(a.utils.typeOf(c[0])){case "object":d={};for(var b in c[0])d[b]=a.utils.clone(c[0][b]);break;case "array":d=[];for(b in c[0])d[b]=
a.utils.clone(c[0][b]);break;default:return c[0]}return d};a.utils.extension=function(a){a=a.substring(a.lastIndexOf("/")+1,a.length);a=a.split("?")[0];if(a.lastIndexOf(".")>-1)return a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase()};a.utils.html=function(a,c){a.innerHTML=c};a.utils.wrap=function(a,c){a.parentNode.replaceChild(c,a);c.appendChild(a)};a.utils.ajax=function(a,c,b){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){e.readyState===
4&&(e.status===200?c&&c(e):b&&b(a))};try{e.open("GET",a,!0),e.send(null)}catch(f){b&&b(a)}return e};a.utils.load=function(a,c,b){a.onreadystatechange=function(){a.readyState===4&&(a.status===200?c&&c():b&&b())}};a.utils.find=function(a,c){return a.getElementsByTagName(c)};a.utils.append=function(a,c){a.appendChild(c)};a.utils.isIE=function(){return typeof window.ActiveXObject!="undefined"};a.utils.isLegacyAndroid=function(){return navigator.userAgent.toLowerCase().match(/android 2.[012]/i)!==null};
a.utils.isIOS=function(){return navigator.userAgent.toLowerCase().match(/iP(hone|ad)/i)!==null};a.utils.getFirstPlaylistItemFromConfig=function(a){var c={};a=a.playlist&&a.playlist.length?a.playlist[0]:a;c.file=a.file;c.levels=a.levels;c.streamer=a.streamer;c.playlistfile=a.playlistfile;c.provider=a.provider;if(!c.provider){if(c.file&&(c.file.toLowerCase().indexOf("youtube.com")>-1||c.file.toLowerCase().indexOf("youtu.be")>-1))c.provider="youtube";if(c.streamer&&c.streamer.toLowerCase().indexOf("rtmp://")==
0)c.provider="rtmp";if(a.type)c.provider=a.type.toLowerCase()}return c};a.utils.getOuterHTML=function(a){if(a.outerHTML)return a.outerHTML;else try{return(new XMLSerializer).serializeToString(a)}catch(c){return""}};a.utils.setOuterHTML=function(a,c){if(a.outerHTML)a.outerHTML=c;else{var b=document.createElement("div");b.innerHTML=c;var e=document.createRange();e.selectNodeContents(b);b=e.extractContents();a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}};a.utils.hasFlash=function(){if(typeof navigator.plugins!=
"undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined")return!0;if(typeof window.ActiveXObject!="undefined")try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(a){}return!1};a.utils.getPluginName=function(a){a.lastIndexOf("/")>=0&&(a=a.substring(a.lastIndexOf("/")+1,a.length));a.lastIndexOf("-")>=0&&(a=a.substring(0,a.lastIndexOf("-")));a.lastIndexOf(".swf")>=0&&(a=a.substring(0,a.lastIndexOf(".swf")));a.lastIndexOf(".js")>=0&&(a=a.substring(0,a.lastIndexOf(".js")));
return a};a.utils.getPluginVersion=function(a){if(a.lastIndexOf("-")>=0)return a.lastIndexOf(".js")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".js")):a.lastIndexOf(".swf")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".swf")):a.substring(a.lastIndexOf("-")+1);return""};a.utils.getAbsolutePath=function(a,c){if(c===void 0)c=document.location.href;if(a!==void 0){var b;if(a===null)b=void 0;else{b=a.indexOf("://");var e=a.indexOf("?");b=b>0&&(e<0||e>b)}if(b)return a;b=c.substring(0,c.indexOf("://")+
3);e=c.substring(b.length,c.indexOf("/",b.length+1));var f;a.indexOf("/")===0?f=a.split("/"):(f=c.split("?")[0],f=f.substring(b.length+e.length+1,f.lastIndexOf("/")),f=f.split("/").concat(a.split("/")));for(var g=[],h=0;h<f.length;h++)if(f[h]&&!(f[h]===void 0||f[h]=="."))f[h]==".."?g.pop():g.push(f[h]);return b+e+"/"+g.join("/")}};a.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"};a.utils.getPluginPathType=function(d){if(typeof d=="string"){d=d.split("?")[0];var c=d.indexOf("://");
if(c>0)return a.utils.pluginPathType.ABSOLUTE;var b=d.indexOf("/");d=a.utils.extension(d);if(c<0&&b<0&&(!d||!isNaN(d)))return a.utils.pluginPathType.CDN;return a.utils.pluginPathType.RELATIVE}};a.utils.mapEmpty=function(a){for(var c in a)return!1;return!0};a.utils.mapLength=function(a){var c=0,b;for(b in a)c++;return c};a.utils.log=function(a,c){typeof console!="undefined"&&typeof console.log!="undefined"&&(c?console.log(a,c):console.log(a))};a.utils.css=function(d,c){if(d!==void 0)for(var b in c)try{if(typeof c[b]!==
"undefined"){if(typeof c[b]=="number"&&!(b=="zIndex"||b=="opacity")){if(isNaN(c[b]))continue;c[b]=b.match(/color/i)?"#"+a.utils.strings.pad(c[b].toString(16),6):Math.ceil(c[b])+"px"}d.style[b]=c[b]}}catch(e){}};a.utils.isYouTube=function(a){return a.indexOf("youtube.com")>-1||a.indexOf("youtu.be")>-1};a.utils.transform=function(a,c){a.style.webkitTransform=c;a.style.MozTransform=c;a.style.OTransform=c};a.utils.stretch=function(d,c,b,e,f,g){if(!(typeof b=="undefined"||typeof e=="undefined"||typeof f==
"undefined"||typeof g=="undefined")){var h=b/f,k=e/g;c.style.overflow="hidden";a.utils.transform(c,"");var j={};switch(d.toUpperCase()){case a.utils.stretching.NONE:j.width=f;j.height=g;break;case a.utils.stretching.UNIFORM:h>k?(j.width=f*k,j.height=g*k):(j.width=f*h,j.height=g*h);break;case a.utils.stretching.FILL:h>k?(j.width=f*h,j.height=g*h):(j.width=f*k,j.height=g*k);break;case a.utils.stretching.EXACTFIT:a.utils.transform(c,["scale(",h,",",k,") translate(0px,0px)"].join("")),j.width=f,j.height=
g}j.top=(e-j.height)/2;j.left=(b-j.width)/2;a.utils.css(c,j)}};a.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"};a.utils.deepReplaceKeyName=function(d,c,b){switch(a.utils.typeOf(d)){case "array":for(var e=0;e<d.length;e++)d[e]=a.utils.deepReplaceKeyName(d[e],c,b);break;case "object":for(e in d){var f=e.replace(RegExp(c,"g"),b);d[f]=a.utils.deepReplaceKeyName(d[e],c,b);e!=f&&delete d[e]}}return d};a.utils.isInArray=function(a,c){if(!a||!(a instanceof Array))return!1;
for(var b=0;b<a.length;b++)if(c===a[b])return!0;return!1}})(jwplayer);(function(a){a.events=function(){};a.events.COMPLETE="COMPLETE";a.events.ERROR="ERROR"})(jwplayer);
(function(a){a.events.eventdispatcher=function(d){var c,b;this.resetEventListeners=function(){c={};b=[]};this.resetEventListeners();this.addEventListener=function(b,d,g){try{c[b]===void 0&&(c[b]=[]),typeof d=="string"&&eval("listener = "+d),c[b].push({listener:d,count:g})}catch(h){a.utils.log("error",h)}return!1};this.removeEventListener=function(b,d){try{for(var g=0;g<c[b].length;g++)if(c[b][lisenterIndex].toString()==d.toString()){c[b].slice(lisenterIndex,lisenterIndex+1);break}}catch(h){a.utils.log("error",
h)}return!1};this.addGlobalListener=function(c,d){try{typeof c=="string"&&eval("listener = "+c),b.push({listener:c,count:d})}catch(g){a.utils.log("error",g)}return!1};this.removeGlobalListener=function(c){try{for(var d=0;d<b.length;d++)if(b[d].toString()==c.toString()){b.slice(d,d+1);break}}catch(g){a.utils.log("error",g)}return!1};this.sendEvent=function(e,f){f===void 0&&(f={});d&&a.utils.log(e,f);if(typeof c[e]!="undefined")for(var g=0;g<c[e].length;g++){try{c[e][g].listener(f)}catch(h){a.utils.log("There was an error while handling a listener: "+
h.toString(),c[e][g].listener)}c[e][g]&&(c[e][g].count===1?delete c[e][g]:c[e][g].count>0&&(c[e][g].count-=1))}for(g=0;g<b.length;g++){try{b[g].listener(f)}catch(k){a.utils.log("There was an error while handling a listener: "+k.toString(),b[g].listener)}b[g]&&(b[g].count===1?delete b[g]:b[g].count>0&&(b[g].count-=1))}}}})(jwplayer);
(function(a){var d=[];a.api=function(c){function b(a){return function(b,c,d,e){var f;c?(u[b]=c,f="jwplayer('"+a+"').callback('"+b+"')"):!c&&u[b]&&delete u[b];h.jwDockSetButton(b,f,d,e)}}function d(a){return function(b){var c=b.newstate;b=b.oldstate;if(c==a){var d=g[c];if(d)for(var e=0;e<d.length;e++)typeof d[e]=="function"&&d[e].call(this,{oldstate:b,newstate:c})}}}this.container=c;this.id=c.id;var f={},g={},h=void 0,k=!1,j=[],q=a.utils.getOuterHTML(c),s={},u={};this.getBuffer=function(){return this.callInternal("jwGetBuffer")};
this.getContainer=function(){return this.container};this.getPlugin=function(a){var c=this.callInternal;if(a=="dock")return{setButton:b(this.id),show:function(){return c("jwShowDock")},hide:function(){return c("jwHideDock")}};else if(a=="controlbar")return{show:function(){return c("jwShowControlbar")},hide:function(){return c("jwHideControlbar")}};else if(a=="display")return{show:function(){return c("jwShowDisplay")},hide:function(){return c("jwHideDisplay")}};return this.plugins[a]};this.callback=
function(a){if(u[a])return u[a]()};this.getDuration=function(){return this.callInternal("jwGetDuration")};this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")};this.getHeight=function(){return this.callInternal("jwGetHeight")};this.getLockState=function(){return this.callInternal("jwGetLockState")};this.getMeta=function(){return this.getItemMeta()};this.getMute=function(){return this.callInternal("jwGetMute")};this.getPlaylist=function(){var b=this.callInternal("jwGetPlaylist");
this.renderingMode=="flash"&&a.utils.deepReplaceKeyName(b,"__dot__",".");for(var c=0;c<b.length;c++)if(b[c].index===void 0)b[c].index=c;return b};this.getPlaylistItem=function(a){a===void 0&&(a=this.getCurrentItem());return this.getPlaylist()[a]};this.getPosition=function(){return this.callInternal("jwGetPosition")};this.getRenderingMode=function(){return this.renderingMode};this.getState=function(){return this.callInternal("jwGetState")};this.getVolume=function(){return this.callInternal("jwGetVolume")};
this.getWidth=function(){return this.callInternal("jwGetWidth")};this.setFullscreen=function(a){a===void 0?this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen")):this.callInternal("jwSetFullscreen",a);return this};this.setMute=function(a){a===void 0?this.callInternal("jwSetMute",!this.callInternal("jwGetMute")):this.callInternal("jwSetMute",a);return this};this.lock=function(){return this};this.unlock=function(){return this};this.load=function(a){this.callInternal("jwLoad",a);
return this};this.playlistItem=function(a){this.callInternal("jwPlaylistItem",a);return this};this.playlistPrev=function(){this.callInternal("jwPlaylistPrev");return this};this.playlistNext=function(){this.callInternal("jwPlaylistNext");return this};this.resize=function(a,b){this.renderingMode=="html5"?h.jwResize(a,b):(this.container.width=a,this.container.height=b);return this};this.play=function(b){typeof b=="undefined"?(b=this.getState(),b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?
this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPlay",b);return this};this.pause=function(b){typeof b=="undefined"?(b=this.getState(),b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPause",b);return this};this.stop=function(){this.callInternal("jwStop");return this};this.seek=function(a){this.callInternal("jwSeek",a);return this};this.setVolume=function(a){this.callInternal("jwSetVolume",
a);return this};this.onBufferChange=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,b)};this.onBufferFull=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL,b)};this.onError=function(b){return this.eventListener(a.api.events.JWPLAYER_ERROR,b)};this.onFullscreen=function(b){return this.eventListener(a.api.events.JWPLAYER_FULLSCREEN,b)};this.onMeta=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_META,b)};this.onMute=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_MUTE,
b)};this.onPlaylist=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,b)};this.onPlaylistItem=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,b)};this.onReady=function(b){return this.eventListener(a.api.events.API_READY,b)};this.onResize=function(b){return this.eventListener(a.api.events.JWPLAYER_RESIZE,b)};this.onComplete=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,b)};this.onSeek=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_SEEK,
b)};this.onTime=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_TIME,b)};this.onVolume=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,b)};this.onBuffer=function(b){return this.stateListener(a.api.events.state.BUFFERING,b)};this.onPause=function(b){return this.stateListener(a.api.events.state.PAUSED,b)};this.onPlay=function(b){return this.stateListener(a.api.events.state.PLAYING,b)};this.onIdle=function(b){return this.stateListener(a.api.events.state.IDLE,
b)};this.remove=function(){f={};j=[];a.utils.getOuterHTML(this.container)!=q&&a.api.destroyPlayer(this.id,q)};this.setup=function(b){if(a.embed){var c=this.id;this.remove();c=a(c);c.config=b;return new a.embed(c)}return this};this.registerPlugin=function(b,c,d){a.plugins.registerPlugin(b,c,d)};this.setPlayer=function(a,b){h=a;this.renderingMode=b};this.stateListener=function(b,c){g[b]||(g[b]=[],this.eventListener(a.api.events.JWPLAYER_PLAYER_STATE,d(b)));g[b].push(c);return this};this.addInternalListener=
function(a,b){a.jwAddEventListener(b,'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+b+'", dat); }')};this.eventListener=function(a,b){f[a]||(f[a]=[],h&&k&&this.addInternalListener(h,a));f[a].push(b);return this};this.dispatchEvent=function(b,c){if(f[b]){var d;d=a.utils.extend({},c);b==a.api.events.JWPLAYER_FULLSCREEN&&!d.fullscreen?(d.fullscreen=d.message=="true"?!0:!1,delete d.message):typeof d.data=="object"&&(d=a.utils.extend(d,d.data),delete d.data);var e=["position","duration","offset"],
g;for(g in e)d[e[g]]&&(d[e[g]]=Math.round(d[e[g]]*1E3)/1E3);for(e=0;e<f[b].length;e++)typeof f[b][e]=="function"&&f[b][e].call(this,d)}};this.callInternal=function(a,b){if(k){if(typeof h!="undefined"&&typeof h[a]=="function")return b!==void 0?h[a](b):h[a]();return null}else j.push({method:a,parameters:b})};this.playerReady=function(b){k=!0;h||this.setPlayer(document.getElementById(b.id));this.container=document.getElementById(this.id);for(var c in f)this.addInternalListener(h,c);this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,
function(){s={}});this.eventListener(a.api.events.JWPLAYER_MEDIA_META,function(b){a.utils.extend(s,b.metadata)});for(this.dispatchEvent(a.api.events.API_READY);j.length>0;)b=j.shift(),this.callInternal(b.method,b.parameters)};this.getItemMeta=function(){return s};this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")};return this};a.api.selectPlayer=function(c){var b;c===void 0&&(c=0);c.nodeType?b=c:typeof c=="string"&&(b=document.getElementById(c));if(b)return(c=a.api.playerById(b.id))?
c:a.api.addPlayer(new a.api(b));else if(typeof c=="number")return a.getPlayers()[c];return null};a.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",
JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"};a.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"};a.api.playerById=function(a){for(var b=0;b<d.length;b++)if(d[b].id==
a)return d[b];return null};a.api.addPlayer=function(a){for(var b=0;b<d.length;b++)if(d[b]==a)return a;d.push(a);return a};a.api.destroyPlayer=function(c,b){for(var e=-1,f=0;f<d.length;f++)d[f].id==c&&(e=f);if(e>=0){f=document.getElementById(d[e].id);document.getElementById(d[e].id+"_wrapper")&&(f=document.getElementById(d[e].id+"_wrapper"));if(f)if(b)a.utils.setOuterHTML(f,b);else{var g=document.createElement("div"),h=f.id;f.id.indexOf("_wrapper")==f.id.length-8&&(newID=f.id.substring(0,f.id.length-
8));g.setAttribute("id",h);f.parentNode.replaceChild(g,f)}d.splice(e,1)}return null};a.getPlayers=function(){return d.slice(0)}})(jwplayer);var _userPlayerReady=typeof playerReady=="function"?playerReady:void 0;playerReady=function(a){var d=jwplayer.api.playerById(a.id);d?d.playerReady(a):jwplayer.api.selectPlayer(a.id).playerReady(a);_userPlayerReady&&_userPlayerReady.call(this,a)};var video_tracker_url,video_location,position,duration;
function ksr_track(a){if(typeof video_tracker_url!=="undefined"){var d=new XMLHttpRequest;a="event_type="+a+"&location="+video_location;d.open("POST",video_tracker_url,!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.send(a)}}
function attachTrackers(a,d){if(typeof pageTracker!=="undefined")window.player=jwplayer(document.getElementById(a.id)),window.player.onPlay(function(a){a.oldstate==="BUFFERING"?(ksr_track("start"),pageTracker._trackEvent(d,"Start"),mixpanel.track(d+" Start")):a.oldstate==="PAUSED"&&(position=parseInt(window.player.getPosition(),10),mixpanel.track(d+" Resume",{position:position}),pageTracker._trackEvent(d,"Resume","position",position))}),window.player.onPause(function(a){a.oldstate==="PLAYING"&&(position=
parseInt(window.player.getPosition(),10),mixpanel.track(d+" Pause",{position:position}),pageTracker._trackEvent(d,"Pause","position",position))}),window.player.onComplete(function(){duration=parseInt(window.player.getPosition(),10);ksr_track("complete");pageTracker._trackEvent(d,"Complete","duration",duration);mixpanel.track(d+" Complete",{duration:duration})})}
if(typeof jQuery!=="undefined")jQuery(document).ready(function(){$("#projects_show .ksr_player").livequery(function(){video_tracker_url=$(this).closest(".video-player").attr("data-video-tracker-url");video_location="internal";attachTrackers(this,"Project Video")});$(".school .ksr_player").livequery(function(){attachTrackers(this,"School Video")});$("#running-board .ksr_player").livequery(function(){video_tracker_url=$(this).closest(".video-player").attr("data-video-tracker-url");video_location="internal";
attachTrackers(this,"Homepage Project Grid Video")});$("#editorial-projects .ksr_player").livequery(function(){video_tracker_url=$(this).closest(".video-player").attr("data-video-tracker-url");video_location="internal";attachTrackers(this,"Homepage Editorial Video")});$("#projects_start .ksr_player").livequery(function(){attachTrackers(this,"Project Start Page Video")})});else{if(typeof analytics_vars!=="undefined"&&typeof pageTracker==="undefined")window.pageTracker=_gat._createTracker(analytics_vars.google_analytics_id);
video_tracker_url=document.getElementsByTagName("object")[0].getAttribute("data-video-tracker-url");video_location="external";var page_type="Project Video";attachTrackers(document.getElementsByTagName("object")[0],page_type)};
